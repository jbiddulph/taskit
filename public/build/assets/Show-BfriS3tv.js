import{d as R,r as w,p as V,o as i,w as l,e,a as o,c as d,j as c,t as n,g as q,s as M,v as A,b as r,i as D,n as $,F as C,k as I,q as N,m as L,f as U,x as K}from"./app-CDlobNF8.js";import{_ as j}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dr6AkaNs.js";import{_ as z}from"./Heading.vue_vue_type_script_setup_true_lang-Dzlcp9s_.js";import{_ as g,a as f,b,c as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-Foz5coVd.js";import{_ as u}from"./realtimeService-BiNf567Y.js";import"./index-waWfUB_R.js";import"./useForwardExpose-Dj1nBSFE.js";import"./Presence-DQBz3k14.js";import"./x-dGozUNM5.js";import"./VisuallyHidden-BowAtPxA.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B90mEkmF.js";import"./check-BukfDgn1.js";import"./lock-CKvVkIjL.js";import"./globe-BAPgS0v4.js";import"./loader-circle-aQqR2I9i.js";const H={class:"space-y-6 p-6"},J={class:"flex items-center gap-2"},W={key:0,class:"flex items-center gap-2"},G={key:1,class:"flex items-center gap-2"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Y={class:"text-lg font-semibold"},Z={class:"text-lg font-mono"},ee={key:0},te={class:"text-gray-700"},se={class:"flex items-center gap-2"},ae={class:"text-lg"},oe={key:0},ne={key:1},le={key:2},re={class:"text-lg"},ie={key:0},de={key:1},me={key:2},ce={class:"overflow-hidden"},ue={class:"space-y-3"},pe={class:"font-medium"},ye={class:"text-sm text-gray-500"},ge={class:"text-sm text-gray-500"},fe={class:"flex items-center justify-between gap-4"},be={class:"overflow-hidden"},_e={class:"space-y-3"},ve=["onClick"],xe={class:"space-y-1"},he={class:"font-medium flex items-center gap-2"},ke={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},we={class:"text-sm text-gray-500"},Ce={key:0,class:"text-sm text-blue-600"},Ie=["value","onChange"],Ne=["value"],Se={class:"text-right"},Ee={class:"text-sm text-gray-500"},Te={class:"text-sm text-gray-500"},ze=R({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup(P){const v=P,y=w(!1),p=w(""),x=w(),h=s=>new Date(s).toLocaleDateString(),B=s=>{const t={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return t[s]||t.FREE},F=async()=>{y.value=!0,p.value=v.company.name,await K(),x.value?.focus(),x.value?.select()},k=()=>{p.value.trim()&&p.value!==v.company.name&&N.put(`/companies/${v.company.id}`,{name:p.value.trim()},{preserveState:!0,preserveScroll:!0}),y.value=!1},S=()=>{y.value=!1,p.value=""},X=async(s,t)=>{const m=t.target.value,O=m===""?null:Number(m);try{const T=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...T?{"X-CSRF-TOKEN":T}:{}},body:JSON.stringify({client_id:O})})}catch(E){console.error("Failed to update project client",E)}};return(s,t)=>(i(),V(j,{company:s.company},{default:l(()=>[e("div",H,[e("div",J,[y.value?(i(),d("div",G,[q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),onKeydown:[M(k,["enter"]),M(S,["escape"])],onBlur:k,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:x},null,544),[[A,p.value]]),e("button",{onClick:k,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[o(u,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:S,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[o(u,{name:"X",class:"w-5 h-5"})])])):(i(),d("div",W,[o(z,{title:s.company.name},{default:l(()=>[c(n(s.company.name),1)]),_:1},8,["title"]),e("button",{onClick:F,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[o(u,{name:"Edit3",class:"w-5 h-5"})])]))]),e("div",Q,[o(r(g),null,{default:l(()=>[o(r(f),null,{default:l(()=>[o(r(b),{class:"flex items-center gap-2"},{default:l(()=>[o(u,{name:"Building",class:"w-5 h-5"}),t[3]||(t[3]=c(" Company Information ",-1))]),_:1,__:[3]})]),_:1}),o(r(_),{class:"space-y-4"},{default:l(()=>[e("div",null,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",Y,n(s.company.name),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Code",-1)),e("p",Z,n(s.company.code),1)]),s.company.description?(i(),d("div",ee,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",te,n(s.company.description),1)])):D("",!0),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,n(h(s.company.created_at)),1)])]),_:1})]),_:1}),o(r(g),null,{default:l(()=>[o(r(f),null,{default:l(()=>[o(r(b),{class:"flex items-center gap-2"},{default:l(()=>[o(u,{name:"CreditCard",class:"w-5 h-5"}),t[8]||(t[8]=c(" Subscription Details ",-1))]),_:1,__:[8]})]),_:1}),o(r(_),{class:"space-y-4"},{default:l(()=>[e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",se,[e("span",{class:$([B(s.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},n(s.company.subscription_type),3)])]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",ae,[c(n(s.company.current_member_count)+" / ",1),s.company.subscription_type==="MAXI"?(i(),d("span",oe,"Unlimited")):s.company.subscription_type==="MIDI"?(i(),d("span",ne,"10")):(i(),d("span",le,n(s.company.member_limit),1))])]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",re,[c(n(s.company.current_project_count)+" / ",1),s.company.subscription_type==="MAXI"?(i(),d("span",ie,"Unlimited")):s.company.subscription_type==="MIDI"?(i(),d("span",de,"20")):(i(),d("span",me,n(s.company.project_limit),1))])])]),_:1})]),_:1})]),o(r(g),null,{default:l(()=>[o(r(f),null,{default:l(()=>[o(r(b),{class:"flex items-center gap-2"},{default:l(()=>[o(u,{name:"Users",class:"w-5 h-5"}),c(" Team Members ("+n(s.members.length)+") ",1)]),_:1})]),_:1}),o(r(_),null,{default:l(()=>[e("div",ce,[e("div",ue,[(i(!0),d(C,null,I(s.members,a=>(i(),d("div",{key:a.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",pe,n(a.name),1),e("p",ye,n(a.email),1)]),e("div",ge," Joined "+n(h(a.created_at)),1)]))),128))])])]),_:1})]),_:1}),o(r(g),null,{default:l(()=>[o(r(f),null,{default:l(()=>[e("div",fe,[o(r(b),{class:"flex items-center gap-2"},{default:l(()=>[o(u,{name:"FolderOpen",class:"w-5 h-5"}),c(" Projects ("+n(s.projects.length)+") ",1)]),_:1}),e("button",{type:"button",onClick:t[1]||(t[1]=a=>r(N).visit("/dashboard")),class:"inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium border transition-colors bg-black text-white hover:bg-gray-900 hover:border-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 dark:hover:border-gray-300"},[o(u,{name:"Plus",class:"w-4 h-4"}),t[12]||(t[12]=e("span",null,"New Project",-1))])])]),_:1}),o(r(_),null,{default:l(()=>[e("div",be,[e("div",_e,[(i(!0),d(C,null,I(s.projects,a=>(i(),d("div",{key:a.id,class:$(["flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-[6px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",a.color?"":"border-l-blue-500"]),style:L(a.color?{borderLeftColor:a.color}:void 0),onClick:()=>{typeof s.window<"u"?(s.window.localStorage.setItem("currentProjectId",a.id.toString()),s.window.location.href="/dashboard"):r(N).visit("/dashboard")}},[e("div",xe,[e("p",he,[c(n(a.name)+" ",1),e("span",ke,n(a.total_todos??0)+" "+n((a.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",we,n(a.key),1),a.client?(i(),d("p",Ce,n(a.client.name),1)):D("",!0),e("div",{class:"mt-2",onClick:t[2]||(t[2]=U(()=>{},["stop"]))},[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:a.client?a.client.id:"",onChange:m=>X(a.id,m)},[t[13]||(t[13]=e("option",{value:""},"No Client",-1)),(i(!0),d(C,null,I(s.clients,m=>(i(),d("option",{key:m.id,value:m.id},n(m.name),9,Ne))),128))],40,Ie)])]),e("div",Se,[e("p",Ee,"Owner: "+n(a.owner.name),1),e("p",Te,n(h(a.created_at)),1)])],14,ve))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{ze as default};
