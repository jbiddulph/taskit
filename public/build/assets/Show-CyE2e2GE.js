import{d as L,r as g,p as W,o as l,w as i,e,a,c as r,i as I,j as m,t as n,g as q,s as M,v as O,F as f,k as b,b as d,n as D,q as B,m as U,f as K,x as j}from"./app-Bd0gMqJs.js";import{_ as z}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B_liXG6U.js";import{_ as H}from"./Heading.vue_vue_type_script_setup_true_lang-CbVFaEXk.js";import{_,a as x,b as v,c as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-DLBr5lWi.js";import{_ as p}from"./useClientStore-Diq079jf.js";import"./index-CnEtMupZ.js";import"./useForwardExpose-Db6YlBsb.js";import"./Presence-DYJ5S9xS.js";import"./x-BZKfd2P3.js";import"./VisuallyHidden-B2pfmJL1.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C9tdQnxq.js";import"./check-DRX8D4Rk.js";import"./lock-Unmaixvu.js";import"./globe-DqpoHb_L.js";import"./loader-circle-0NUqJ_El.js";const J={class:"space-y-6 p-6"},G={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Q={class:"flex flex-col gap-1"},Y={class:"flex items-center gap-2"},Z={key:0,class:"flex items-center gap-2"},ee={key:1,class:"flex items-center gap-2"},te={class:"flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-300"},se={class:"font-mono font-semibold text-gray-900 dark:text-gray-100"},oe={class:"flex items-center gap-2"},ae=["value"],ne=["value"],le={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},re={class:"font-semibold"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},de={class:"text-lg font-semibold"},me={key:0},ce={class:"text-gray-700"},ue={class:"flex items-center gap-2"},pe={class:"text-lg"},ge={key:0},ye={key:1},fe={key:2},be={class:"text-lg"},_e={key:0},xe={key:1},ve={key:2},he={class:"overflow-hidden"},ke={class:"space-y-3"},Ce={class:"font-medium"},we={class:"text-sm text-gray-500"},Ie={class:"text-sm text-gray-500"},Ne={class:"overflow-hidden"},Se={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3"},Te=["onClick"],Ee={class:"space-y-2"},Fe={class:"font-medium flex items-center gap-2"},Me={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},De={class:"text-sm text-gray-500"},Be={key:0,class:"text-sm text-blue-600"},$e=["value","onChange"],Pe=["value"],Ye=L({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup($){const k=$,y=g(!1),u=g(""),C=g(),N=s=>new Date(s).toLocaleDateString(),P=s=>{const t={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return t[s]||t.FREE},R=async()=>{y.value=!0,u.value=k.company.name,await j(),C.value?.focus(),C.value?.select()},w=()=>{u.value.trim()&&u.value!==k.company.name&&B.put(`/companies/${k.company.id}`,{name:u.value.trim()},{preserveState:!0,preserveScroll:!0}),y.value=!1},S=()=>{y.value=!1,u.value=""},X=g("all"),T=g(""),V=async(s,t)=>{const c=t.target.value,A=c===""?null:Number(c);try{const F=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...F?{"X-CSRF-TOKEN":F}:{}},body:JSON.stringify({client_id:A})})}catch(E){console.error("Failed to update project client",E)}};return(s,t)=>(l(),W(z,{company:s.company},{default:i(()=>[e("div",J,[e("div",G,[e("div",Q,[e("div",Y,[y.value?(l(),r("div",ee,[q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),onKeydown:[M(w,["enter"]),M(S,["escape"])],onBlur:w,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:C},null,544),[[O,u.value]]),e("button",{onClick:w,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[a(p,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:S,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[a(p,{name:"X",class:"w-5 h-5"})])])):(l(),r("div",Z,[a(H,{title:s.company.name},{default:i(()=>[m(n(s.company.name),1)]),_:1},8,["title"]),e("button",{onClick:R,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[a(p,{name:"Edit3",class:"w-5 h-5"})])]))]),e("div",te,[e("span",null,[t[3]||(t[3]=m(" Company Code: ",-1)),e("span",se,n(s.company.code),1)]),e("div",oe,[t[5]||(t[5]=e("span",null,"Project Filter:",-1)),e("select",{class:"rounded-md border border-gray-300 bg-white px-2 py-1 text-xs text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",value:X.value,onChange:t[1]||(t[1]=(...o)=>s.handleClientFilterChange&&s.handleClientFilterChange(...o))},[t[4]||(t[4]=e("option",{value:"all"},"All Projects",-1)),(l(!0),r(f,null,b(s.clients,o=>(l(),r("option",{key:o.id,value:o.id},n(o.name),9,ne))),128))],40,ae)])])]),T.value?(l(),r("div",le,[t[6]||(t[6]=m(" Viewing projects for ",-1)),e("span",re,n(T.value),1)])):I("",!0)]),e("div",ie,[a(d(_),null,{default:i(()=>[a(d(x),null,{default:i(()=>[a(d(v),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"Building",class:"w-5 h-5"}),t[7]||(t[7]=m(" Company Information ",-1))]),_:1,__:[7]})]),_:1}),a(d(h),{class:"space-y-4"},{default:i(()=>[e("div",null,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",de,n(s.company.name),1)]),s.company.description?(l(),r("div",me,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",ce,n(s.company.description),1)])):I("",!0),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,n(N(s.company.created_at)),1)])]),_:1})]),_:1}),a(d(_),null,{default:i(()=>[a(d(x),null,{default:i(()=>[a(d(v),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"CreditCard",class:"w-5 h-5"}),t[11]||(t[11]=m(" Subscription Details ",-1))]),_:1,__:[11]})]),_:1}),a(d(h),{class:"space-y-4"},{default:i(()=>[e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",ue,[e("span",{class:D([P(s.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},n(s.company.subscription_type),3)])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",pe,[m(n(s.company.current_member_count)+" / ",1),s.company.subscription_type==="MAXI"?(l(),r("span",ge,"Unlimited")):s.company.subscription_type==="MIDI"?(l(),r("span",ye,"10")):(l(),r("span",fe,n(s.company.member_limit),1))])]),e("div",null,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",be,[m(n(s.company.current_project_count)+" / ",1),s.company.subscription_type==="MAXI"?(l(),r("span",_e,"Unlimited")):s.company.subscription_type==="MIDI"?(l(),r("span",xe,"20")):(l(),r("span",ve,n(s.company.project_limit),1))])])]),_:1})]),_:1})]),a(d(_),null,{default:i(()=>[a(d(x),null,{default:i(()=>[a(d(v),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"Users",class:"w-5 h-5"}),m(" Team Members ("+n(s.members.length)+") ",1)]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[e("div",he,[e("div",ke,[(l(!0),r(f,null,b(s.members,o=>(l(),r("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",Ce,n(o.name),1),e("p",we,n(o.email),1)]),e("div",Ie," Joined "+n(N(o.created_at)),1)]))),128))])])]),_:1})]),_:1}),a(d(_),null,{default:i(()=>[a(d(x),null,{default:i(()=>[a(d(v),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"FolderOpen",class:"w-5 h-5"}),m(" Projects ("+n(s.projects.length)+") ",1)]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[e("div",Ne,[e("div",Se,[(l(!0),r(f,null,b(s.projects,o=>(l(),r("div",{key:o.id,class:D(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",o.color?"":"border-l-blue-500"]),style:U(o.color?{borderLeftColor:o.color,borderTopColor:o.color,borderRightColor:o.color,borderBottomColor:o.color,borderLeftWidth:"6px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"}:{}),onClick:()=>{s.localStorage.setItem("currentProjectId",o.id.toString()),d(B).visit("/dashboard")}},[e("div",Ee,[e("p",Fe,[m(n(o.name)+" ",1),e("span",Me,n(o.total_todos??0)+" "+n((o.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",De,n(o.key),1),o.client?(l(),r("p",Be,n(o.client.name),1)):I("",!0),e("div",{class:"mt-2",onClick:t[2]||(t[2]=K(()=>{},["stop"]))},[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:o.client?o.client.id:"",onChange:c=>V(o.id,c)},[t[15]||(t[15]=e("option",{value:""},"No Client",-1)),(l(!0),r(f,null,b(s.clients,c=>(l(),r("option",{key:c.id,value:c.id},n(c.name),9,Pe))),128))],40,$e)])])],14,Te))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{Ye as default};
