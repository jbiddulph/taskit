import{d as W,r as g,p as q,o as l,w as i,e,a,c as r,i as S,j as m,t as n,g as O,s as B,v as U,F as v,k as x,b as d,n as $,q as P,m as K,f as j,x as z}from"./app-C2I7YZmL.js";import{_ as H}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B87qrPE3.js";import{_ as J}from"./Heading.vue_vue_type_script_setup_true_lang-DdbPZTZY.js";import{_ as h,a as k,b as C,c as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-BwZtsZgt.js";import{_ as p}from"./realtimeService-DScfqfQK.js";import"./index-8gRJRtk0.js";import"./useForwardExpose-CBOiAQ6o.js";import"./Presence-BFPrzx00.js";import"./x-CML2PbiT.js";import"./VisuallyHidden-DuR0257T.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-soN65N8j.js";import"./check-DP7O5K6k.js";import"./lock-Z0OkIFtr.js";import"./globe-BEs89Rjn.js";import"./loader-circle-CbBGDmWE.js";const G={class:"space-y-6 p-6"},Q={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Y={class:"flex flex-col gap-1"},Z={class:"flex items-center gap-2"},ee={key:0,class:"flex items-center gap-2"},te={key:1,class:"flex items-center gap-2"},se={class:"flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-300"},oe={class:"font-mono font-semibold text-gray-900 dark:text-gray-100"},ae={class:"flex items-center gap-2"},ne=["value"],le=["value"],re={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},ie={class:"font-semibold"},de={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ce={class:"text-lg font-semibold"},me={key:0},ue={class:"text-gray-700"},pe={class:"flex items-center gap-2"},ge={class:"text-lg"},ye={key:0},fe={key:1},be={key:2},_e={class:"text-lg"},ve={key:0},xe={key:1},he={key:2},ke={class:"overflow-hidden"},Ce={class:"space-y-3"},we={class:"font-medium"},Ne={class:"text-sm text-gray-500"},Ie={class:"text-sm text-gray-500"},Ee={class:"overflow-hidden"},Se={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3"},Te=["onClick"],Fe={class:"space-y-2"},Me={class:"font-medium flex items-center gap-2"},De={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},Be={class:"text-sm text-gray-500"},$e={key:0,class:"text-sm text-blue-600"},Pe=["value","onChange"],Re=["value"],Ze=W({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup(R){const y=R,f=g(!1),u=g(""),N=g(),T=o=>new Date(o).toLocaleDateString(),X=o=>{const t={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return t[o]||t.FREE},V=async()=>{f.value=!0,u.value=y.company.name,await z(),N.value?.focus(),N.value?.select()},I=()=>{u.value.trim()&&u.value!==y.company.name&&P.put(`/companies/${y.company.id}`,{name:u.value.trim()},{preserveState:!0,preserveScroll:!0}),f.value=!1},F=()=>{f.value=!1,u.value=""},M=g("all"),E=g(""),A=o=>{const s=o.target.value;M.value=s;const c=s==="all"?null:Number(s),b=s==="all"?"":y.clients.find(_=>_.id===c)?.name??"";E.value=b,typeof window<"u"&&window.dispatchEvent(new CustomEvent("clientFilterChanged",{detail:{clientId:c,clientName:b}}))},L=async(o,t)=>{const c=t.target.value,b=c===""?null:Number(c);try{const D=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${o}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...D?{"X-CSRF-TOKEN":D}:{}},body:JSON.stringify({client_id:b})})}catch(_){console.error("Failed to update project client",_)}};return(o,t)=>(l(),q(H,{company:o.company},{default:i(()=>[e("div",G,[e("div",Q,[e("div",Y,[e("div",Z,[f.value?(l(),r("div",te,[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onKeydown:[B(I,["enter"]),B(F,["escape"])],onBlur:I,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:N},null,544),[[U,u.value]]),e("button",{onClick:I,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[a(p,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:F,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[a(p,{name:"X",class:"w-5 h-5"})])])):(l(),r("div",ee,[a(J,{title:o.company.name},{default:i(()=>[m(n(o.company.name),1)]),_:1},8,["title"]),e("button",{onClick:V,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[a(p,{name:"Edit3",class:"w-5 h-5"})])]))]),e("div",se,[e("span",null,[t[2]||(t[2]=m(" Company Code: ",-1)),e("span",oe,n(o.company.code),1)]),e("div",ae,[t[4]||(t[4]=e("span",null,"Project Filter:",-1)),e("select",{class:"rounded-md border border-gray-300 bg-white px-2 py-1 text-xs text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",value:M.value,onChange:A},[t[3]||(t[3]=e("option",{value:"all"},"All Projects",-1)),(l(!0),r(v,null,x(o.clients,s=>(l(),r("option",{key:s.id,value:s.id},n(s.name),9,le))),128))],40,ne)])])]),E.value?(l(),r("div",re,[t[5]||(t[5]=m(" Viewing projects for ",-1)),e("span",ie,n(E.value),1)])):S("",!0)]),e("div",de,[a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(C),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"Building",class:"w-5 h-5"}),t[6]||(t[6]=m(" Company Information ",-1))]),_:1,__:[6]})]),_:1}),a(d(w),{class:"space-y-4"},{default:i(()=>[e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",ce,n(o.company.name),1)]),o.company.description?(l(),r("div",me,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",ue,n(o.company.description),1)])):S("",!0),e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,n(T(o.company.created_at)),1)])]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(C),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"CreditCard",class:"w-5 h-5"}),t[10]||(t[10]=m(" Subscription Details ",-1))]),_:1,__:[10]})]),_:1}),a(d(w),{class:"space-y-4"},{default:i(()=>[e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",pe,[e("span",{class:$([X(o.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},n(o.company.subscription_type),3)])]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",ge,[m(n(o.company.current_member_count)+" / ",1),o.company.subscription_type==="MAXI"?(l(),r("span",ye,"Unlimited")):o.company.subscription_type==="MIDI"?(l(),r("span",fe,"10")):(l(),r("span",be,n(o.company.member_limit),1))])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",_e,[m(n(o.company.current_project_count)+" / ",1),o.company.subscription_type==="MAXI"?(l(),r("span",ve,"Unlimited")):o.company.subscription_type==="MIDI"?(l(),r("span",xe,"20")):(l(),r("span",he,n(o.company.project_limit),1))])])]),_:1})]),_:1})]),a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(C),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"Users",class:"w-5 h-5"}),m(" Team Members ("+n(o.members.length)+") ",1)]),_:1})]),_:1}),a(d(w),null,{default:i(()=>[e("div",ke,[e("div",Ce,[(l(!0),r(v,null,x(o.members,s=>(l(),r("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",we,n(s.name),1),e("p",Ne,n(s.email),1)]),e("div",Ie," Joined "+n(T(s.created_at)),1)]))),128))])])]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(C),{class:"flex items-center gap-2"},{default:i(()=>[a(p,{name:"FolderOpen",class:"w-5 h-5"}),m(" Projects ("+n(o.projects.length)+") ",1)]),_:1})]),_:1}),a(d(w),null,{default:i(()=>[e("div",Ee,[e("div",Se,[(l(!0),r(v,null,x(o.projects,s=>(l(),r("div",{key:s.id,class:$(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",s.color?"":"border-l-blue-500"]),style:K(s.color?{borderLeftColor:s.color,borderTopColor:s.color,borderRightColor:s.color,borderBottomColor:s.color,borderLeftWidth:"6px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"}:{}),onClick:()=>{o.localStorage.setItem("currentProjectId",s.id.toString()),d(P).visit("/dashboard")}},[e("div",Fe,[e("p",Me,[m(n(s.name)+" ",1),e("span",De,n(s.total_todos??0)+" "+n((s.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",Be,n(s.key),1),s.client?(l(),r("p",$e,n(s.client.name),1)):S("",!0),e("div",{class:"mt-2",onClick:t[1]||(t[1]=j(()=>{},["stop"]))},[t[15]||(t[15]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:s.client?s.client.id:"",onChange:c=>L(s.id,c)},[t[14]||(t[14]=e("option",{value:""},"No Client",-1)),(l(!0),r(v,null,x(o.clients,c=>(l(),r("option",{key:c.id,value:c.id},n(c.name),9,Re))),128))],40,Pe)])])],14,Te))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{Ze as default};
