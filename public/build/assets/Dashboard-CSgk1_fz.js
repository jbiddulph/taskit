import{d as E,D as C,K as F,C as S,c as h,a as c,o as i,f as s,A as e,J as T,q as o,b as a,e as x,t as p,g as m,F as $}from"./app-zephvT_w.js";import{q as B}from"./index-y7MiuvJb.js";import{_ as q}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D2dN5RWB.js";import{_ as u,a as _,b as w,c as O,d as R}from"./CardTitle.vue_vue_type_script_setup_true_lang-CQZ6pk6w.js";import{_ as U}from"./Checkbox.vue_vue_type_script_setup_true_lang-DXIr5Th_.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-DNZJrdsr.js";import{_ as Q}from"./Layout.vue_vue_type_script_setup_true_lang-C8emCsaX.js";import{I as A,C as y,b as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-1MEAUmwe.js";import"./check-DI6HabTr.js";import"./useForwardExpose-CknZjx9h.js";import"./index-Chnu9G4N.js";const n=r=>({url:n.url(r),method:"patch"});n.definition={methods:["patch"],url:"/settings/dashboard"};n.url=r=>n.definition.url+B(r);n.patch=r=>({url:n.url(r),method:"patch"});const v=r=>({action:n.url({[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...r?.query??r?.mergeQuery??{}}}),method:"post"});v.patch=r=>({action:n.url({[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...r?.query??r?.mergeQuery??{}}}),method:"post"});n.form=v;const I={class:"space-y-6"},M={key:0,class:"mb-6"},V={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},H={class:"text-sm font-medium"},z={key:1,class:"mb-6"},J={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},K={class:"text-sm font-medium"},j={class:"flex items-start space-x-3"},L={class:"grid gap-1.5 leading-none"},W={class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},X={class:"flex items-center pt-4"},me=E({__name:"Dashboard",props:{user:{},company:{}},setup(r){const f=r,g=C(),d=F({prune_completed_tasks:f.company?.prune_completed_tasks||!1});S(()=>f.company?.prune_completed_tasks,l=>{l!==void 0&&(d.prune_completed_tasks=l)},{immediate:!0});const D=()=>{console.log("FRONTEND DEBUG: Starting form submission"),console.log("FRONTEND DEBUG: Form data:",{prune_completed_tasks:d.prune_completed_tasks}),d.patch(n().url,{preserveScroll:!0,onSuccess:l=>{console.log("FRONTEND DEBUG: Success response received"),console.log("FRONTEND DEBUG: Response company data:",l.props.company);const t=l.props.company;d.prune_completed_tasks=t?.prune_completed_tasks||!1,console.log("FRONTEND DEBUG: Form updated with:",d.prune_completed_tasks)},onError:l=>{console.log("FRONTEND DEBUG: Error response:",l)}})},k=h(()=>g.props.errors||{}),b=h(()=>g.props.flash?.success||"");return(l,t)=>(i(),c($,null,[s(e(T),{title:"Dashboard Settings"}),s(P,null,{default:o(()=>[s(Q,null,{default:o(()=>[a("div",I,[t[6]||(t[6]=a("div",null,[a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Dashboard Settings"),a("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure your dashboard preferences and automation settings. ")],-1)),b.value?(i(),c("div",M,[s(e(u),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:o(()=>[s(e(_),{class:"p-4"},{default:o(()=>[a("div",V,[s(e(A),{class:"w-5 h-5 flex-shrink-0"}),a("p",H,p(b.value),1)])]),_:1})]),_:1})])):x("",!0),k.value.error?(i(),c("div",z,[s(e(u),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:o(()=>[s(e(_),{class:"p-4"},{default:o(()=>[a("div",J,[s(e(y),{class:"w-5 h-5 flex-shrink-0"}),a("p",K,p(k.value.error),1)])]),_:1})]),_:1})])):x("",!0),s(e(u),null,{default:o(()=>[s(e(w),null,{default:o(()=>[s(e(O),null,{default:o(()=>t[1]||(t[1]=[m("Task Management",-1)])),_:1,__:[1]}),s(e(R),null,{default:o(()=>t[2]||(t[2]=[m(" Configure automatic task management and cleanup settings. ",-1)])),_:1,__:[2]})]),_:1}),s(e(_),{class:"space-y-4"},{default:o(()=>[a("div",j,[s(e(U),{id:"prune_completed_tasks",checked:e(d).prune_completed_tasks,"onUpdate:checked":t[0]||(t[0]=N=>e(d).prune_completed_tasks=N)},null,8,["checked"]),a("div",L,[s(e(G),{for:"prune_completed_tasks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:o(()=>t[3]||(t[3]=[m(" Prune all Completed tasks in the Done column (daily at midnight) ",-1)])),_:1,__:[3]}),t[4]||(t[4]=a("p",{class:"text-xs text-muted-foreground"}," Automatically delete all completed tasks and their comments daily at midnight. This helps keep your workspace clean and organized. ",-1))])]),a("div",W,[s(e(y),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),t[5]||(t[5]=a("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[a("p",{class:"font-medium mb-1"},"Important:"),a("p",{class:"text-xs"}," Once tasks are pruned, they cannot be recovered. Make sure you have exported any important data before enabling this feature. ")],-1))]),a("div",X,[s(e(q),{onClick:D,disabled:e(d).processing},{default:o(()=>[m(p(e(d).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}});export{me as default};
