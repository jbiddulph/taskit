import{d as L,r as g,p as W,o as l,w as i,e,a,c as r,i as S,j as u,t as n,g as q,s as B,v as O,b as d,F as _,k as x,n as $,q as T,m as U,f as K,x as z}from"./app-DGvA91Wu.js";import{_ as H}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CKkmiRRN.js";import{_ as J}from"./Heading.vue_vue_type_script_setup_true_lang-2m3DLaaQ.js";import{_ as h,a as k,b as w,c as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-CN_WH0sc.js";import{_ as c}from"./realtimeService-BeQHTKvW.js";import"./index-LdwNCnov.js";import"./useForwardExpose-BpaE-uhd.js";import"./Presence-DoHxqNBO.js";import"./x-C6i4A0Ar.js";import"./VisuallyHidden-B_xehEz2.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CAvW--Qp.js";import"./check-CyZvbw87.js";import"./lock-DK6_tUkq.js";import"./globe-CUH7IM2o.js";import"./loader-circle-CI6_F5Fc.js";const G={class:"space-y-6 p-6"},Q={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Y={class:"flex items-center gap-2"},Z={key:0,class:"flex items-center gap-2"},ee={key:1,class:"flex items-center gap-2"},te={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},se={class:"font-semibold"},oe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ae={class:"text-lg font-semibold"},ne=["value"],le=["value"],re={class:"text-lg font-mono"},ie={key:0},de={class:"text-gray-700"},me={class:"flex items-center gap-2"},ue={class:"text-lg"},ce={key:0},pe={key:1},ge={key:2},ye={class:"text-lg"},fe={key:0},be={key:1},ve={key:2},_e={class:"overflow-hidden"},xe={class:"space-y-3"},he={class:"font-medium"},ke={class:"text-sm text-gray-500"},we={class:"text-sm text-gray-500"},Ce={class:"flex items-center justify-between gap-4"},Ne={class:"overflow-hidden"},Ee={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3"},Ie=["onClick"],Se={class:"space-y-2"},Te={class:"font-medium flex items-center gap-2"},Me={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},Fe={class:"text-sm text-gray-500"},Pe={key:0,class:"text-sm text-blue-600"},De=["value","onChange"],Be=["value"],Qe=L({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup(R){const y=R,f=g(!1),p=g(""),N=g(),M=s=>new Date(s).toLocaleDateString(),X=s=>{const t={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return t[s]||t.FREE},V=async()=>{f.value=!0,p.value=y.company.name,await z(),N.value?.focus(),N.value?.select()},E=()=>{p.value.trim()&&p.value!==y.company.name&&T.put(`/companies/${y.company.id}`,{name:p.value.trim()},{preserveState:!0,preserveScroll:!0}),f.value=!1},F=()=>{f.value=!1,p.value=""},P=g("all"),I=g(""),j=s=>{const o=s.target.value;P.value=o;const m=o==="all"?null:Number(o),b=o==="all"?"":y.clients.find(v=>v.id===m)?.name??"";I.value=b,typeof window<"u"&&window.dispatchEvent(new CustomEvent("clientFilterChanged",{detail:{clientId:m,clientName:b}}))},A=async(s,t)=>{const m=t.target.value,b=m===""?null:Number(m);try{const D=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...D?{"X-CSRF-TOKEN":D}:{}},body:JSON.stringify({client_id:b})})}catch(v){console.error("Failed to update project client",v)}};return(s,t)=>(l(),W(H,{company:s.company},{default:i(()=>[e("div",G,[e("div",Q,[e("div",Y,[f.value?(l(),r("div",ee,[q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),onKeydown:[B(E,["enter"]),B(F,["escape"])],onBlur:E,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:N},null,544),[[O,p.value]]),e("button",{onClick:E,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[a(c,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:F,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[a(c,{name:"X",class:"w-5 h-5"})])])):(l(),r("div",Z,[a(J,{title:s.company.name},{default:i(()=>[u(n(s.company.name),1)]),_:1},8,["title"]),e("button",{onClick:V,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[a(c,{name:"Edit3",class:"w-5 h-5"})])]))]),I.value?(l(),r("div",te,[t[3]||(t[3]=u(" Viewing projects for ",-1)),e("span",se,n(I.value),1)])):S("",!0)]),e("div",oe,[a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(w),{class:"flex items-center gap-2"},{default:i(()=>[a(c,{name:"Building",class:"w-5 h-5"}),t[4]||(t[4]=u(" Company Information ",-1))]),_:1,__:[4]})]),_:1}),a(d(C),{class:"space-y-4"},{default:i(()=>[e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",ae,n(s.company.name),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Project Filter",-1)),e("select",{class:"mt-1 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",value:P.value,onChange:j},[t[6]||(t[6]=e("option",{value:"all"},"All Projects",-1)),(l(!0),r(_,null,x(s.clients,o=>(l(),r("option",{key:o.id,value:o.id},n(o.name),9,le))),128))],40,ne)]),e("div",null,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Code",-1)),e("p",re,n(s.company.code),1)]),s.company.description?(l(),r("div",ie,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",de,n(s.company.description),1)])):S("",!0),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,n(M(s.company.created_at)),1)])]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(w),{class:"flex items-center gap-2"},{default:i(()=>[a(c,{name:"CreditCard",class:"w-5 h-5"}),t[11]||(t[11]=u(" Subscription Details ",-1))]),_:1,__:[11]})]),_:1}),a(d(C),{class:"space-y-4"},{default:i(()=>[e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",me,[e("span",{class:$([X(s.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},n(s.company.subscription_type),3)])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",ue,[u(n(s.company.current_member_count)+" / ",1),s.company.subscription_type==="MAXI"?(l(),r("span",ce,"Unlimited")):s.company.subscription_type==="MIDI"?(l(),r("span",pe,"10")):(l(),r("span",ge,n(s.company.member_limit),1))])]),e("div",null,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",ye,[u(n(s.company.current_project_count)+" / ",1),s.company.subscription_type==="MAXI"?(l(),r("span",fe,"Unlimited")):s.company.subscription_type==="MIDI"?(l(),r("span",be,"20")):(l(),r("span",ve,n(s.company.project_limit),1))])])]),_:1})]),_:1})]),a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[a(d(w),{class:"flex items-center gap-2"},{default:i(()=>[a(c,{name:"Users",class:"w-5 h-5"}),u(" Team Members ("+n(s.members.length)+") ",1)]),_:1})]),_:1}),a(d(C),null,{default:i(()=>[e("div",_e,[e("div",xe,[(l(!0),r(_,null,x(s.members,o=>(l(),r("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",he,n(o.name),1),e("p",ke,n(o.email),1)]),e("div",we," Joined "+n(M(o.created_at)),1)]))),128))])])]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[a(d(k),null,{default:i(()=>[e("div",Ce,[a(d(w),{class:"flex items-center gap-2"},{default:i(()=>[a(c,{name:"FolderOpen",class:"w-5 h-5"}),u(" Projects ("+n(s.projects.length)+") ",1)]),_:1}),e("button",{type:"button",onClick:t[1]||(t[1]=()=>{typeof s.window<"u"&&(s.window.dispatchEvent(new s.CustomEvent("openCreateProjectModal")),d(T).visit("/dashboard"))}),class:"inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium border transition-colors bg-black text-white hover:bg-gray-900 hover:border-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 dark:hover:border-gray-300"},[a(c,{name:"Plus",class:"w-4 h-4"}),t[15]||(t[15]=e("span",null,"New Project",-1))])])]),_:1}),a(d(C),null,{default:i(()=>[e("div",Ne,[e("div",Ee,[(l(!0),r(_,null,x(s.projects,o=>(l(),r("div",{key:o.id,class:$(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",o.color?"":"border-l-blue-500"]),style:U(o.color?{borderLeftColor:o.color,borderTopColor:o.color,borderRightColor:o.color,borderBottomColor:o.color,borderLeftWidth:"6px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"}:{}),onClick:()=>{s.localStorage.setItem("currentProjectId",o.id.toString()),d(T).visit("/dashboard")}},[e("div",Se,[e("p",Te,[u(n(o.name)+" ",1),e("span",Me,n(o.total_todos??0)+" "+n((o.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",Fe,n(o.key),1),o.client?(l(),r("p",Pe,n(o.client.name),1)):S("",!0),e("div",{class:"mt-2",onClick:t[2]||(t[2]=K(()=>{},["stop"]))},[t[17]||(t[17]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:o.client?o.client.id:"",onChange:m=>A(o.id,m)},[t[16]||(t[16]=e("option",{value:""},"No Client",-1)),(l(!0),r(_,null,x(s.clients,m=>(l(),r("option",{key:m.id,value:m.id},n(m.name),9,Be))),128))],40,De)])])],14,Ie))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{Qe as default};
