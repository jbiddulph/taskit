import{d as V,G as A,c as p,M as D,r as f,b as i,o as l,f as t,C as s,L as E,l as o,e,g as u,u as w,t as r,h as m,F as q,N as F}from"./app-DlOFuFrZ.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B24rjpow.js";import{_,a as b,b as U,c as M,d as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-CIJxXB82.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-tsEuOaua.js";import{_ as X}from"./Label.vue_vue_type_script_setup_true_lang-D-fw0wq0.js";import{C as N,I as S,f as K,g as Y,h as H,b as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-_vyvENDy.js";import{_ as Q}from"./Layout.vue_vue_type_script_setup_true_lang-C-zCdNeS.js";import{a as W}from"./supabaseClient-DdlsaMTz.js";import"./useForwardExpose-Dlo7q0MV.js";import"./check-DfPulOXs.js";import"./index-y7MiuvJb.js";import"./index-Chnu9G4N.js";const Z={class:"space-y-6"},ee={key:0,class:"mb-6"},ae={class:"flex items-center gap-2 text-amber-700 dark:text-amber-300"},se={key:1,class:"mb-6"},te={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},oe={class:"text-sm font-medium"},le={key:2,class:"mb-6"},re={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},ne={class:"text-sm font-medium"},de={class:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},ie={class:"flex items-center gap-3"},ue={class:"flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded border"},me=["src","alt"],ce={key:1,class:"flex items-center gap-1 text-xs font-bold text-blue-600 dark:text-blue-400"},ge={class:"font-medium text-gray-900 dark:text-gray-100"},pe={class:"text-sm text-gray-600 dark:text-gray-400"},fe={class:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},_e={class:"text-sm text-blue-700 dark:text-blue-300"},be={class:"space-y-1 text-xs"},ve={key:0,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},xe={class:"flex-1"},ye={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},ke={class:"text-xs text-gray-600 dark:text-gray-400"},Se=V({__name:"CompanyLogo",props:{user:{},company:{}},setup(j){const c=j,L=A(),k=p(()=>c.company&&["MIDI","MAXI"].includes(c.company.subscription_type)),R=D({}),h=f(),v=f(!1),x=f(!1),d=f(null),g=f(""),z=n=>{const a=n.target;a.files&&a.files[0]&&(d.value=a.files[0],g.value="")},G=async()=>{if(!(!d.value||!c.company)){v.value=!0,g.value="";try{const n=await W(d.value,c.company.name,c.company.code);F.post("/settings/company-logo/update-url",{logo_url:n},{onSuccess:()=>{d.value=null,h.value&&(h.value.value=""),F.reload()},onError:a=>{g.value=a.logo||"Failed to update logo URL"}})}catch(n){console.error("Logo upload failed:",n),g.value="Failed to upload logo to storage. Please try again."}finally{v.value=!1}}},P=()=>{x.value=!0,R.delete("/settings/company-logo/remove",{onFinish:()=>{x.value=!1}})},C=p(()=>L.props.errors||{}),I=p(()=>L.props.flash?.success||""),T=p(()=>c.company?.logo_url),y=p(()=>!!T.value);return(n,a)=>(l(),i(q,null,[t(s(E),{title:"Company Logo"}),t(O,null,{default:o(()=>[t(Q,null,{default:o(()=>[e("div",Z,[a[11]||(a[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Company Logo"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Customize your company's branding with a custom logo. ")],-1)),k.value?u("",!0):(l(),i("div",ee,[t(s(_),{class:"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20"},{default:o(()=>[t(s(b),{class:"p-4"},{default:o(()=>[e("div",ae,[t(s(N),{class:"w-5 h-5 flex-shrink-0"}),a[0]||(a[0]=e("div",null,[e("p",{class:"font-medium"},"Upgrade Required"),e("p",{class:"text-sm"},"Company logo customization is available for MIDI and MAXI plans only.")],-1))])]),_:1})]),_:1})])),I.value?(l(),i("div",se,[t(s(_),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:o(()=>[t(s(b),{class:"p-4"},{default:o(()=>[e("div",te,[t(s(S),{class:"w-5 h-5 flex-shrink-0"}),e("p",oe,r(I.value),1)])]),_:1})]),_:1})])):u("",!0),C.value.logo||g.value?(l(),i("div",le,[t(s(_),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:o(()=>[t(s(b),{class:"p-4"},{default:o(()=>[e("div",re,[t(s(N),{class:"w-5 h-5 flex-shrink-0"}),e("p",ne,r(C.value.logo||g.value),1)])]),_:1})]),_:1})])):u("",!0),k.value?(l(),w(s(_),{key:3},{default:o(()=>[t(s(U),null,{default:o(()=>[t(s(M),null,{default:o(()=>a[1]||(a[1]=[m("Current Logo",-1)])),_:1,__:[1]}),t(s(B),null,{default:o(()=>a[2]||(a[2]=[m(" This is how your logo currently appears in the application. ",-1)])),_:1,__:[2]})]),_:1}),t(s(b),null,{default:o(()=>[e("div",de,[e("div",ie,[e("div",ue,[y.value?(l(),i("img",{key:0,src:T.value,alt:n.company?.name+" logo",class:"object-contain"},null,8,me)):(l(),i("div",ce,a[3]||(a[3]=[e("div",{class:"w-6 h-6 bg-blue-600 dark:bg-blue-400 rounded text-white dark:text-gray-900 flex items-center justify-center"}," T ",-1),e("span",null,"TaskIT",-1)])))]),e("div",null,[e("p",ge,r(y.value?"Custom Logo":"Default TaskIT Logo"),1),e("p",pe,r(y.value?"Your company's custom logo":"Standard TaskIT branding"),1)])]),y.value?(l(),w(s($),{key:0,onClick:P,disabled:x.value,variant:"outline",class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300"},{default:o(()=>[t(s(K),{class:"w-4 h-4 mr-2"}),m(" "+r(x.value?"Removing...":"Remove Logo"),1)]),_:1},8,["disabled"])):u("",!0)])]),_:1})]),_:1})):u("",!0),k.value?(l(),w(s(_),{key:4},{default:o(()=>[t(s(U),null,{default:o(()=>[t(s(M),{class:"flex items-center gap-2"},{default:o(()=>[t(s(Y),{class:"w-5 h-5"}),a[4]||(a[4]=m(" Upload New Logo ",-1))]),_:1,__:[4]}),t(s(B),null,{default:o(()=>a[5]||(a[5]=[m(" Upload a custom logo for your company. The logo will replace the TaskIT branding. ",-1)])),_:1,__:[5]})]),_:1}),t(s(b),{class:"space-y-4"},{default:o(()=>[e("div",fe,[t(s(S),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e("div",_e,[a[9]||(a[9]=e("p",{class:"font-medium mb-1"},"Logo Requirements:",-1)),e("ul",be,[a[6]||(a[6]=e("li",null,"• Recommended size: 216px width × 48px height",-1)),a[7]||(a[7]=e("li",null,"• Supported formats: PNG, JPG, JPEG, SVG",-1)),a[8]||(a[8]=e("li",null,"• Maximum file size: 2MB",-1)),e("li",null,"• Filename will be: "+r(n.company?.name?.replace(/\s+/g,"_"))+"_"+r(n.company?.code)+"_timestamp",1)])])]),e("div",null,[t(s(X),{for:"logo-upload",class:"text-sm font-medium"},{default:o(()=>a[10]||(a[10]=[m(" Select Logo File ",-1)])),_:1,__:[10]}),t(s(J),{id:"logo-upload",ref_key:"fileInput",ref:h,type:"file",accept:"image/png,image/jpg,image/jpeg,image/svg+xml",onChange:z,class:"mt-1"},null,512)]),d.value?(l(),i("div",ve,[t(s(H),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e("div",xe,[e("p",ye,r(d.value.name),1),e("p",ke,r((d.value.size/1024).toFixed(1))+" KB ",1)]),t(s($),{onClick:G,disabled:v.value,class:"ml-auto"},{default:o(()=>[m(r(v.value?"Uploading...":"Upload Logo"),1)]),_:1},8,["disabled"])])):u("",!0)]),_:1})]),_:1})):u("",!0)])]),_:1})]),_:1})],64))}});export{Se as default};
