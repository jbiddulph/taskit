import{d as V,D as z,c as p,K as E,r as f,a as i,o as l,f as t,A as s,J as G,q as o,b as e,e as u,p as w,t as r,g as m,F as q,L as F}from"./app-DprPFamz.js";import{_ as U}from"./index-DnlsCmv6.js";import{_,a as x,b as $,c as M,d as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-BsmnWCHr.js";import{_ as J,a as K}from"./Label.vue_vue_type_script_setup_true_lang-KHlRNLjp.js";import{_ as X}from"./Layout.vue_vue_type_script_setup_true_lang-BF99dVvC.js";import{a as Y}from"./supabaseClient-CPeGOWBF.js";import{C as S,I as j,T as H,U as O,a as Q}from"./index-ldfbvITm.js";import"./useForwardExpose-BqGa62T2.js";import"./index-CU7IZpZl.js";import"./index-BhIlfQmT.js";const W={class:"space-y-6"},Z={key:0,class:"mb-6"},ee={class:"flex items-center gap-2 text-amber-700 dark:text-amber-300"},ae={key:1,class:"mb-6"},se={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},te={class:"text-sm font-medium"},oe={key:2,class:"mb-6"},le={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},re={class:"text-sm font-medium"},ne={class:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},de={class:"flex items-center gap-3"},ie={class:"flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded border"},ue=["src","alt"],me={key:1,class:"flex items-center gap-1 text-xs font-bold text-blue-600 dark:text-blue-400"},ce={class:"font-medium text-gray-900 dark:text-gray-100"},ge={class:"text-sm text-gray-600 dark:text-gray-400"},pe={class:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},fe={class:"text-sm text-blue-700 dark:text-blue-300"},_e={class:"space-y-1 text-xs"},xe={key:0,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},ye={class:"flex-1"},ve={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},be={class:"text-xs text-gray-600 dark:text-gray-400"},Me=V({__name:"CompanyLogo",props:{user:{},company:{}},setup(N){const c=N,L=z(),k=p(()=>c.company&&["MIDI","MAXI"].includes(c.company.subscription_type)),A=E({}),h=f(),y=f(!1),v=f(!1),d=f(null),g=f(""),D=n=>{const a=n.target;a.files&&a.files[0]&&(d.value=a.files[0],g.value="")},P=async()=>{if(!(!d.value||!c.company)){y.value=!0,g.value="";try{const n=await Y(d.value,c.company.name,c.company.code);F.post("/settings/company-logo/update-url",{logo_url:n},{onSuccess:()=>{d.value=null,h.value&&(h.value.value=""),F.reload()},onError:a=>{g.value=a.logo||"Failed to update logo URL"}})}catch(n){console.error("Logo upload failed:",n),g.value="Failed to upload logo to storage. Please try again."}finally{y.value=!1}}},R=()=>{v.value=!0,A.delete("/settings/company-logo/remove",{onFinish:()=>{v.value=!1}})},C=p(()=>L.props.errors||{}),T=p(()=>L.props.flash?.success||""),I=p(()=>c.company?.logo_url),b=p(()=>!!I.value);return(n,a)=>(l(),i(q,null,[t(s(G),{title:"Company Logo"}),t(X,null,{default:o(()=>[e("div",W,[a[11]||(a[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Company Logo"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Customize your company's branding with a custom logo. ")],-1)),k.value?u("",!0):(l(),i("div",Z,[t(s(_),{class:"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20"},{default:o(()=>[t(s(x),{class:"p-4"},{default:o(()=>[e("div",ee,[t(s(S),{class:"w-5 h-5 flex-shrink-0"}),a[0]||(a[0]=e("div",null,[e("p",{class:"font-medium"},"Upgrade Required"),e("p",{class:"text-sm"},"Company logo customization is available for MIDI and MAXI plans only.")],-1))])]),_:1})]),_:1})])),T.value?(l(),i("div",ae,[t(s(_),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:o(()=>[t(s(x),{class:"p-4"},{default:o(()=>[e("div",se,[t(s(j),{class:"w-5 h-5 flex-shrink-0"}),e("p",te,r(T.value),1)])]),_:1})]),_:1})])):u("",!0),C.value.logo||g.value?(l(),i("div",oe,[t(s(_),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:o(()=>[t(s(x),{class:"p-4"},{default:o(()=>[e("div",le,[t(s(S),{class:"w-5 h-5 flex-shrink-0"}),e("p",re,r(C.value.logo||g.value),1)])]),_:1})]),_:1})])):u("",!0),k.value?(l(),w(s(_),{key:3},{default:o(()=>[t(s($),null,{default:o(()=>[t(s(M),null,{default:o(()=>a[1]||(a[1]=[m("Current Logo",-1)])),_:1,__:[1]}),t(s(B),null,{default:o(()=>a[2]||(a[2]=[m(" This is how your logo currently appears in the application. ",-1)])),_:1,__:[2]})]),_:1}),t(s(x),null,{default:o(()=>[e("div",ne,[e("div",de,[e("div",ie,[b.value?(l(),i("img",{key:0,src:I.value,alt:n.company?.name+" logo",class:"max-w-full max-h-full object-contain",style:{"max-height":"46px"}},null,8,ue)):(l(),i("div",me,a[3]||(a[3]=[e("div",{class:"w-6 h-6 bg-blue-600 dark:bg-blue-400 rounded text-white dark:text-gray-900 flex items-center justify-center"}," T ",-1),e("span",null,"TaskIT",-1)])))]),e("div",null,[e("p",ce,r(b.value?"Custom Logo":"Default TaskIT Logo"),1),e("p",ge,r(b.value?"Your company's custom logo":"Standard TaskIT branding"),1)])]),b.value?(l(),w(s(U),{key:0,onClick:R,disabled:v.value,variant:"outline",class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300"},{default:o(()=>[t(s(H),{class:"w-4 h-4 mr-2"}),m(" "+r(v.value?"Removing...":"Remove Logo"),1)]),_:1},8,["disabled"])):u("",!0)])]),_:1})]),_:1})):u("",!0),k.value?(l(),w(s(_),{key:4},{default:o(()=>[t(s($),null,{default:o(()=>[t(s(M),{class:"flex items-center gap-2"},{default:o(()=>[t(s(O),{class:"w-5 h-5"}),a[4]||(a[4]=m(" Upload New Logo ",-1))]),_:1,__:[4]}),t(s(B),null,{default:o(()=>a[5]||(a[5]=[m(" Upload a custom logo for your company. The logo will replace the TaskIT branding. ",-1)])),_:1,__:[5]})]),_:1}),t(s(x),{class:"space-y-4"},{default:o(()=>[e("div",pe,[t(s(j),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e("div",fe,[a[9]||(a[9]=e("p",{class:"font-medium mb-1"},"Logo Requirements:",-1)),e("ul",_e,[a[6]||(a[6]=e("li",null,"• Maximum height: 46px (32px height is ideal)",-1)),a[7]||(a[7]=e("li",null,"• Supported formats: PNG, JPG, JPEG, SVG",-1)),a[8]||(a[8]=e("li",null,"• Maximum file size: 2MB",-1)),e("li",null,"• Filename will be: "+r(n.company?.name?.replace(/\s+/g,"_"))+"_"+r(n.company?.code),1)])])]),e("div",null,[t(s(J),{for:"logo-upload",class:"text-sm font-medium"},{default:o(()=>a[10]||(a[10]=[m(" Select Logo File ",-1)])),_:1,__:[10]}),t(s(K),{id:"logo-upload",ref_key:"fileInput",ref:h,type:"file",accept:"image/png,image/jpg,image/jpeg,image/svg+xml",onChange:D,class:"mt-1"},null,512)]),d.value?(l(),i("div",xe,[t(s(Q),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e("div",ye,[e("p",ve,r(d.value.name),1),e("p",be,r((d.value.size/1024).toFixed(1))+" KB ",1)]),t(s(U),{onClick:P,disabled:y.value,class:"ml-auto"},{default:o(()=>[m(r(y.value?"Uploading...":"Upload Logo"),1)]),_:1},8,["disabled"])])):u("",!0)]),_:1})]),_:1})):u("",!0)])]),_:1})],64))}});export{Me as default};
