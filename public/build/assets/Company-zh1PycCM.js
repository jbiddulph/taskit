import{d as O,A as Q,B as p,u as A,k as g,c as u,o as l,a as t,b as s,h as W,w as o,e as a,i as m,m as S,t as r,j as n,F as ee,p as F}from"./app-9YR5cbgV.js";import{_ as T}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-UtwslHsn.js";import{_ as y,c as _,a as I,b as U}from"./CardTitle.vue_vue_type_script_setup_true_lang-Ss6lXxz2.js";import{_ as $}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bld8oX5R.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-Bdge1STz.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-CjC6acZu.js";import{_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-CELhQawr.js";import{_ as se}from"./Layout.vue_vue_type_script_setup_true_lang-CN86W_qB.js";import{C as Z,I as D,G as B,g as te,E as oe,h as le,i as re,j as ne,k as de}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Cj5yh5jR.js";import"./useForwardExpose-BOJqDZSv.js";import"./Heading.vue_vue_type_script_setup_true_lang-dUXJaBIW.js";import"./index-BHmv6maG.js";import"./index-DgfQXu9z.js";import"./check-e-pDIyOt.js";const ie={class:"space-y-6"},ue={key:0,class:"mb-6"},me={class:"flex items-center gap-2 text-amber-700 dark:text-amber-300"},ce={key:1,class:"mb-6"},pe={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},ge={class:"text-sm font-medium"},fe={key:2,class:"mb-6"},ye={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},_e={class:"text-sm font-medium"},be={key:0,class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},ve={class:"flex items-center gap-2 text-green-700 dark:text-green-300 mb-2"},xe={class:"flex items-center gap-2"},ke=["href"],he={key:1,class:"p-4 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"},we={class:"flex items-center gap-2 text-gray-600 dark:text-gray-400"},Ce={key:2},Se={class:"space-y-4"},Le={class:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},Fe={class:"flex items-center gap-3"},Te={class:"flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded border"},Ie=["src","alt"],Ue={key:1,class:"flex items-center gap-1 text-xs font-bold text-blue-600 dark:text-blue-400"},$e={class:"font-medium text-gray-900 dark:text-gray-100"},Be={class:"text-sm text-gray-600 dark:text-gray-400"},Ee={class:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Me={class:"text-sm text-blue-700 dark:text-blue-300"},je={class:"space-y-1 text-xs"},Ve={key:0,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},Ne={class:"flex-1"},ze={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ae={class:"text-xs text-gray-600 dark:text-gray-400"},ea=O({__name:"Company",props:{user:{},company:{}},setup(P){const i=P,E=Q(),v=p(()=>i.company&&["MIDI","MAXI"].includes(i.company.subscription_type)),Y=A({}),x=A({company_name:i.company?.name||""}),L=g(),k=g(!1),h=g(!1),b=g(!1),c=g(null),f=g(""),w=g(""),q=d=>{const e=d.target;e.files&&e.files[0]&&(c.value=e.files[0],f.value="")},J=async()=>{if(!(!c.value||!i.company)){k.value=!0,f.value="";try{const d=await de(c.value,i.company.name,i.company.code);F.post("/settings/company-logo/update-url",{logo_url:d},{onSuccess:()=>{c.value=null,L.value&&(L.value.value=""),F.reload()},onError:e=>{f.value=e.logo||"Failed to update logo URL"}})}catch(d){console.error("Logo upload failed:",d),f.value="Failed to upload logo to storage. Please try again."}finally{k.value=!1}}},X=()=>{h.value=!0,Y.delete("/settings/company-logo/remove",{onFinish:()=>{h.value=!1}})},K=()=>{i.company&&(b.value=!0,w.value="",x.post("/settings/company/subdomain",{onSuccess:()=>{b.value=!1,F.reload()},onError:d=>{b.value=!1,w.value=d.subdomain||"Failed to create subdomain"}}))},M=p(()=>E.props.errors||{}),j=p(()=>E.props.flash?.success||""),V=p(()=>i.company?.logo_url),C=p(()=>!!V.value),N=p(()=>!!i.company?.subdomain),z=p(()=>i.company?.subdomain_url);return(d,e)=>(l(),u(ee,null,[t(s(W),{title:"Company Settings"}),t(ae,null,{default:o(()=>[t(se,null,{default:o(()=>[a("div",ie,[e[20]||(e[20]=a("div",null,[a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Company Settings"),a("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Manage your company's branding and subdomain. ")],-1)),v.value?m("",!0):(l(),u("div",ue,[t(s(y),{class:"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20"},{default:o(()=>[t(s(_),{class:"p-4"},{default:o(()=>[a("div",me,[t(s(Z),{class:"w-5 h-5 flex-shrink-0"}),e[1]||(e[1]=a("div",null,[a("p",{class:"font-medium"},"Upgrade Required"),a("p",{class:"text-sm"},"Company features are available for MIDI and MAXI plans only.")],-1))])]),_:1})]),_:1})])),j.value?(l(),u("div",ce,[t(s(y),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:o(()=>[t(s(_),{class:"p-4"},{default:o(()=>[a("div",pe,[t(s(D),{class:"w-5 h-5 flex-shrink-0"}),a("p",ge,r(j.value),1)])]),_:1})]),_:1})])):m("",!0),M.value.logo||f.value||w.value?(l(),u("div",fe,[t(s(y),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:o(()=>[t(s(_),{class:"p-4"},{default:o(()=>[a("div",ye,[t(s(Z),{class:"w-5 h-5 flex-shrink-0"}),a("p",_e,r(M.value.logo||f.value||w.value),1)])]),_:1})]),_:1})])):m("",!0),v.value?(l(),S(s(y),{key:3},{default:o(()=>[t(s(I),null,{default:o(()=>[t(s(U),{class:"flex items-center gap-2"},{default:o(()=>[t(s(B),{class:"w-5 h-5"}),e[2]||(e[2]=n(" Company Subdomain ",-1))]),_:1,__:[2]}),t(s($),null,{default:o(()=>e[3]||(e[3]=[n(" Create a custom subdomain for your company. This will allow guests to access your company's dashboard directly. ",-1)])),_:1,__:[3]})]),_:1}),t(s(_),{class:"space-y-4"},{default:o(()=>[N.value?(l(),u("div",be,[a("div",ve,[t(s(te),{class:"w-5 h-5"}),e[4]||(e[4]=a("span",{class:"font-medium"},"Subdomain Active",-1))]),a("div",xe,[e[5]||(e[5]=a("span",{class:"text-sm text-green-600 dark:text-green-400"}," Your company subdomain: ",-1)),a("a",{href:z.value,target:"_blank",class:"inline-flex items-center gap-1 text-sm font-medium text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300"},[n(r(z.value)+" ",1),t(s(oe),{class:"w-3 h-3"})],8,ke)])])):m("",!0),N.value?(l(),u("div",he,[a("div",we,[t(s(B),{class:"w-5 h-5"}),e[6]||(e[6]=a("span",{class:"font-medium"},"Sub Domain Linked",-1))]),e[7]||(e[7]=a("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," Your company subdomain is already active and linked. ",-1))])):(l(),u("div",Ce,[a("div",Se,[a("div",null,[t(s(R),{for:"company-name",class:"text-sm font-medium"},{default:o(()=>e[8]||(e[8]=[n(" Company Name ",-1)])),_:1,__:[8]}),t(s(G),{id:"company-name",modelValue:s(x).company_name,"onUpdate:modelValue":e[0]||(e[0]=H=>s(x).company_name=H),type:"text",placeholder:"Enter your company name",class:"mt-1"},null,8,["modelValue"]),e[9]||(e[9]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},' This will be converted to a subdomain (e.g., "My Company" → "my-company.zaptask.co.uk") ',-1))]),t(s(T),{onClick:K,disabled:b.value||!s(x).company_name,class:"w-full"},{default:o(()=>[t(s(B),{class:"w-4 h-4 mr-2"}),n(" "+r(b.value?"Creating Subdomain...":"Create Company Subdomain"),1)]),_:1},8,["disabled"])])]))]),_:1})]),_:1})):m("",!0),v.value?(l(),S(s(y),{key:4},{default:o(()=>[t(s(I),null,{default:o(()=>[t(s(U),null,{default:o(()=>e[10]||(e[10]=[n("Current Logo",-1)])),_:1,__:[10]}),t(s($),null,{default:o(()=>e[11]||(e[11]=[n(" This is how your logo currently appears in the application. ",-1)])),_:1,__:[11]})]),_:1}),t(s(_),null,{default:o(()=>[a("div",Le,[a("div",Fe,[a("div",Te,[C.value?(l(),u("img",{key:0,src:V.value,alt:d.company?.name+" logo",class:"object-contain"},null,8,Ie)):(l(),u("div",Ue,e[12]||(e[12]=[a("div",{class:"w-6 h-6 bg-blue-600 dark:bg-blue-400 rounded text-white dark:text-gray-900 flex items-center justify-center"},[a("img",{src:"/zap_icon.png",alt:"ZapTask",class:"w-4 h-4 dark:hidden"}),a("img",{src:"/zap_icon_white.svg",alt:"ZapTask",class:"w-4 h-4 hidden dark:block"})],-1),a("span",null,"ZapTask",-1)])))]),a("div",null,[a("p",$e,r(C.value?"Custom Logo":"Default ZapTask Logo"),1),a("p",Be,r(C.value?"Your company's custom logo":"Standard ZapTask branding"),1)])]),C.value?(l(),S(s(T),{key:0,onClick:X,disabled:h.value,variant:"outline",class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300"},{default:o(()=>[t(s(le),{class:"w-4 h-4 mr-2"}),n(" "+r(h.value?"Removing...":"Remove Logo"),1)]),_:1},8,["disabled"])):m("",!0)])]),_:1})]),_:1})):m("",!0),v.value?(l(),S(s(y),{key:5},{default:o(()=>[t(s(I),null,{default:o(()=>[t(s(U),{class:"flex items-center gap-2"},{default:o(()=>[t(s(re),{class:"w-5 h-5"}),e[13]||(e[13]=n(" Upload New Logo ",-1))]),_:1,__:[13]}),t(s($),null,{default:o(()=>e[14]||(e[14]=[n(" Upload a custom logo for your company. The logo will replace the ZapTask branding. ",-1)])),_:1,__:[14]})]),_:1}),t(s(_),{class:"space-y-4"},{default:o(()=>[a("div",Ee,[t(s(D),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),a("div",Me,[e[18]||(e[18]=a("p",{class:"font-medium mb-1"},"Logo Requirements:",-1)),a("ul",je,[e[15]||(e[15]=a("li",null,"• Recommended size: 216px width × 48px height",-1)),e[16]||(e[16]=a("li",null,"• Supported formats: PNG, JPG, JPEG, SVG",-1)),e[17]||(e[17]=a("li",null,"• Maximum file size: 2MB",-1)),a("li",null,"• Filename will be: "+r(d.company?.name?.replace(/\s+/g,"_"))+"_"+r(d.company?.code)+"_timestamp",1)])])]),a("div",null,[t(s(R),{for:"logo-upload",class:"text-sm font-medium"},{default:o(()=>e[19]||(e[19]=[n(" Select Logo File ",-1)])),_:1,__:[19]}),t(s(G),{id:"logo-upload",ref_key:"fileInput",ref:L,type:"file",accept:"image/png,image/jpg,image/jpeg,image/svg+xml",onChange:q,class:"mt-1"},null,512)]),c.value?(l(),u("div",Ve,[t(s(ne),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),a("div",Ne,[a("p",ze,r(c.value.name),1),a("p",Ae,r((c.value.size/1024).toFixed(1))+" KB ",1)]),t(s(T),{onClick:J,disabled:k.value,class:"ml-auto"},{default:o(()=>[n(r(k.value?"Uploading...":"Upload Logo"),1)]),_:1},8,["disabled"])])):m("",!0)]),_:1})]),_:1})):m("",!0)])]),_:1})]),_:1})],64))}});export{ea as default};
