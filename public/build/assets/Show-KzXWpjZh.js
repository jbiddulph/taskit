import{d as R,r as y,q as X,o as n,w as i,b as e,a as l,c as a,k as g,f as c,t as r,j as V,x as L,v as W,F as f,m as b,u as d,n as B,s as M,p as q,i as K,y as j}from"./app-4p-xYlGY.js";import{_ as z}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-D2_ALKvb.js";import{_ as G}from"./Heading.vue_vue_type_script_setup_true_lang-Bez8fEAi.js";import{_ as v,a as h,b as k,c as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-BCFQcaY9.js";import{_ as u}from"./useClientStore-BLYOqeyZ.js";import"./index-DAVEx0dG.js";import"./useForwardExpose-BewZqF6R.js";import"./Presence-C8BVBlAp.js";import"./x-CszIbLvS.js";import"./createLucideIcon-DD6IC_tH.js";import"./VisuallyHidden-_LDwNTyt.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-pJUDTKaL.js";import"./check-BtfYuWdh.js";import"./lock-ORSAk1gs.js";import"./globe-Yiv13OsL.js";import"./loader-circle-BIhUNFuJ.js";const H={class:"space-y-6 p-6"},J={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Y={class:"flex flex-col gap-1"},Q={class:"flex items-center gap-2"},Z={key:0,class:"flex items-center gap-2"},ee={key:1,class:"flex items-center gap-2"},te={class:"flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-300"},se={class:"font-mono font-semibold text-gray-900 dark:text-gray-100"},oe={key:0,class:"flex items-center gap-2"},ne=["value"],ae=["value"],le={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},re={class:"font-semibold"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},de={class:"text-lg font-semibold"},ce={key:0},pe={class:"text-gray-700"},me={class:"flex items-center gap-2"},ue={class:"text-lg"},ye={key:0},ge={key:1},_e={key:2},fe={key:3},be={key:4},ve={key:5},he={key:6},ke={class:"text-lg"},xe={key:0},Ce={key:1},we={key:2},Se={key:3},Te={key:4},Ee={key:5},Ne={key:6},Ie={key:7},De={class:"overflow-hidden"},Le={class:"space-y-3"},Be={class:"font-medium"},Me={class:"text-sm text-gray-500"},Fe={class:"text-sm text-gray-500"},Ae={class:"overflow-hidden"},$e={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3"},Oe=["onClick"],Pe={class:"space-y-2"},Ue={class:"font-medium flex items-center gap-2"},Re={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},Xe={class:"text-sm text-gray-500"},Ve={key:0,class:"text-sm text-blue-600"},We=["value","onChange"],qe=["value"],it=R({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup(F){const C=F,_=y(!1),m=y(""),w=y(),T=t=>new Date(t).toLocaleDateString(),A=t=>{const s={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return s[t]||s.FREE},$=async()=>{_.value=!0,m.value=C.company.name,await j(),w.value?.focus(),w.value?.select()},S=()=>{m.value.trim()&&m.value!==C.company.name&&M.put(`/companies/${C.company.id}`,{name:m.value.trim()},{preserveState:!0,preserveScroll:!0}),_.value=!1},E=()=>{_.value=!1,m.value=""},O=y("all"),N=y(""),P=async(t,s)=>{const p=s.target.value,U=p===""?null:Number(p);try{const D=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...D?{"X-CSRF-TOKEN":D}:{}},body:JSON.stringify({client_id:U})})}catch(I){console.error("Failed to update project client",I)}};return(t,s)=>(n(),X(z,{company:t.company},{default:i(()=>[e("div",H,[e("div",J,[e("div",Y,[e("div",Q,[_.value?(n(),a("div",ee,[V(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>m.value=o),onKeydown:[L(S,["enter"]),L(E,["escape"])],onBlur:S,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:w},null,544),[[W,m.value]]),e("button",{onClick:S,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[l(u,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:E,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[l(u,{name:"X",class:"w-5 h-5"})])])):(n(),a("div",Z,[l(G,{title:t.company.name},{default:i(()=>[c(r(t.company.name),1)]),_:1},8,["title"]),e("button",{onClick:$,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[l(u,{name:"Edit3",class:"w-5 h-5"})])]))]),e("div",te,[e("span",null,[s[3]||(s[3]=c(" Company Code: ",-1)),e("span",se,r(t.company.code),1)]),t.clients.length>0?(n(),a("div",oe,[s[5]||(s[5]=e("span",null,"Project Filter:",-1)),e("select",{class:"rounded-md border border-gray-300 bg-white px-2 py-1 text-xs text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",value:O.value,onChange:s[1]||(s[1]=(...o)=>t.handleClientFilterChange&&t.handleClientFilterChange(...o))},[s[4]||(s[4]=e("option",{value:"all"},"All Projects",-1)),(n(!0),a(f,null,b(t.clients,o=>(n(),a("option",{key:o.id,value:o.id},r(o.name),9,ae))),128))],40,ne)])):g("",!0)])]),N.value?(n(),a("div",le,[s[6]||(s[6]=c(" Viewing projects for ",-1)),e("span",re,r(N.value),1)])):g("",!0)]),e("div",ie,[l(d(v),null,{default:i(()=>[l(d(h),null,{default:i(()=>[l(d(k),{class:"flex items-center gap-2"},{default:i(()=>[l(u,{name:"Building",class:"w-5 h-5"}),s[7]||(s[7]=c(" Company Information ",-1))]),_:1,__:[7]})]),_:1}),l(d(x),{class:"space-y-4"},{default:i(()=>[e("div",null,[s[8]||(s[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",de,r(t.company.name),1)]),t.company.description?(n(),a("div",ce,[s[9]||(s[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",pe,r(t.company.description),1)])):g("",!0),e("div",null,[s[10]||(s[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,r(T(t.company.created_at)),1)])]),_:1})]),_:1}),l(d(v),null,{default:i(()=>[l(d(h),null,{default:i(()=>[l(d(k),{class:"flex items-center gap-2"},{default:i(()=>[l(u,{name:"CreditCard",class:"w-5 h-5"}),s[11]||(s[11]=c(" Subscription Details ",-1))]),_:1,__:[11]})]),_:1}),l(d(x),{class:"space-y-4"},{default:i(()=>[e("div",null,[s[12]||(s[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",me,[e("span",{class:B([A(t.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},r(t.company.subscription_type),3)])]),e("div",null,[s[13]||(s[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",ue,[c(r(t.company.current_member_count)+" / ",1),t.company.subscription_type==="BUSINESS"?(n(),a("span",ye,"Unlimited")):t.company.subscription_type==="MAXI"?(n(),a("span",ge,"20")):t.company.subscription_type==="MIDI"||t.company.subscription_type==="LTD_TEAM"?(n(),a("span",_e,"5")):t.company.subscription_type==="LTD_AGENCY"?(n(),a("span",fe,"20")):t.company.subscription_type==="LTD_BUSINESS"?(n(),a("span",be,"50")):t.company.subscription_type==="LTD_SOLO"?(n(),a("span",ve,"1")):(n(),a("span",he,r(t.company.member_limit||1),1))])]),e("div",null,[s[14]||(s[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",ke,[c(r(t.company.current_project_count)+" / ",1),t.company.subscription_type==="BUSINESS"?(n(),a("span",xe,"Unlimited")):t.company.subscription_type==="MAXI"?(n(),a("span",Ce,"100")):t.company.subscription_type==="MIDI"?(n(),a("span",we,"20")):t.company.subscription_type==="LTD_TEAM"?(n(),a("span",Se,"20 per client")):t.company.subscription_type==="LTD_AGENCY"?(n(),a("span",Te,"40 per client")):t.company.subscription_type==="LTD_BUSINESS"?(n(),a("span",Ee,"100 per client")):t.company.subscription_type==="LTD_SOLO"?(n(),a("span",Ne,"10")):(n(),a("span",Ie,r(t.company.project_limit||3),1))])])]),_:1})]),_:1})]),l(d(v),null,{default:i(()=>[l(d(h),null,{default:i(()=>[l(d(k),{class:"flex items-center gap-2"},{default:i(()=>[l(u,{name:"Users",class:"w-5 h-5"}),c(" Team Members ("+r(t.members.length)+") ",1)]),_:1})]),_:1}),l(d(x),null,{default:i(()=>[e("div",De,[e("div",Le,[(n(!0),a(f,null,b(t.members,o=>(n(),a("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",Be,r(o.name),1),e("p",Me,r(o.email),1)]),e("div",Fe," Joined "+r(T(o.created_at)),1)]))),128))])])]),_:1})]),_:1}),l(d(v),null,{default:i(()=>[l(d(h),null,{default:i(()=>[l(d(k),{class:"flex items-center gap-2"},{default:i(()=>[l(u,{name:"FolderOpen",class:"w-5 h-5"}),c(" Projects ("+r(t.projects.length)+") ",1)]),_:1})]),_:1}),l(d(x),null,{default:i(()=>[e("div",Ae,[e("div",$e,[(n(!0),a(f,null,b(t.projects,o=>(n(),a("div",{key:o.id,class:B(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",o.color?"":"border-l-blue-500"]),style:q(o.color?{borderLeftColor:o.color,borderTopColor:o.color,borderRightColor:o.color,borderBottomColor:o.color,borderLeftWidth:"6px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"}:{}),onClick:()=>{t.localStorage.setItem("currentProjectId",o.id.toString()),d(M).visit("/dashboard")}},[e("div",Pe,[e("p",Ue,[c(r(o.name)+" ",1),e("span",Re,r(o.total_todos??0)+" "+r((o.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",Xe,r(o.key),1),o.client?(n(),a("p",Ve,r(o.client.name),1)):g("",!0),t.clients.length>0?(n(),a("div",{key:1,class:"mt-2",onClick:s[2]||(s[2]=K(()=>{},["stop"]))},[s[16]||(s[16]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:o.client?o.client.id:"",onChange:p=>P(o.id,p)},[s[15]||(s[15]=e("option",{value:""},"No Client",-1)),(n(!0),a(f,null,b(t.clients,p=>(n(),a("option",{key:p.id,value:p.id},r(p.name),9,qe))),128))],40,We)])):g("",!0)])],14,Oe))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{it as default};
