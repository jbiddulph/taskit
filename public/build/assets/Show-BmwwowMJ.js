import{d as R,r as y,q as X,o as n,w as i,b as e,a,c as l,k as S,f as c,t as r,j as V,x as L,v as W,F as f,m as _,u as d,n as B,s as M,p as q,i as K,y as j}from"./app-BfNzmGst.js";import{_ as z}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CnAX6CPw.js";import{_ as G}from"./Heading.vue_vue_type_script_setup_true_lang-DeK3zUiw.js";import{_ as b,a as v,b as x,c as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-DU68EDVt.js";import{_ as u}from"./useClientStore-DlgMUBZV.js";import"./index-CWG2kBDR.js";import"./useForwardExpose-Dc_zWFVu.js";import"./Presence-DAVHgAMH.js";import"./x-DhsKFp32.js";import"./createLucideIcon-BKQ9o7Ae.js";import"./VisuallyHidden-BVDYoFyU.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-cCGm2jHW.js";import"./check-DI5fdt2_.js";import"./lock-BOfxUeMC.js";import"./globe-N6LyFk4a.js";import"./loader-circle-Dgq4KQmN.js";const H={class:"space-y-6 p-6"},J={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Y={class:"flex flex-col gap-1"},Q={class:"flex items-center gap-2"},Z={key:0,class:"flex items-center gap-2"},ee={key:1,class:"flex items-center gap-2"},te={class:"flex flex-wrap items-center gap-3 text-sm text-gray-600 dark:text-gray-300"},se={class:"font-mono font-semibold text-gray-900 dark:text-gray-100"},oe={class:"flex items-center gap-2"},ne=["value"],ae=["value"],le={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},re={class:"font-semibold"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},de={class:"text-lg font-semibold"},ce={key:0},me={class:"text-gray-700"},pe={class:"flex items-center gap-2"},ue={class:"text-lg"},ye={key:0},ge={key:1},fe={key:2},_e={key:3},be={key:5},ve={class:"text-lg"},xe={key:0},he={key:1},ke={key:2},Ce={key:3},we={key:5},Se={class:"overflow-hidden"},Te={class:"space-y-3"},Ee={class:"font-medium"},Ne={class:"text-sm text-gray-500"},Ie={class:"text-sm text-gray-500"},De={class:"overflow-hidden"},Le={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3"},Be=["onClick"],Me={class:"space-y-2"},Fe={class:"font-medium flex items-center gap-2"},Ae={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},$e={class:"text-sm text-gray-500"},Oe={key:0,class:"text-sm text-blue-600"},Pe=["value","onChange"],Ue=["value"],ot=R({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup(F){const k=F,g=y(!1),p=y(""),C=y(),T=t=>new Date(t).toLocaleDateString(),A=t=>{const s={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return s[t]||s.FREE},$=async()=>{g.value=!0,p.value=k.company.name,await j(),C.value?.focus(),C.value?.select()},w=()=>{p.value.trim()&&p.value!==k.company.name&&M.put(`/companies/${k.company.id}`,{name:p.value.trim()},{preserveState:!0,preserveScroll:!0}),g.value=!1},E=()=>{g.value=!1,p.value=""},O=y("all"),N=y(""),P=async(t,s)=>{const m=s.target.value,U=m===""?null:Number(m);try{const D=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...D?{"X-CSRF-TOKEN":D}:{}},body:JSON.stringify({client_id:U})})}catch(I){console.error("Failed to update project client",I)}};return(t,s)=>(n(),X(z,{company:t.company},{default:i(()=>[e("div",H,[e("div",J,[e("div",Y,[e("div",Q,[g.value?(n(),l("div",ee,[V(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>p.value=o),onKeydown:[L(w,["enter"]),L(E,["escape"])],onBlur:w,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:C},null,544),[[W,p.value]]),e("button",{onClick:w,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[a(u,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:E,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[a(u,{name:"X",class:"w-5 h-5"})])])):(n(),l("div",Z,[a(G,{title:t.company.name},{default:i(()=>[c(r(t.company.name),1)]),_:1},8,["title"]),e("button",{onClick:$,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[a(u,{name:"Edit3",class:"w-5 h-5"})])]))]),e("div",te,[e("span",null,[s[3]||(s[3]=c(" Company Code: ",-1)),e("span",se,r(t.company.code),1)]),e("div",oe,[s[5]||(s[5]=e("span",null,"Project Filter:",-1)),e("select",{class:"rounded-md border border-gray-300 bg-white px-2 py-1 text-xs text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",value:O.value,onChange:s[1]||(s[1]=(...o)=>t.handleClientFilterChange&&t.handleClientFilterChange(...o))},[s[4]||(s[4]=e("option",{value:"all"},"All Projects",-1)),(n(!0),l(f,null,_(t.clients,o=>(n(),l("option",{key:o.id,value:o.id},r(o.name),9,ae))),128))],40,ne)])])]),N.value?(n(),l("div",le,[s[6]||(s[6]=c(" Viewing projects for ",-1)),e("span",re,r(N.value),1)])):S("",!0)]),e("div",ie,[a(d(b),null,{default:i(()=>[a(d(v),null,{default:i(()=>[a(d(x),{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"Building",class:"w-5 h-5"}),s[7]||(s[7]=c(" Company Information ",-1))]),_:1,__:[7]})]),_:1}),a(d(h),{class:"space-y-4"},{default:i(()=>[e("div",null,[s[8]||(s[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",de,r(t.company.name),1)]),t.company.description?(n(),l("div",ce,[s[9]||(s[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",me,r(t.company.description),1)])):S("",!0),e("div",null,[s[10]||(s[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,r(T(t.company.created_at)),1)])]),_:1})]),_:1}),a(d(b),null,{default:i(()=>[a(d(v),null,{default:i(()=>[a(d(x),{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"CreditCard",class:"w-5 h-5"}),s[11]||(s[11]=c(" Subscription Details ",-1))]),_:1,__:[11]})]),_:1}),a(d(h),{class:"space-y-4"},{default:i(()=>[e("div",null,[s[12]||(s[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",pe,[e("span",{class:B([A(t.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},r(t.company.subscription_type),3)])]),e("div",null,[s[13]||(s[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",ue,[c(r(t.company.current_member_count)+" / ",1),t.company.subscription_type==="MAXI"||t.company.subscription_type==="BUSINESS"||t.company.subscription_type==="LTD_BUSINESS"?(n(),l("span",ye,"Unlimited")):t.company.subscription_type==="MIDI"||t.company.subscription_type==="LTD_TEAM"?(n(),l("span",ge,"5")):t.company.subscription_type==="LTD_AGENCY"?(n(),l("span",fe,"20")):t.company.subscription_type==="LTD_SOLO"?(n(),l("span",_e,"1")):(n(),l("span",be,r(t.company.member_limit),1))])]),e("div",null,[s[14]||(s[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",ve,[c(r(t.company.current_project_count)+" / ",1),t.company.subscription_type==="MAXI"||t.company.subscription_type==="BUSINESS"||t.company.subscription_type==="LTD_BUSINESS"?(n(),l("span",xe,"Unlimited")):t.company.subscription_type==="MIDI"||t.company.subscription_type==="LTD_TEAM"?(n(),l("span",he,"20")):t.company.subscription_type==="LTD_AGENCY"?(n(),l("span",ke,"100")):t.company.subscription_type==="LTD_SOLO"?(n(),l("span",Ce,"10")):(n(),l("span",we,r(t.company.project_limit),1))])])]),_:1})]),_:1})]),a(d(b),null,{default:i(()=>[a(d(v),null,{default:i(()=>[a(d(x),{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"Users",class:"w-5 h-5"}),c(" Team Members ("+r(t.members.length)+") ",1)]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[e("div",Se,[e("div",Te,[(n(!0),l(f,null,_(t.members,o=>(n(),l("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",Ee,r(o.name),1),e("p",Ne,r(o.email),1)]),e("div",Ie," Joined "+r(T(o.created_at)),1)]))),128))])])]),_:1})]),_:1}),a(d(b),null,{default:i(()=>[a(d(v),null,{default:i(()=>[a(d(x),{class:"flex items-center gap-2"},{default:i(()=>[a(u,{name:"FolderOpen",class:"w-5 h-5"}),c(" Projects ("+r(t.projects.length)+") ",1)]),_:1})]),_:1}),a(d(h),null,{default:i(()=>[e("div",De,[e("div",Le,[(n(!0),l(f,null,_(t.projects,o=>(n(),l("div",{key:o.id,class:B(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",o.color?"":"border-l-blue-500"]),style:q(o.color?{borderLeftColor:o.color,borderTopColor:o.color,borderRightColor:o.color,borderBottomColor:o.color,borderLeftWidth:"6px",borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px"}:{}),onClick:()=>{t.localStorage.setItem("currentProjectId",o.id.toString()),d(M).visit("/dashboard")}},[e("div",Me,[e("p",Fe,[c(r(o.name)+" ",1),e("span",Ae,r(o.total_todos??0)+" "+r((o.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",$e,r(o.key),1),o.client?(n(),l("p",Oe,r(o.client.name),1)):S("",!0),e("div",{class:"mt-2",onClick:s[2]||(s[2]=K(()=>{},["stop"]))},[s[16]||(s[16]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:o.client?o.client.id:"",onChange:m=>P(o.id,m)},[s[15]||(s[15]=e("option",{value:""},"No Client",-1)),(n(!0),l(f,null,_(t.clients,m=>(n(),l("option",{key:m.id,value:m.id},r(m.name),9,Ue))),128))],40,Pe)])])],14,Be))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{ot as default};
