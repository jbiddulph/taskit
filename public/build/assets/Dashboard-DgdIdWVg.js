import{d as $,N as A,k as D,u as H,A as i,M as C,c as u,o as p,a as t,b as s,h as P,w as n,e as r,i as v,t as _,j as m,F as O}from"./app-DjiFUqFR.js";import{q}from"./index-DKzRmfxm.js";import{_ as F}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BscZo32K.js";import{_ as f,c as g,a as N,b as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cz8RnWE0.js";import{_ as K}from"./CardDescription.vue_vue_type_script_setup_true_lang-CyagUGRA.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-DwoR4zFx.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-pHSSppiP.js";import{_ as w}from"./Layout.vue_vue_type_script_setup_true_lang-C_wO8TQI.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4TVUVTl.js";import{I as M,C as S}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B54okmFS.js";import"./check-C9w6Ip5k.js";import"./useForwardExpose-B3TP5OoR.js";import"./Heading.vue_vue_type_script_setup_true_lang-GoxaTtow.js";import"./index-BXsjMYOf.js";const l=o=>({url:l.url(o),method:"patch"});l.definition={methods:["patch"],url:"/settings/dashboard"};l.url=o=>l.definition.url+q(o);l.patch=o=>({url:l.url(o),method:"patch"});const E=o=>({action:l.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...o?.query??o?.mergeQuery??{}}}),method:"post"});E.patch=o=>({action:l.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...o?.query??o?.mergeQuery??{}}}),method:"post"});l.form=E;const X={class:"space-y-6"},G={key:0,class:"mb-6"},L={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},W={class:"text-sm font-medium"},j={key:1,class:"mb-6"},z={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},J={class:"text-sm font-medium"},V={class:"flex items-start space-x-3"},Y={class:"grid gap-1.5 leading-none"},Z={class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},ee={class:"flex items-center pt-4"},fe=$({__name:"Dashboard",props:{user:{},company:{}},setup(o){const h=o,k=A(),c=D(!1),d=H({prune_completed_tasks:!1}),T=i(()=>{const a=h.company?.prune_completed_tasks;return console.log("CHECKBOX DEBUG: Raw prop value:",a,"Type:",typeof a),a===!0||a===1||a==="1"||a==="true"?(console.log("CHECKBOX DEBUG: Setting to TRUE"),!0):(console.log("CHECKBOX DEBUG: Setting to FALSE"),!1)});C(()=>h.company?.prune_completed_tasks,a=>{console.log("PROPS WATCH: New value:",a,"Type:",typeof a);const e=a===!0||a===1||a==="1"||a==="true";console.log("PROPS WATCH: Converted to:",e),d.prune_completed_tasks=e,c.value=e},{immediate:!0}),C(c,a=>{console.log("REF WATCH: Local ref changed to:",a),d.prune_completed_tasks=a});const B=()=>{d.patch(l().url,{preserveScroll:!0,onSuccess:()=>{}})},b=i(()=>k.props.errors||{}),x=i(()=>k.props.flash?.success||"");return(a,e)=>(p(),u(O,null,[t(s(P),{title:"Dashboard Settings"}),t(I,null,{default:n(()=>[t(w,null,{default:n(()=>[r("div",X,[e[6]||(e[6]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Dashboard Settings"),r("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure your dashboard preferences and automation settings. ")],-1)),x.value?(p(),u("div",G,[t(s(f),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:n(()=>[t(s(g),{class:"p-4"},{default:n(()=>[r("div",L,[t(s(M),{class:"w-5 h-5 flex-shrink-0"}),r("p",W,_(x.value),1)])]),_:1})]),_:1})])):v("",!0),b.value.error?(p(),u("div",j,[t(s(f),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:n(()=>[t(s(g),{class:"p-4"},{default:n(()=>[r("div",z,[t(s(S),{class:"w-5 h-5 flex-shrink-0"}),r("p",J,_(b.value.error),1)])]),_:1})]),_:1})])):v("",!0),t(s(f),null,{default:n(()=>[t(s(N),null,{default:n(()=>[t(s(Q),null,{default:n(()=>e[1]||(e[1]=[m("Task Management",-1)])),_:1,__:[1]}),t(s(K),null,{default:n(()=>e[2]||(e[2]=[m(" Configure automatic task management and cleanup settings. ",-1)])),_:1,__:[2]})]),_:1}),t(s(g),{class:"space-y-4"},{default:n(()=>[r("div",V,[t(s(R),{id:"prune_completed_tasks",checked:T.value,"onUpdate:checked":e[0]||(e[0]=y=>{console.log("CHECKBOX CLICKED:",y),c.value.value=y})},null,8,["checked"]),r("div",Y,[t(s(U),{for:"prune_completed_tasks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:n(()=>e[3]||(e[3]=[m(" Prune all Completed tasks in the Done column (daily at midnight) ",-1)])),_:1,__:[3]}),e[4]||(e[4]=r("p",{class:"text-xs text-muted-foreground"}," Automatically delete all completed tasks and their comments daily at midnight. This helps keep your workspace clean and organized. ",-1))])]),r("div",Z,[t(s(S),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),e[5]||(e[5]=r("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[r("p",{class:"font-medium mb-1"},"Important:"),r("p",{class:"text-xs"}," Once tasks are pruned, they cannot be recovered. Make sure you have exported any important data before enabling this feature. ")],-1))]),r("div",ee,[t(s(F),{onClick:B,disabled:s(d).processing},{default:n(()=>[m(_(s(d).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}});export{fe as default};
