import{d as X,r as u,A as Y,C as ee,c,o as r,a as s,b as a,h as te,w as o,e,i as k,p as se,t as d,n as T,j as i,s as ae,F as P,k as oe}from"./app-D7iRsdJO.js";import{_ as b}from"./index-BqmWSdDm.js";import{_ as F,a as E,b as z,c as B}from"./CardTitle.vue_vue_type_script_setup_true_lang-CWjzA0Wq.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-BFzvfLEK.js";import{_ as le}from"./Input.vue_vue_type_script_setup_true_lang-DDYnxgPw.js";import{_ as U,a as I,b as N,c as H}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BdjXy-48.js";import{_ as q}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CAVkqfrW.js";import{_ as ie}from"./SubdomainLayout.vue_vue_type_script_setup_true_lang-DTJAeQBP.js";import{_ as ne,a as re}from"./ActivityFeed.vue_vue_type_script_setup_true_lang-DvRENh4I.js";import{r as w,C as G,A as de,U as ce,b as A,_ as C}from"./realtimeService-Bl8iRf41.js";import{G as ue}from"./globe-p6n2auj6.js";import{S as me}from"./x-BNnFV9ua.js";import{L as K}from"./lock-GDUVgOUK.js";import"./useForwardExpose-CHGTmMHU.js";import"./Presence-DNHfZ4hZ.js";import"./check-CVmZMMHE.js";import"./loader-circle-DTaUZd87.js";const pe={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800"},ye={class:"container mx-auto px-4 py-8"},fe={key:0,class:"min-h-screen bg-gray-50 dark:bg-gray-900 relative"},ge={class:"bg-white dark:bg-gray-800 shadow-sm border-b"},_e={class:"px-4 sm:px-6 lg:px-8"},ve={class:"flex justify-between items-center py-4"},xe={class:"flex items-center gap-3"},he={class:"h-20 w-auto flex items-center justify-center overflow-hidden"},ke=["src","alt"],be={class:"text-xl font-semibold text-gray-900 dark:text-white"},we={class:"flex items-center gap-3"},Ce=["title"],Se=["title"],$e=["title"],je=["href"],Te={class:"px-4 sm:px-6 lg:px-8 py-8"},Ae={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},Me={class:"p-6"},Ve={class:"mt-8"},De={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},Le={class:"p-6"},Pe={key:0,class:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center"},Fe={class:"space-y-4"},Ee={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},ze={class:"flex gap-3"},Be={class:"text-center"},Re={class:"text-xs text-gray-500 dark:text-gray-400"},Ue={key:1},Ie={class:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto"},Ne=["href"],He={class:"space-y-2 text-sm text-gray-600 dark:text-gray-300"},qe={class:"flex items-center gap-2"},Ge={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},Oe={key:0,class:"space-y-6"},Ze={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},Je={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},Qe={class:"flex items-center gap-1"},We={class:"flex items-center gap-1"},Xe={class:"flex items-center gap-1"},Ye={key:0},et=["innerHTML"],tt={class:"grid grid-cols-2 gap-4 text-sm"},st={class:"text-gray-600 dark:text-gray-400 ml-2"},at={class:"text-gray-600 dark:text-gray-400 ml-2"},ot={key:1},lt={class:"space-y-2"},it={class:"text-sm text-gray-700 dark:text-gray-300"},Ct=X({__name:"Company",props:{company:{},isSubdomain:{type:Boolean},todos:{},projects:{},activities:{},selectedProject:{}},setup(O){const m=O,f=u(!1),y=u(""),g=u(""),_=u(!1),S=u(!1),v=u(!1),x=u(!1),h=u(!1),$=u(!1),n=u(null),Z=()=>typeof window<"u"&&localStorage.getItem("company_key")===m.company.code?(S.value=!0,!0):!1,M=async()=>{if(!y.value.trim()){g.value="Please enter a company code";return}_.value=!0,g.value="",await new Promise(l=>setTimeout(l,500)),y.value.trim().toLowerCase()===m.company.code.toLowerCase()?(typeof window<"u"&&localStorage.setItem("company_key",m.company.code),S.value=!0,f.value=!1,y.value=""):g.value="Invalid company code. Please try again.",_.value=!1},J=()=>{typeof window<"u"&&(localStorage.removeItem("company_key"),S.value=!1,f.value=!0)},V=()=>{v.value=!v.value},D=()=>{x.value=!x.value},L=()=>{h.value=!h.value},Q=l=>{n.value=l,$.value=!0},j=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),W=Y(()=>m.company.is_public&&!S.value);return ee(()=>{m.company.is_public&&(Z()||(f.value=!0),console.log("ðŸ”¥ Initializing real-time service for public dashboard with company ID:",m.company.id),w.init(m.company.id,m.company.id),window.testRealtimeEvents=()=>{w.testRealtimeEvents()},window.testDatabaseRealtime=()=>{w.testDatabaseRealtime()},window.testSupabaseConnection=()=>{w.testSupabaseConnection()},window.testDeleteEvents=()=>{w.testDeleteEvents()})}),(l,t)=>(r(),c(P,null,[s(a(te),{title:`${l.company.name} - Company Portal`},null,8,["title"]),s(ie,null,{default:o(()=>[e("div",pe,[e("div",ye,[l.company.is_public?(r(),c("div",fe,[e("div",ge,[e("div",_e,[e("div",ve,[e("div",xe,[e("div",he,[l.company.logo_url?(r(),c("img",{key:0,src:l.company.logo_url,alt:`${l.company.name} logo`,class:"w-auto h-full object-contain"},null,8,ke)):(r(),se(a(ue),{key:1,class:"w-8 h-8 text-blue-600"}))]),e("div",null,[e("h1",be,d(l.company.name),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Public Dashboard ",-1))])]),e("div",we,[e("button",{onClick:V,title:v.value?"Hide Calendar":"Show Calendar",class:T(["inline-flex items-center justify-center p-2 transition-colors",v.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[s(a(G),{class:"w-5 h-5"})],10,Ce),e("button",{onClick:D,title:x.value?"Hide Activity Feed":"Show Activity Feed",class:T(["inline-flex items-center justify-center p-2 transition-colors",x.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[s(a(de),{class:"w-5 h-5"})],10,Se),e("button",{onClick:L,title:h.value?"Exit Select Mode":"Select for Bulk Update",class:T(["inline-flex items-center justify-center p-2 transition-colors",h.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[s(a(me),{class:"w-5 h-5"})],10,$e),s(a(b),{"as-child":"",variant:"outline",size:"sm"},{default:o(()=>[e("a",{href:`https://${l.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,je)]),_:1}),s(a(b),{"as-child":"",variant:"outline",size:"sm"},{default:o(()=>t[4]||(t[4]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[4]})])])])]),e("div",Te,[e("div",Ae,[t[5]||(t[5]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Project Tasks "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," View our current project tasks and progress ")],-1)),e("div",Me,[s(ne,{todos:l.todos||[],projects:l.projects||[],selectedProject:l.selectedProject,isReadOnly:!0,showCalendar:v.value,showActivityFeed:x.value,isSelectMode:h.value,onTodoClick:Q,onToggleCalendar:V,onToggleActivityFeed:D,onToggleSelectMode:L},null,8,["todos","projects","selectedProject","showCalendar","showActivityFeed","isSelectMode"])])]),e("div",Ve,[e("div",De,[t[6]||(t[6]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Recent Activity "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Latest updates from our team ")],-1)),e("div",Le,[s(re,{activities:l.activities||[],isReadOnly:!0},null,8,["activities"])])])])]),W.value?(r(),c("div",Pe,[s(a(U),{open:f.value,"onUpdate:open":t[1]||(t[1]=p=>f.value=p)},{default:o(()=>[s(a(I),{class:"sm:max-w-md"},{default:o(()=>[s(a(N),null,{default:o(()=>[s(a(H),{class:"flex items-center gap-2"},{default:o(()=>[s(a(K),{class:"w-5 h-5 text-blue-600"}),t[7]||(t[7]=i(" Company Access Required ",-1))]),_:1,__:[7]}),s(a(q),null,{default:o(()=>[i(" Please enter the company code to view "+d(l.company.name)+"'s public dashboard. ",1)]),_:1})]),_:1}),e("div",Fe,[e("div",null,[t[8]||(t[8]=e("label",{for:"company-code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Company Code ",-1)),s(a(le),{id:"company-code",modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=p=>y.value=p),type:"text",placeholder:"Enter company code",class:"w-full",disabled:_.value,onKeydown:ae(M,["enter"])},null,8,["modelValue","disabled"]),g.value?(r(),c("p",Ee,d(g.value),1)):k("",!0)]),e("div",ze,[s(a(b),{onClick:M,disabled:_.value||!y.value.trim(),class:"flex-1"},{default:o(()=>[s(a(K),{class:"w-4 h-4 mr-2"}),i(" "+d(_.value?"Verifying...":"Access Dashboard"),1)]),_:1},8,["disabled"])]),e("div",Be,[e("p",Re," Contact "+d(l.company.name)+" for the company code ",1),e("button",{onClick:J,class:"text-xs text-blue-600 hover:underline mt-2"}," Clear stored code (for testing) ")])])]),_:1})]),_:1},8,["open"])])):k("",!0)])):(r(),c("div",Ue,[e("div",Ie,[s(a(F),null,{default:o(()=>[s(a(E),null,{default:o(()=>[s(a(z),{class:"flex items-center gap-2"},{default:o(()=>[s(a(ce),{class:"w-5 h-5"}),t[9]||(t[9]=i(" Employee Access ",-1))]),_:1,__:[9]}),s(a(R),null,{default:o(()=>t[10]||(t[10]=[i(" Login to access your company dashboard ",-1)])),_:1,__:[10]})]),_:1}),s(a(B),null,{default:o(()=>[s(a(b),{"as-child":"",class:"w-full"},{default:o(()=>[e("a",{href:`https://${l.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,Ne)]),_:1}),s(a(b),{"as-child":"",variant:"outline",class:"w-full"},{default:o(()=>t[11]||(t[11]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[11]})]),_:1})]),_:1}),s(a(F),null,{default:o(()=>[s(a(E),null,{default:o(()=>[s(a(z),{class:"flex items-center gap-2"},{default:o(()=>[s(a(G),{class:"w-5 h-5"}),t[12]||(t[12]=i(" Company Features ",-1))]),_:1,__:[12]}),s(a(R),null,{default:o(()=>t[13]||(t[13]=[i(" Access your company's task management system ",-1)])),_:1,__:[13]})]),_:1}),s(a(B),null,{default:o(()=>[e("div",He,[e("div",qe,[s(a(A),{class:"w-4 h-4 text-green-600"}),t[14]||(t[14]=i(" Task Management ",-1))]),e("div",Ge,[s(a(A),{class:"w-4 h-4 text-green-600"}),t[15]||(t[15]=i(" Team Collaboration ",-1))]),e("div",Ke,[s(a(A),{class:"w-4 h-4 text-green-600"}),t[16]||(t[16]=i(" Project Tracking ",-1))])])]),_:1})]),_:1})])])),t[17]||(t[17]=e("div",{class:"text-center mt-8 text-gray-500 dark:text-gray-400"},[e("p",null,[i("Powered by "),e("a",{href:"https://zaptask.co.uk",class:"text-blue-600 hover:underline"},"ZapTask")])],-1))])]),s(a(U),{open:$.value,"onUpdate:open":t[2]||(t[2]=p=>$.value=p)},{default:o(()=>[s(a(I),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:o(()=>[s(a(N),null,{default:o(()=>[s(a(H),{class:"flex items-center gap-2"},{default:o(()=>[s(C,{name:"FileText",class:"w-5 h-5 text-blue-600"}),t[18]||(t[18]=i(" Task Details ",-1))]),_:1,__:[18]}),s(a(q),null,{default:o(()=>t[19]||(t[19]=[i(" View detailed information about this task ",-1)])),_:1,__:[19]})]),_:1}),n.value?(r(),c("div",Oe,[e("div",null,[e("h3",Ze,d(n.value.title),1),e("div",Je,[e("span",Qe,[s(C,{name:"Calendar",class:"w-4 h-4"}),i(" "+d(n.value.due_date?j(n.value.due_date):"No due date"),1)]),e("span",We,[s(C,{name:"Flag",class:"w-4 h-4"}),i(" "+d(n.value.priority),1)]),e("span",Xe,[s(C,{name:"Circle",class:"w-4 h-4"}),i(" "+d(n.value.status),1)])])]),n.value.description?(r(),c("div",Ye,[t[20]||(t[20]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},"Description",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700 dark:text-gray-300",innerHTML:n.value.description},null,8,et)])):k("",!0),e("div",tt,[e("div",null,[t[21]||(t[21]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Created:",-1)),e("span",st,d(j(n.value.created_at)),1)]),e("div",null,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Last Updated:",-1)),e("span",at,d(j(n.value.updated_at)),1)])]),n.value.subtasks&&n.value.subtasks.length>0?(r(),c("div",ot,[t[23]||(t[23]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-3"},"Subtasks",-1)),e("div",lt,[(r(!0),c(P,null,oe(n.value.subtasks,p=>(r(),c("div",{key:p.id,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[s(C,{name:"CheckCircle",class:"w-4 h-4 text-green-500"}),e("span",it,d(p.title),1)]))),128))])])):k("",!0)])):k("",!0)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Ct as default};
