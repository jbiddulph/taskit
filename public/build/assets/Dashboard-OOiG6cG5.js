import{d as C,D as $,r as H,K as q,C as x,c as y,a as i,o as u,f as e,A as t,J as E,q as o,b as a,e as v,t as p,g as c,F}from"./app-hWwIqPu3.js";import{q as O}from"./index-y7MiuvJb.js";import{_ as U}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DQ9T8hp6.js";import{_,a as f,b as G,c as P,d as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-BBSVM3x4.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-g7GmVFmJ.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-BC9qs6jT.js";import{_ as w}from"./Layout.vue_vue_type_script_setup_true_lang-DET9K7ba.js";import{I as N,C as D,b as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-8ukV2OSW.js";import"./check-CdnBPLtc.js";import"./useForwardExpose-BYXASPz3.js";import"./index-Chnu9G4N.js";const l=r=>({url:l.url(r),method:"patch"});l.definition={methods:["patch"],url:"/settings/dashboard"};l.url=r=>l.definition.url+O(r);l.patch=r=>({url:l.url(r),method:"patch"});const A=r=>({action:l.url({[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...r?.query??r?.mergeQuery??{}}}),method:"post"});A.patch=r=>({action:l.url({[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...r?.query??r?.mergeQuery??{}}}),method:"post"});l.form=A;const M={class:"space-y-6"},V={key:0,class:"mb-6"},L={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},z={class:"text-sm font-medium"},J={key:1,class:"mb-6"},K={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},j={class:"text-sm font-medium"},W={class:"flex items-start space-x-3"},X={class:"grid gap-1.5 leading-none"},Y={class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},Z={class:"flex items-center pt-4"},ie=C({__name:"Dashboard",props:{user:{},company:{}},setup(r){const g=r,b=$(),m=H(!1),d=q({prune_completed_tasks:!1});x(()=>g.company?.prune_completed_tasks,n=>{console.log("DASHBOARD DEBUG: Props changed, prune_completed_tasks:",n),console.log("DASHBOARD DEBUG: Full company props:",g.company);const s=n||!1;d.prune_completed_tasks=s,m.value=s,console.log("DASHBOARD DEBUG: Form updated to:",d.prune_completed_tasks),console.log("DASHBOARD DEBUG: Local ref updated to:",m.value)},{immediate:!0}),x(m,n=>{console.log("DASHBOARD DEBUG: Local ref changed to:",n),d.prune_completed_tasks=n,console.log("DASHBOARD DEBUG: Form synced to:",d.prune_completed_tasks)});const B=()=>{d.patch(l().url,{preserveScroll:!0,onSuccess:n=>{}})},h=y(()=>b.props.errors||{}),k=y(()=>b.props.flash?.success||"");return(n,s)=>(u(),i(F,null,[e(t(E),{title:"Dashboard Settings"}),e(I,null,{default:o(()=>[e(w,null,{default:o(()=>[a("div",M,[s[6]||(s[6]=a("div",null,[a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Dashboard Settings"),a("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure your dashboard preferences and automation settings. ")],-1)),k.value?(u(),i("div",V,[e(t(_),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:o(()=>[e(t(f),{class:"p-4"},{default:o(()=>[a("div",L,[e(t(N),{class:"w-5 h-5 flex-shrink-0"}),a("p",z,p(k.value),1)])]),_:1})]),_:1})])):v("",!0),h.value.error?(u(),i("div",J,[e(t(_),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:o(()=>[e(t(f),{class:"p-4"},{default:o(()=>[a("div",K,[e(t(D),{class:"w-5 h-5 flex-shrink-0"}),a("p",j,p(h.value.error),1)])]),_:1})]),_:1})])):v("",!0),e(t(_),null,{default:o(()=>[e(t(G),null,{default:o(()=>[e(t(P),null,{default:o(()=>s[1]||(s[1]=[c("Task Management",-1)])),_:1,__:[1]}),e(t(Q),null,{default:o(()=>s[2]||(s[2]=[c(" Configure automatic task management and cleanup settings. ",-1)])),_:1,__:[2]})]),_:1}),e(t(f),{class:"space-y-4"},{default:o(()=>[a("div",W,[e(t(R),{id:"prune_completed_tasks",checked:m.value,"onUpdate:checked":s[0]||(s[0]=S=>m.value=S)},null,8,["checked"]),a("div",X,[e(t(T),{for:"prune_completed_tasks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:o(()=>s[3]||(s[3]=[c(" Prune all Completed tasks in the Done column (daily at midnight) ",-1)])),_:1,__:[3]}),s[4]||(s[4]=a("p",{class:"text-xs text-muted-foreground"}," Automatically delete all completed tasks and their comments daily at midnight. This helps keep your workspace clean and organized. ",-1))])]),a("div",Y,[e(t(D),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),s[5]||(s[5]=a("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[a("p",{class:"font-medium mb-1"},"Important:"),a("p",{class:"text-xs"}," Once tasks are pruned, they cannot be recovered. Make sure you have exported any important data before enabling this feature. ")],-1))]),a("div",Z,[e(t(U),{onClick:B,disabled:t(d).processing},{default:o(()=>[c(p(t(d).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}});export{ie as default};
