import{d as Q,A as W,B as p,u as G,k as g,c as n,o,a as t,b as s,h as ee,w as l,e,i as m,m as F,t as r,j as d,F as R,r as ae,p as $}from"./app-SU8vPRFr.js";import{_ as B}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BrDfbSmH.js";import{_ as f,c as _,a as T,b as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-BzWFTUXV.js";import{_ as E}from"./CardDescription.vue_vue_type_script_setup_true_lang-D5ADjw6N.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-BbD24nc7.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-DMiic5is.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4tekYrB.js";import{_ as te}from"./Layout.vue_vue_type_script_setup_true_lang-BZcCm3iw.js";import{C as P,I as Y,G as M,g as le,E as oe,h as re,i as ne,j as de,k as ie}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-1VFd0Exo.js";import"./useForwardExpose-UkPEPHKk.js";import"./Heading.vue_vue_type_script_setup_true_lang-DFNXiovd.js";import"./index-BHmv6maG.js";import"./index-DgfQXu9z.js";import"./check-xx6QMMUl.js";const ue={class:"space-y-6"},me={key:0,class:"mb-6"},ce={class:"flex items-center gap-2 text-amber-700 dark:text-amber-300"},pe={key:1,class:"mb-6"},ge={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},fe={class:"text-sm font-medium"},_e={key:2,class:"mb-6"},be={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},ye={class:"text-sm font-medium"},ve={key:3,class:"mb-6"},xe={class:"space-y-3"},ke={class:"text-sm text-blue-700 dark:text-blue-300"},he={class:"font-medium mb-2"},we={class:"list-decimal list-inside space-y-1"},Ce={key:0,class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},Le={class:"flex items-center gap-2 text-green-700 dark:text-green-300 mb-2"},Se={class:"flex items-center gap-2"},Fe=["href"],Te={key:1,class:"p-4 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"},Ie={class:"flex items-center gap-2 text-gray-600 dark:text-gray-400"},Ue={key:2},$e={class:"space-y-4"},Be={class:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg"},Ee={class:"flex items-center gap-3"},Me={class:"flex items-center justify-center w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded border"},je=["src","alt"],Ve={key:1,class:"flex items-center gap-1 text-xs font-bold text-blue-600 dark:text-blue-400"},Ne={class:"font-medium text-gray-900 dark:text-gray-100"},ze={class:"text-sm text-gray-600 dark:text-gray-400"},Ae={class:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Ge={class:"text-sm text-blue-700 dark:text-blue-300"},Re={class:"space-y-1 text-xs"},Ze={key:0,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},De={class:"flex-1"},Pe={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Ye={class:"text-xs text-gray-600 dark:text-gray-400"},ra=Q({__name:"Company",props:{user:{},company:{}},setup(q){const u=q,j=W(),x=p(()=>u.company&&["MIDI","MAXI"].includes(u.company.subscription_type)),J=G({}),k=G({company_name:u.company?.name||""}),U=g(),h=g(!1),w=g(!1),v=g(!1),c=g(null),b=g(""),C=g(""),X=i=>{const a=i.target;a.files&&a.files[0]&&(c.value=a.files[0],b.value="")},K=async()=>{if(!(!c.value||!u.company)){h.value=!0,b.value="";try{const i=await ie(c.value,u.company.name,u.company.code);$.post("/settings/company-logo/update-url",{logo_url:i},{onSuccess:()=>{c.value=null,U.value&&(U.value.value=""),$.reload()},onError:a=>{b.value=a.logo||"Failed to update logo URL"}})}catch(i){console.error("Logo upload failed:",i),b.value="Failed to upload logo to storage. Please try again."}finally{h.value=!1}}},H=()=>{w.value=!0,J.delete("/settings/company-logo/remove",{onFinish:()=>{w.value=!1}})},O=()=>{u.company&&(v.value=!0,C.value="",k.post("/settings/company/subdomain",{onSuccess:()=>{v.value=!1,$.reload()},onError:i=>{v.value=!1,C.value=i.subdomain||"Failed to create subdomain"}}))},y=p(()=>j.props.errors||{}),V=p(()=>j.props.flash?.success||""),N=p(()=>u.company?.logo_url),L=p(()=>!!N.value),z=p(()=>!!u.company?.subdomain),A=p(()=>u.company?.subdomain_url);return(i,a)=>(o(),n(R,null,[t(s(ee),{title:"Company Settings"}),t(se,null,{default:l(()=>[t(te,null,{default:l(()=>[e("div",ue,[a[20]||(a[20]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Company Settings"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Manage your company's branding and subdomain. ")],-1)),x.value?m("",!0):(o(),n("div",me,[t(s(f),{class:"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20"},{default:l(()=>[t(s(_),{class:"p-4"},{default:l(()=>[e("div",ce,[t(s(P),{class:"w-5 h-5 flex-shrink-0"}),a[1]||(a[1]=e("div",null,[e("p",{class:"font-medium"},"Upgrade Required"),e("p",{class:"text-sm"},"Company features are available for MIDI and MAXI plans only.")],-1))])]),_:1})]),_:1})])),V.value?(o(),n("div",pe,[t(s(f),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:l(()=>[t(s(_),{class:"p-4"},{default:l(()=>[e("div",ge,[t(s(Y),{class:"w-5 h-5 flex-shrink-0"}),e("p",fe,r(V.value),1)])]),_:1})]),_:1})])):m("",!0),y.value.logo||b.value||C.value?(o(),n("div",_e,[t(s(f),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:l(()=>[t(s(_),{class:"p-4"},{default:l(()=>[e("div",be,[t(s(P),{class:"w-5 h-5 flex-shrink-0"}),e("p",ye,r(y.value.logo||b.value||C.value),1)])]),_:1})]),_:1})])):m("",!0),y.value.instructions?(o(),n("div",ve,[t(s(f),{class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20"},{default:l(()=>[t(s(T),null,{default:l(()=>[t(s(I),{class:"text-blue-700 dark:text-blue-300"},{default:l(()=>[d(r(y.value.instructions.title),1)]),_:1})]),_:1}),t(s(_),null,{default:l(()=>[e("div",xe,[e("div",ke,[e("p",he,r(y.value.instructions.note),1),e("ol",we,[(o(!0),n(R,null,ae(y.value.instructions.steps,S=>(o(),n("li",{key:S},r(S),1))),128))])])])]),_:1})]),_:1})])):m("",!0),x.value?(o(),F(s(f),{key:4},{default:l(()=>[t(s(T),null,{default:l(()=>[t(s(I),{class:"flex items-center gap-2"},{default:l(()=>[t(s(M),{class:"w-5 h-5"}),a[2]||(a[2]=d(" Company Subdomain ",-1))]),_:1,__:[2]}),t(s(E),null,{default:l(()=>a[3]||(a[3]=[d(" Create a custom subdomain for your company. This will allow guests to access your company's dashboard directly. ",-1)])),_:1,__:[3]})]),_:1}),t(s(_),{class:"space-y-4"},{default:l(()=>[z.value?(o(),n("div",Ce,[e("div",Le,[t(s(le),{class:"w-5 h-5"}),a[4]||(a[4]=e("span",{class:"font-medium"},"Subdomain Active",-1))]),e("div",Se,[a[5]||(a[5]=e("span",{class:"text-sm text-green-600 dark:text-green-400"}," Your company subdomain: ",-1)),e("a",{href:A.value,target:"_blank",class:"inline-flex items-center gap-1 text-sm font-medium text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300"},[d(r(A.value)+" ",1),t(s(oe),{class:"w-3 h-3"})],8,Fe)])])):m("",!0),z.value?(o(),n("div",Te,[e("div",Ie,[t(s(M),{class:"w-5 h-5"}),a[6]||(a[6]=e("span",{class:"font-medium"},"Sub Domain Linked",-1))]),a[7]||(a[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," Your company subdomain is already active and linked. ",-1))])):(o(),n("div",Ue,[e("div",$e,[e("div",null,[t(s(D),{for:"company-name",class:"text-sm font-medium"},{default:l(()=>a[8]||(a[8]=[d(" Company Name ",-1)])),_:1,__:[8]}),t(s(Z),{id:"company-name",modelValue:s(k).company_name,"onUpdate:modelValue":a[0]||(a[0]=S=>s(k).company_name=S),type:"text",placeholder:"Enter your company name",class:"mt-1"},null,8,["modelValue"]),a[9]||(a[9]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},' This will be converted to a subdomain (e.g., "My Company" → "my-company.zaptask.co.uk") ',-1))]),t(s(B),{onClick:O,disabled:v.value||!s(k).company_name,class:"w-full"},{default:l(()=>[t(s(M),{class:"w-4 h-4 mr-2"}),d(" "+r(v.value?"Creating Subdomain...":"Create Company Subdomain"),1)]),_:1},8,["disabled"])])]))]),_:1})]),_:1})):m("",!0),x.value?(o(),F(s(f),{key:5},{default:l(()=>[t(s(T),null,{default:l(()=>[t(s(I),null,{default:l(()=>a[10]||(a[10]=[d("Current Logo",-1)])),_:1,__:[10]}),t(s(E),null,{default:l(()=>a[11]||(a[11]=[d(" This is how your logo currently appears in the application. ",-1)])),_:1,__:[11]})]),_:1}),t(s(_),null,{default:l(()=>[e("div",Be,[e("div",Ee,[e("div",Me,[L.value?(o(),n("img",{key:0,src:N.value,alt:i.company?.name+" logo",class:"object-contain"},null,8,je)):(o(),n("div",Ve,a[12]||(a[12]=[e("div",{class:"w-6 h-6 bg-blue-600 dark:bg-blue-400 rounded text-white dark:text-gray-900 flex items-center justify-center"},[e("img",{src:"/zap_icon.png",alt:"ZapTask",class:"w-4 h-4 dark:hidden"}),e("img",{src:"/zap_icon_white.svg",alt:"ZapTask",class:"w-4 h-4 hidden dark:block"})],-1),e("span",null,"ZapTask",-1)])))]),e("div",null,[e("p",Ne,r(L.value?"Custom Logo":"Default ZapTask Logo"),1),e("p",ze,r(L.value?"Your company's custom logo":"Standard ZapTask branding"),1)])]),L.value?(o(),F(s(B),{key:0,onClick:H,disabled:w.value,variant:"outline",class:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300"},{default:l(()=>[t(s(re),{class:"w-4 h-4 mr-2"}),d(" "+r(w.value?"Removing...":"Remove Logo"),1)]),_:1},8,["disabled"])):m("",!0)])]),_:1})]),_:1})):m("",!0),x.value?(o(),F(s(f),{key:6},{default:l(()=>[t(s(T),null,{default:l(()=>[t(s(I),{class:"flex items-center gap-2"},{default:l(()=>[t(s(ne),{class:"w-5 h-5"}),a[13]||(a[13]=d(" Upload New Logo ",-1))]),_:1,__:[13]}),t(s(E),null,{default:l(()=>a[14]||(a[14]=[d(" Upload a custom logo for your company. The logo will replace the ZapTask branding. ",-1)])),_:1,__:[14]})]),_:1}),t(s(_),{class:"space-y-4"},{default:l(()=>[e("div",Ae,[t(s(Y),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e("div",Ge,[a[18]||(a[18]=e("p",{class:"font-medium mb-1"},"Logo Requirements:",-1)),e("ul",Re,[a[15]||(a[15]=e("li",null,"• Recommended size: 216px width × 48px height",-1)),a[16]||(a[16]=e("li",null,"• Supported formats: PNG, JPG, JPEG, SVG",-1)),a[17]||(a[17]=e("li",null,"• Maximum file size: 2MB",-1)),e("li",null,"• Filename will be: "+r(i.company?.name?.replace(/\s+/g,"_"))+"_"+r(i.company?.code)+"_timestamp",1)])])]),e("div",null,[t(s(D),{for:"logo-upload",class:"text-sm font-medium"},{default:l(()=>a[19]||(a[19]=[d(" Select Logo File ",-1)])),_:1,__:[19]}),t(s(Z),{id:"logo-upload",ref_key:"fileInput",ref:U,type:"file",accept:"image/png,image/jpg,image/jpeg,image/svg+xml",onChange:X,class:"mt-1"},null,512)]),c.value?(o(),n("div",Ze,[t(s(de),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e("div",De,[e("p",Pe,r(c.value.name),1),e("p",Ye,r((c.value.size/1024).toFixed(1))+" KB ",1)]),t(s(B),{onClick:K,disabled:h.value,class:"ml-auto"},{default:l(()=>[d(r(h.value?"Uploading...":"Upload Logo"),1)]),_:1},8,["disabled"])])):m("",!0)]),_:1})]),_:1})):m("",!0)])]),_:1})]),_:1})],64))}});export{ra as default};
