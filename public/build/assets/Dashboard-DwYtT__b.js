import{d as S,r as p,A as C,c as f,o as g,i as w,e,a as t,b as l,t as m,n as v,j as u,F as j,l as _,w as y,h as A,p as F,g as D,B as P}from"./app-BZqS97LO.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-d5Iuiu5k.js";import{_ as W,a as E}from"./ActivityFeed.vue_vue_type_script_setup_true_lang-DAOufrdS.js";import{T as $,U as T,_ as k,a as X}from"./realtimeService-C9T3vTSX.js";import{X as I,F as B}from"./x-DW56LtsW.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DkcOZYRZ.js";import"./index-JyUDYtC-.js";import"./useForwardExpose-BPLHy-zr.js";import"./Presence-qP4EaDs9.js";import"./VisuallyHidden--3eZhqGO.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BhzzfxDX.js";import"./check-BcYKJZdj.js";import"./TodoComments.vue_vue_type_script_setup_true_lang-DRl7_zX-.js";import"./lock-D2BoMnvi.js";import"./globe-C__j2TGH.js";import"./loader-circle-Ch9XhMwh.js";const L={class:"space-y-2"},N={key:0,class:"flex items-center justify-between bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mx-4 mt-4",role:"alert"},V={class:"flex items-center gap-3"},R={class:"flex items-center gap-2"},H={class:"text-sm text-red-700 dark:text-red-300"},q={class:"flex items-center gap-3"},z={class:"flex items-center gap-2"},O={class:"text-sm text-red-700 dark:text-red-300"},G=S({__name:"LimitWarnings",props:{company:{}},setup(M){const r=M,b=p(sessionStorage.getItem(`member-warning-dismissed-${r.company.id}`)==="true"),s=p(sessionStorage.getItem(`project-warning-dismissed-${r.company.id}`)==="true"),i=C(()=>{if(b.value||r.company.subscription_type==="MAXI")return!1;const o=r.company.member_limit-1;return r.company.current_member_count>=o}),c=C(()=>{if(s.value||r.company.subscription_type==="MAXI")return!1;const o=Math.floor(r.company.project_limit*.8);return r.company.current_project_count>=o}),x=()=>{b.value=!0,sessionStorage.setItem(`member-warning-dismissed-${r.company.id}`,"true")},h=()=>{s.value=!0,sessionStorage.setItem(`project-warning-dismissed-${r.company.id}`,"true")},d=()=>r.company.subscription_type==="FREE"?"Upgrade to MIDI (£6/month) or MAXI (£9/month) to add more members.":"Upgrade to MAXI (£9/month) to add more members.",n=()=>r.company.subscription_type==="FREE"?{before:"to create more projects.",hasLinks:!0}:{before:"to create more projects.",hasLinks:!0,singlePlan:"MAXI"};return(o,a)=>(g(),f("div",L,[i.value?(g(),f("div",N,[e("div",V,[t(l($),{class:"w-5 h-5 text-red-600 dark:text-red-400"}),e("div",null,[e("div",R,[t(l(T),{class:"w-4 h-4 text-red-600 dark:text-red-400"}),a[0]||(a[0]=e("span",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Member Limit Warning ",-1))]),e("p",H,m(o.company.current_member_count)+"/"+m(o.company.member_limit)+" members used. "+m(d()),1)])]),e("button",{onClick:x,class:"p-1 hover:bg-red-100 dark:hover:bg-red-800/30 rounded transition-colors","aria-label":"Dismiss warning"},[t(l(I),{class:"w-4 h-4 text-red-600 dark:text-red-400"})])])):w("",!0),c.value?(g(),f("div",{key:1,class:v(["flex items-center justify-between bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mx-4",{"mt-4":!i.value}]),role:"alert"},[e("div",q,[t(l($),{class:"w-5 h-5 text-red-600 dark:text-red-400"}),e("div",null,[e("div",z,[t(l(B),{class:"w-4 h-4 text-red-600 dark:text-red-400"}),a[1]||(a[1]=e("span",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Project Limit Warning ",-1))]),e("p",O,[u(m(o.company.current_project_count)+"/"+m(o.company.project_limit)+" projects used. ",1),o.company.subscription_type==="FREE"?(g(),f(j,{key:0},[t(l(_),{href:"/subscription",class:"font-bold text-red-800 dark:text-red-200 hover:underline"},{default:y(()=>a[2]||(a[2]=[u(" Upgrade to MIDI (£6/month) ",-1)])),_:1,__:[2]}),a[4]||(a[4]=u(" or ",-1)),t(l(_),{href:"/subscription",class:"font-bold text-red-800 dark:text-red-200 hover:underline"},{default:y(()=>a[3]||(a[3]=[u(" MAXI (£9/month) ",-1)])),_:1,__:[3]}),u(" "+m(n().before),1)],64)):(g(),f(j,{key:1},[t(l(_),{href:"/subscription",class:"font-bold text-red-800 dark:text-red-200 hover:underline"},{default:y(()=>a[5]||(a[5]=[u(" Upgrade to MAXI (£9/month) ",-1)])),_:1,__:[5]}),u(" "+m(n().before),1)],64))])])]),e("button",{onClick:h,class:"p-1 hover:bg-red-100 dark:hover:bg-red-800/30 rounded transition-colors","aria-label":"Dismiss warning"},[t(l(I),{class:"w-4 h-4 text-red-600 dark:text-red-400"})])],2)):w("",!0)]))}}),J=["title"],K=["title"],Q=["title"],Y={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Z={class:"lg:col-span-1 activity-feed-container"},ee=S({__name:"Dashboard",props:{user:{},company:{}},setup(M){const r=[{title:"Dashboard",href:"/dashboard"}],b=p(null),s=p(!1),i=p(!1);p(!1);const c=p(!1),x=d=>{b.value=d?.color||null},h=()=>{c.value=!c.value};return(d,n)=>(g(),f(j,null,[t(l(A),{title:"Dashboard"}),t(U,{breadcrumbs:r,company:d.company,"project-color":b.value},{dashboardActions:y(()=>[e("button",{onClick:n[0]||(n[0]=o=>i.value=!i.value),title:i.value?"Hide Calendar":"Show Calendar",class:v(["inline-flex items-center justify-center p-2 transition-colors",i.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[t(k,{name:"Calendar",class:"w-5 h-5"})],10,J),e("button",{onClick:n[1]||(n[1]=o=>s.value=!s.value),title:s.value?"Hide Activity Feed":"Show Activity Feed",class:v(["inline-flex items-center justify-center p-2 transition-colors",s.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[t(k,{name:"Activity",class:"w-5 h-5"})],10,K),e("button",{onClick:h,title:c.value?"Exit Select Mode":"Select for Bulk Update",class:v(["inline-flex items-center justify-center p-2 transition-colors",c.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[t(k,{name:"CheckSquare",class:"w-5 h-5"})],10,Q)]),default:y(()=>[d.company?(g(),F(G,{key:0,company:d.company},null,8,["company"])):w("",!0),e("div",Y,[e("div",{class:v(["grid gap-4 h-full",s.value?"grid-cols-1 lg:grid-cols-4":"grid-cols-1"])},[e("div",{class:v(s.value?"lg:col-span-3":"col-span-1")},[t(W,{onProjectChanged:x,"show-activity-feed":s.value,"show-calendar":i.value,"is-select-mode":c.value,onToggleActivityFeed:n[2]||(n[2]=o=>s.value=!s.value),onToggleCalendar:n[3]||(n[3]=o=>i.value=!i.value),onToggleSelectMode:h},null,8,["show-activity-feed","show-calendar","is-select-mode"])],2),D(e("div",Z,[t(E,{"company-id":d.company?.id||1,visible:s.value,class:"h-full"},null,8,["company-id","visible"])],512),[[P,s.value]])],2)])]),_:1},8,["company","project-color"])],64))}}),ye=X(ee,[["__scopeId","data-v-5e93e3f5"]]);export{ye as default};
