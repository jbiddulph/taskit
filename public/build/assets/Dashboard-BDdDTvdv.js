import{B as x,d as q,E as ne,G as pe,m as j,o as v,w as f,a as p,b as o,R as U,x as me,N,Q as P,c as w,i as V,F as G,r as D,q as ge,f as L,U as fe,k as S,e as s,j as E,t as h,g as O,v as K,V as J,A as ve,u as ye,h as be}from"./app-DM9kKrjV.js";import{t as he,u as xe,P as W,c as oe,d as _e,q as ke,e as we,_ as Ce}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-cKPmV3AZ.js";import{_ as R,c as z,a as Y,b as Z}from"./CardTitle.vue_vue_type_script_setup_true_lang-DuRzkiV8.js";import{_ as ee}from"./CardDescription.vue_vue_type_script_setup_true_lang-xQ9Soyts.js";import{o as $e,p as Ie,q as Se,s as je,w as Ae,v as qe,x as Be,V as Ee,y as ie,P as Ge,z as Ve,i as Pe,_ as A,I as Oe,f as te}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DbDzikKB.js";import{_ as De}from"./Label.vue_vue_type_script_setup_true_lang-Df4JGZeH.js";import{_ as Te}from"./Layout.vue_vue_type_script_setup_true_lang-CrwEH3JR.js";import{_ as Fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dj9HqMIn.js";import"./Heading.vue_vue_type_script_setup_true_lang-BX3Rf5_9.js";function ae(n){return typeof n=="string"?`'${n}'`:new Re().serialize(n)}const Re=(function(){class n{#e=new Map;compare(e,t){const r=typeof e,c=typeof t;return r==="string"&&c==="string"?e.localeCompare(t):r==="number"&&c==="number"?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(e===null)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if(t!=="[object Object]")return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const r=e.constructor,c=r===Object||r===void 0?"":r.name;if(c!==""&&globalThis[c]===r)return this.serializeBuiltInType(c,e);if(typeof e.toJSON=="function"){const d=e.toJSON();return c+(d!==null&&typeof d=="object"?this.$object(d):`(${this.serialize(d)})`)}return this.serializeObjectEntries(c,Object.entries(e))}serializeBuiltInType(e,t){const r=this["$"+e];if(r)return r.call(this,t);if(typeof t?.entries=="function")return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const r=Array.from(t).sort((d,g)=>this.compare(d[0],g[0]));let c=`${e}{`;for(let d=0;d<r.length;d++){const[g,_]=r[d];c+=`${this.serialize(g,!0)}:${this.serialize(_)}`,d<r.length-1&&(c+=",")}return c+"}"}$object(e){let t=this.#e.get(e);return t===void 0&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return t.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let r=0;r<e.length;r++)t+=this.serialize(e[r]),r<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((t,r)=>this.compare(t,r)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const a of["Error","RegExp","URL"])n.prototype["$"+a]=function(e){return`${a}(${e})`};for(const a of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])n.prototype["$"+a]=function(e){return`${a}[${e.join(",")}]`};for(const a of["BigInt64Array","BigUint64Array"])n.prototype["$"+a]=function(e){return`${a}[${e.join("n,")}${e.length>0?"n":""}]`};return n})();function Q(n,a){return n===a||ae(n)===ae(a)}function X(n){return n==null}function se(n,a){return X(n)?!1:Array.isArray(n)?n.some(e=>Q(e,a)):Q(n,a)}function ze(n){return x(()=>he(n)?!!xe(n)?.closest("form"):!0)}var Me=q({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const a=n,e=$e(),t=Ie(),r=x(()=>a.tabStopId||t),c=x(()=>e.currentTabStopId.value===r.value),{getItems:d,CollectionItem:g}=Se();ne(()=>{a.focusable&&e.onFocusableItemAdd()}),pe(()=>{a.focusable&&e.onFocusableItemRemove()});function _(i){if(i.key==="Tab"&&i.shiftKey){e.onItemShiftTab();return}if(i.target!==i.currentTarget)return;const u=je(i,e.orientation.value,e.dir.value);if(u!==void 0){if(i.metaKey||i.ctrlKey||i.altKey||!a.allowShiftKey&&i.shiftKey)return;i.preventDefault();let y=[...d().map(k=>k.ref).filter(k=>k.dataset.disabled!=="")];if(u==="last")y.reverse();else if(u==="prev"||u==="next"){u==="prev"&&y.reverse();const k=y.indexOf(i.currentTarget);y=e.loop.value?Ae(y,k+1):y.slice(k+1)}me(()=>qe(y))}}return(i,u)=>(v(),j(o(g),null,{default:f(()=>[p(o(W),{tabindex:c.value?0:-1,"data-orientation":o(e).orientation.value,"data-active":i.active?"":void 0,"data-disabled":i.focusable?void 0:"",as:i.as,"as-child":i.asChild,onMousedown:u[0]||(u[0]=y=>{i.focusable?o(e).onItemFocus(r.value):y.preventDefault()}),onFocus:u[1]||(u[1]=y=>o(e).onItemFocus(r.value)),onKeydown:_},{default:f(()=>[U(i.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),Ue=Me,He=q({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const a=n,{primitiveElement:e,currentElement:t}=Be(),r=x(()=>a.checked??a.value);return N(r,(c,d)=>{if(!t.value)return;const g=t.value,_=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(_,"value").set;if(u&&c!==d){const y=new Event("input",{bubbles:!0}),k=new Event("change",{bubbles:!0});u.call(g,c),g.dispatchEvent(y),g.dispatchEvent(k)}}),(c,d)=>(v(),j(Ee,P({ref_key:"primitiveElement",ref:e},{...a,...c.$attrs},{as:"input"}),null,16))}}),re=He,Ke=q({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const a=n,e=x(()=>typeof a.value=="object"&&Array.isArray(a.value)&&a.value.length===0&&a.required),t=x(()=>typeof a.value=="string"||typeof a.value=="number"||typeof a.value=="boolean"||a.value===null||a.value===void 0?[{name:a.name,value:a.value}]:typeof a.value=="object"&&Array.isArray(a.value)?a.value.flatMap((r,c)=>typeof r=="object"?Object.entries(r).map(([d,g])=>({name:`${a.name}[${c}][${d}]`,value:g})):{name:`${a.name}[${c}]`,value:r}):a.value!==null&&typeof a.value=="object"&&!Array.isArray(a.value)?Object.entries(a.value).map(([r,c])=>({name:`${a.name}[${r}]`,value:c})):[]);return(r,c)=>(v(),w(G,null,[V(" We render single input if it's required "),e.value?(v(),j(re,P({key:r.name},{...a,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(v(!0),w(G,{key:1},D(t.value,d=>(v(),j(re,P({key:d.name},{ref_for:!0},{...a,...r.$attrs},{name:d.name,value:d.value}),null,16,["name","value"]))),128))],2112))}}),Ne=Ke;const[Le,ca]=ie("CheckboxGroupRoot");function M(n){return n==="indeterminate"}function le(n){return M(n)?"indeterminate":n?"checked":"unchecked"}const[Qe,Xe]=ie("CheckboxRoot");var We=q({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},value:{type:null,required:!1,default:"on"},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(n,{emit:a}){const e=n,t=a,{forwardRef:r,currentElement:c}=oe(),d=Le(null),g=_e(e,"modelValue",t,{defaultValue:e.defaultValue,passive:e.modelValue===void 0}),_=x(()=>d?.disabled.value||e.disabled),i=x(()=>X(d?.modelValue.value)?g.value==="indeterminate"?"indeterminate":g.value:se(d.modelValue.value,e.value));function u(){if(X(d?.modelValue.value))g.value=M(g.value)?!0:!g.value;else{const b=[...d.modelValue.value||[]];if(se(b,e.value)){const T=b.findIndex(H=>Q(H,e.value));b.splice(T,1)}else b.push(e.value);d.modelValue.value=b}}const y=ze(c),k=x(()=>e.id&&c.value?document.querySelector(`[for="${e.id}"]`)?.innerText:void 0);return Xe({disabled:_,state:i}),(b,T)=>(v(),j(fe(o(d)?.rovingFocus.value?o(Ue):o(W)),P(b.$attrs,{id:b.id,ref:o(r),role:"checkbox","as-child":b.asChild,as:b.as,type:b.as==="button"?"button":void 0,"aria-checked":o(M)(i.value)?"mixed":i.value,"aria-required":b.required,"aria-label":b.$attrs["aria-label"]||k.value,"data-state":o(le)(i.value),"data-disabled":_.value?"":void 0,disabled:_.value,focusable:o(d)?.rovingFocus.value?!_.value:void 0,onKeydown:ge(L(()=>{},["prevent"]),["enter"]),onClick:u}),{default:f(()=>[U(b.$slots,"default",{modelValue:o(g),state:i.value}),o(y)&&b.name&&!o(d)?(v(),j(o(Ne),{key:0,type:"checkbox",checked:!!i.value,name:b.name,value:b.value,disabled:_.value,required:b.required},null,8,["checked","name","value","disabled","required"])):V("v-if",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"]))}}),Je=We,Ye=q({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const{forwardRef:a}=oe(),e=Qe();return(t,r)=>(v(),j(o(Ge),{present:t.forceMount||o(M)(o(e).state.value)||o(e).state.value===!0},{default:f(()=>[p(o(W),P({ref:o(a),"data-state":o(le)(o(e).state.value),"data-disabled":o(e).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":t.asChild,as:t.as},t.$attrs),{default:f(()=>[U(t.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),Ze=Ye;const $=n=>({url:$.url(n),method:"patch"});$.definition={methods:["patch"],url:"/settings/dashboard"};$.url=n=>$.definition.url+ke(n);$.patch=n=>({url:$.url(n),method:"patch"});const de=n=>({action:$.url({[n?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...n?.query??n?.mergeQuery??{}}}),method:"post"});de.patch=n=>({action:$.url({[n?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...n?.query??n?.mergeQuery??{}}}),method:"post"});$.form=de;const et=q({__name:"Checkbox",props:{defaultValue:{type:[Boolean,String]},modelValue:{type:[Boolean,String,null]},disabled:{type:Boolean},value:{},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(n,{emit:a}){const e=n,t=a,r=x(()=>{const{class:d,...g}=e;return g}),c=Ve(r,t);return(d,g)=>(v(),j(o(Je),P({"data-slot":"checkbox"},o(c),{class:o(we)("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e.class)}),{default:f(()=>[p(o(Ze),{"data-slot":"checkbox-indicator",class:"flex items-center justify-center text-current transition-none"},{default:f(()=>[U(d.$slots,"default",{},()=>[p(o(Pe),{class:"size-3.5"})])]),_:3})]),_:3},16,["class"]))}});class tt{guests=S([]);invitations=S([]);permissions=S([]);getCompanyGuests(a){return this.guests.value.filter(e=>e.company_id===a)}getActiveGuests(a){return this.guests.value.filter(e=>e.company_id===a&&e.is_active&&(!e.expires_at||new Date(e.expires_at)>new Date))}getGuest(a){return this.guests.value.find(e=>e.id===a)||null}isGuest(a){return this.guests.value.some(e=>e.id===a)}hasProjectAccess(a,e){const t=this.getGuest(a);return t?t.projects.includes(e):!1}hasPermission(a,e){const t=this.getGuest(a);return t?t.permissions.some(r=>r.actions.includes(e)):!1}async createInvitation(a){const e={...a,id:Date.now(),invited_at:new Date().toISOString(),token:this.generateToken(),status:"pending"};return this.invitations.value.push(e),e}async acceptInvitation(a,e){const t=this.invitations.value.find(c=>c.token===a);if(!t||t.status!=="pending")return null;if(t.expires_at&&new Date(t.expires_at)<new Date)return t.status="expired",null;const r={id:Date.now(),email:e.email,name:e.name,company_id:t.company_id,invited_by:t.invited_by,invited_at:t.invited_at,expires_at:t.expires_at,is_active:!0,permissions:t.permissions,projects:t.projects};return this.guests.value.push(r),t.status="accepted",r}async revokeGuestAccess(a){const e=this.getGuest(a);return e?(e.is_active=!1,!0):!1}async updateGuestPermissions(a,e){const t=this.getGuest(a);return t?(t.permissions=e,!0):!1}async updateGuestProjects(a,e){const t=this.getGuest(a);return t?(t.projects=e,!0):!1}getAvailablePermissions(){return this.permissions.value}getPendingInvitations(a){return this.invitations.value.filter(e=>e.company_id===a&&e.status==="pending")}async resendInvitation(a){const e=this.invitations.value.find(t=>t.id===a);return e?(console.log("Resending invitation to:",e.email),!0):!1}async cancelInvitation(a){const e=this.invitations.value.find(t=>t.id===a);return e?(e.status="revoked",!0):!1}generateToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}setGuests(a){this.guests.value=a}setInvitations(a){this.invitations.value=a}setPermissions(a){this.permissions.value=a}getGuestStats(a){const e=this.getCompanyGuests(a),t=this.invitations.value.filter(r=>r.company_id===a);return{total:e.length,active:e.filter(r=>r.is_active).length,pending:t.filter(r=>r.status==="pending").length,expired:t.filter(r=>r.status==="expired").length}}}const I=new tt,at={class:"guest-management"},st={class:"flex items-center justify-between mb-6"},rt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},nt={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"},ot={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},it={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"},lt={class:"text-2xl font-bold text-green-600"},dt={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"},ut={class:"text-2xl font-bold text-yellow-600"},ct={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"},pt={class:"text-2xl font-bold text-red-600"},mt={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},gt={class:"divide-y divide-gray-200 dark:divide-gray-700"},ft={class:"flex items-center gap-3"},vt={class:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center"},yt={class:"font-medium text-gray-900 dark:text-gray-100"},bt={class:"text-sm text-gray-600 dark:text-gray-400"},ht={class:"text-xs text-gray-500 dark:text-gray-400"},xt={class:"flex items-center gap-2"},_t=["onClick"],kt=["onClick"],wt={class:"flex items-center gap-3"},Ct={class:"w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center"},$t={class:"font-medium text-gray-900 dark:text-gray-100"},It={class:"text-sm text-gray-600 dark:text-gray-400"},St={class:"text-xs text-gray-500 dark:text-gray-400"},jt={class:"flex items-center gap-2"},At=["onClick"],qt=["onClick"],Bt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden"},Et={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Gt={class:"flex justify-between items-center"},Vt={class:"p-6 overflow-y-auto max-h-[60vh]"},Pt={class:"space-y-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-2"},Ot=["value"],Dt={class:"text-sm text-gray-700 dark:text-gray-300"},Tt={class:"space-y-2"},Ft=["value"],Rt={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},zt={class:"text-xs text-gray-500 dark:text-gray-400"},Mt={class:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3"},Ut=["disabled"],Ht=q({__name:"GuestManagement",props:{companyId:{},projects:{}},setup(n){const a=n,e=S(!1),t=S({email:"",name:"",projects:[],permissions:[],message:""}),r=S([]),c=S([]),d=S([{id:1,name:"View Only",description:"Can view todos and comments",actions:["view"]},{id:2,name:"Comment",description:"Can view and add comments",actions:["view","comment"]},{id:3,name:"Edit",description:"Can view, comment, and edit todos",actions:["view","comment","edit"]}]),g=x(()=>I.getActiveGuests(a.companyId)),_=x(()=>I.getPendingInvitations(a.companyId)),i=x(()=>I.getGuestStats(a.companyId)),u=x(()=>a.projects),y=async()=>{if(!t.value.email||t.value.projects.length===0)return;await I.createInvitation({email:t.value.email,name:t.value.name,company_id:a.companyId,invited_by:1,expires_at:new Date(Date.now()+10080*60*1e3).toISOString(),permissions:d.value.filter(l=>t.value.permissions.includes(l.id)),projects:t.value.projects,message:t.value.message})&&(k(),F())},k=()=>{e.value=!1,t.value={email:"",name:"",projects:[],permissions:[],message:""}},b=C=>{console.log("Edit guest:",C)},T=async C=>{confirm("Are you sure you want to revoke this guest's access?")&&(await I.revokeGuestAccess(C),F())},H=async C=>{await I.resendInvitation(C)},ue=async C=>{confirm("Are you sure you want to cancel this invitation?")&&(await I.cancelInvitation(C),F())},ce=C=>new Date(C).toLocaleDateString(),F=()=>{r.value=I.getCompanyGuests(a.companyId),c.value=I.getPendingInvitations(a.companyId)};return ne(()=>{F()}),(C,l)=>(v(),w("div",at,[s("div",st,[l[7]||(l[7]=s("div",null,[s("h2",{class:"text-xl font-bold text-gray-900 dark:text-gray-100"},"Guest Access"),s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Manage external collaborators and their project access")],-1)),s("button",{onClick:l[0]||(l[0]=m=>e.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[p(A,{name:"UserPlus",class:"w-4 h-4 inline mr-2"}),l[6]||(l[6]=E(" Invite Guest ",-1))])]),s("div",rt,[s("div",nt,[s("div",ot,h(i.value.total),1),l[8]||(l[8]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Guests",-1))]),s("div",it,[s("div",lt,h(i.value.active),1),l[9]||(l[9]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Active",-1))]),s("div",dt,[s("div",ut,h(i.value.pending),1),l[10]||(l[10]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Pending",-1))]),s("div",ct,[s("div",pt,h(i.value.expired),1),l[11]||(l[11]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Expired",-1))])]),s("div",mt,[l[14]||(l[14]=s("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Guests & Invitations")],-1)),s("div",gt,[(v(!0),w(G,null,D(g.value,m=>(v(),w("div",{key:m.id,class:"p-4 flex items-center justify-between"},[s("div",ft,[s("div",vt,[p(A,{name:"User",class:"w-5 h-5 text-green-600 dark:text-green-400"})]),s("div",null,[s("div",yt,h(m.name),1),s("div",bt,h(m.email),1),s("div",ht," Access to "+h(m.projects.length)+" project"+h(m.projects.length!==1?"s":""),1)])]),s("div",xt,[l[12]||(l[12]=s("span",{class:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-full"}," Active ",-1)),s("button",{onClick:B=>b(m),class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[p(A,{name:"Settings",class:"w-4 h-4"})],8,_t),s("button",{onClick:B=>T(m.id),class:"p-1 text-red-400 hover:text-red-600"},[p(A,{name:"UserX",class:"w-4 h-4"})],8,kt)])]))),128)),(v(!0),w(G,null,D(_.value,m=>(v(),w("div",{key:m.id,class:"p-4 flex items-center justify-between"},[s("div",wt,[s("div",Ct,[p(A,{name:"Mail",class:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})]),s("div",null,[s("div",$t,h(m.email),1),s("div",It," Invited "+h(ce(m.invited_at)),1),s("div",St," Access to "+h(m.projects.length)+" project"+h(m.projects.length!==1?"s":""),1)])]),s("div",jt,[l[13]||(l[13]=s("span",{class:"text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 rounded-full"}," Pending ",-1)),s("button",{onClick:B=>H(m.id),class:"p-1 text-blue-400 hover:text-blue-600"},[p(A,{name:"RefreshCw",class:"w-4 h-4"})],8,At),s("button",{onClick:B=>ue(m.id),class:"p-1 text-red-400 hover:text-red-600"},[p(A,{name:"X",class:"w-4 h-4"})],8,qt)])]))),128))])]),e.value?(v(),w("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:L(k,["self"])},[s("div",Bt,[s("div",Et,[s("div",Gt,[l[15]||(l[15]=s("h2",{class:"text-xl font-bold text-gray-900 dark:text-gray-100"},"Invite Guest",-1)),s("button",{onClick:k,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[p(A,{name:"X",class:"w-6 h-6"})])])]),s("div",Vt,[s("form",{onSubmit:L(y,["prevent"]),class:"space-y-4"},[s("div",null,[l[16]||(l[16]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email Address",-1)),O(s("input",{"onUpdate:modelValue":l[1]||(l[1]=m=>t.value.email=m),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"guest@example.com"},null,512),[[K,t.value.email]])]),s("div",null,[l[17]||(l[17]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Name (Optional)",-1)),O(s("input",{"onUpdate:modelValue":l[2]||(l[2]=m=>t.value.name=m),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Guest Name"},null,512),[[K,t.value.name]])]),s("div",null,[l[18]||(l[18]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Projects",-1)),s("div",Pt,[(v(!0),w(G,null,D(u.value,m=>(v(),w("label",{key:m.id,class:"flex items-center gap-2 cursor-pointer"},[O(s("input",{"onUpdate:modelValue":l[3]||(l[3]=B=>t.value.projects=B),value:m.id,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,Ot),[[J,t.value.projects]]),s("span",Dt,h(m.name),1)]))),128))])]),s("div",null,[l[19]||(l[19]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Permissions",-1)),s("div",Tt,[(v(!0),w(G,null,D(d.value,m=>(v(),w("label",{key:m.id,class:"flex items-center gap-2 cursor-pointer"},[O(s("input",{"onUpdate:modelValue":l[4]||(l[4]=B=>t.value.permissions=B),value:m.id,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,Ft),[[J,t.value.permissions]]),s("div",null,[s("span",Rt,h(m.name),1),s("p",zt,h(m.description),1)])]))),128))])]),s("div",null,[l[20]||(l[20]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Message (Optional)",-1)),O(s("textarea",{"onUpdate:modelValue":l[5]||(l[5]=m=>t.value.message=m),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Welcome message for the guest..."},null,512),[[K,t.value.message]])])],32)]),s("div",Mt,[s("button",{onClick:k,class:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," Cancel "),s("button",{onClick:y,disabled:!t.value.email||t.value.projects.length===0,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Send Invitation ",8,Ut)])])])):V("",!0)]))}}),Kt={class:"space-y-6"},Nt={key:0,class:"mb-6"},Lt={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},Qt={class:"text-sm font-medium"},Xt={key:1,class:"mb-6"},Wt={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},Jt={class:"text-sm font-medium"},Yt={class:"flex items-start space-x-3"},Zt={class:"grid gap-1.5 leading-none"},ea={class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},ta={class:"flex items-center pt-4"},pa=q({__name:"Dashboard",props:{user:{},company:{}},setup(n){const a=n,e=ve(),t=S(!1),r=ye({prune_completed_tasks:!1}),c=x(()=>{const i=a.company?.prune_completed_tasks;return console.log("CHECKBOX DEBUG: Raw prop value:",i,"Type:",typeof i),i===!0||i===1||i==="1"||i==="true"?(console.log("CHECKBOX DEBUG: Setting to TRUE"),!0):(console.log("CHECKBOX DEBUG: Setting to FALSE"),!1)});N(()=>a.company?.prune_completed_tasks,i=>{console.log("PROPS WATCH: New value:",i,"Type:",typeof i);const u=i===!0||i===1||i==="1"||i==="true";console.log("PROPS WATCH: Converted to:",u),r.prune_completed_tasks=u,t.value=u},{immediate:!0}),N(t,i=>{console.log("REF WATCH: Local ref changed to:",i),r.prune_completed_tasks=i});const d=()=>{r.patch($().url,{preserveScroll:!0,onSuccess:()=>{}})},g=x(()=>e.props.errors||{}),_=x(()=>e.props.flash?.success||"");return(i,u)=>(v(),w(G,null,[p(o(be),{title:"Dashboard Settings"}),p(Fe,null,{default:f(()=>[p(Te,null,{default:f(()=>[s("div",Kt,[u[8]||(u[8]=s("div",null,[s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Dashboard Settings"),s("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure your dashboard preferences and automation settings. ")],-1)),_.value?(v(),w("div",Nt,[p(o(R),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:f(()=>[p(o(z),{class:"p-4"},{default:f(()=>[s("div",Lt,[p(o(Oe),{class:"w-5 h-5 flex-shrink-0"}),s("p",Qt,h(_.value),1)])]),_:1})]),_:1})])):V("",!0),g.value.error?(v(),w("div",Xt,[p(o(R),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:f(()=>[p(o(z),{class:"p-4"},{default:f(()=>[s("div",Wt,[p(o(te),{class:"w-5 h-5 flex-shrink-0"}),s("p",Jt,h(g.value.error),1)])]),_:1})]),_:1})])):V("",!0),p(o(R),null,{default:f(()=>[p(o(Y),null,{default:f(()=>[p(o(Z),null,{default:f(()=>u[1]||(u[1]=[E("Task Management",-1)])),_:1,__:[1]}),p(o(ee),null,{default:f(()=>u[2]||(u[2]=[E(" Configure automatic task management and cleanup settings. ",-1)])),_:1,__:[2]})]),_:1}),p(o(z),{class:"space-y-4"},{default:f(()=>[s("div",Yt,[p(o(et),{id:"prune_completed_tasks",checked:c.value,"onUpdate:checked":u[0]||(u[0]=y=>{console.log("CHECKBOX CLICKED:",y),t.value.value=y})},null,8,["checked"]),s("div",Zt,[p(o(De),{for:"prune_completed_tasks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:f(()=>u[3]||(u[3]=[E(" Prune all Completed tasks in the Done column (daily at midnight) ",-1)])),_:1,__:[3]}),u[4]||(u[4]=s("p",{class:"text-xs text-muted-foreground"}," Automatically delete all completed tasks and their comments daily at midnight. This helps keep your workspace clean and organized. ",-1))])]),s("div",ea,[p(o(te),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),u[5]||(u[5]=s("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[s("p",{class:"font-medium mb-1"},"Important:"),s("p",{class:"text-xs"}," Once tasks are pruned, they cannot be recovered. Make sure you have exported any important data before enabling this feature. ")],-1))]),s("div",ta,[p(o(Ce),{onClick:d,disabled:o(r).processing},{default:f(()=>[E(h(o(r).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),i.company?(v(),j(o(R),{key:2},{default:f(()=>[p(o(Y),null,{default:f(()=>[p(o(Z),null,{default:f(()=>u[6]||(u[6]=[E("Guest Access",-1)])),_:1,__:[6]}),p(o(ee),null,{default:f(()=>u[7]||(u[7]=[E(" Manage external collaborators and their project access. ",-1)])),_:1,__:[7]})]),_:1}),p(o(z),null,{default:f(()=>[p(Ht,{"company-id":i.company.id,projects:[]},null,8,["company-id"])]),_:1})]),_:1})):V("",!0)])]),_:1})]),_:1})],64))}});export{pa as default};
