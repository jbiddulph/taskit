import{d as V,r as h,p as q,o as i,w as l,e,a,c as d,j as c,t as n,g as A,s as M,v as L,b as r,i as D,n as $,F as C,k as w,q as I,m as O,f as U,x as j}from"./app-BhLIlysF.js";import{_ as K}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CAFRxiH6.js";import{_ as z}from"./Heading.vue_vue_type_script_setup_true_lang-BDqVsYcX.js";import{_ as g,a as f,b,c as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cxio8U4B.js";import{_ as u}from"./realtimeService-CKkX3ln5.js";import"./index-ClGn3dxu.js";import"./useForwardExpose-CFfYGEs9.js";import"./Presence-BKjE6aqp.js";import"./x-CGC45zSZ.js";import"./VisuallyHidden-Cmd4t39D.js";import"./index-CMWG4mbA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BpT7hbRI.js";import"./check-5j9khce0.js";import"./lock-BjcqoP98.js";import"./globe-DAhZzmZ9.js";import"./loader-circle-C4e_7cx-.js";const H={class:"space-y-6 p-6"},J={class:"flex items-center gap-2"},W={key:0,class:"flex items-center gap-2"},G={key:1,class:"flex items-center gap-2"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Y={class:"text-lg font-semibold"},Z={class:"text-lg font-mono"},ee={key:0},te={class:"text-gray-700"},se={class:"flex items-center gap-2"},ae={class:"text-lg"},oe={key:0},ne={key:1},le={key:2},re={class:"text-lg"},ie={key:0},de={key:1},me={key:2},ce={class:"overflow-hidden"},ue={class:"space-y-3"},pe={class:"font-medium"},ye={class:"text-sm text-gray-500"},ge={class:"text-sm text-gray-500"},fe={class:"flex items-center justify-between gap-4"},be={class:"overflow-hidden"},_e={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3"},ve=["onClick"],xe={class:"space-y-2"},ke={class:"font-medium flex items-center gap-2"},he={class:"inline-flex items-center rounded-full bg-gray-200 dark:bg-gray-600 px-2 py-0.5 text-xs text-gray-700 dark:text-gray-200"},Ce={class:"text-sm text-gray-500"},we={key:0,class:"text-sm text-blue-600"},Ie=["value","onChange"],Ne=["value"],Ue=V({__name:"Show",props:{company:{},members:{},clients:{},projects:{}},setup(P){const v=P,y=h(!1),p=h(""),x=h(),N=s=>new Date(s).toLocaleDateString(),B=s=>{const t={FREE:"bg-gray-100 text-gray-800",MIDI:"bg-blue-100 text-blue-800",MAXI:"bg-green-100 text-green-800"};return t[s]||t.FREE},F=async()=>{y.value=!0,p.value=v.company.name,await j(),x.value?.focus(),x.value?.select()},k=()=>{p.value.trim()&&p.value!==v.company.name&&I.put(`/companies/${v.company.id}`,{name:p.value.trim()},{preserveState:!0,preserveScroll:!0}),y.value=!1},S=()=>{y.value=!1,p.value=""},X=async(s,t)=>{const m=t.target.value,R=m===""?null:Number(m);try{const T=document.querySelector('meta[name="csrf-token"]')?.content??"";await fetch(`/api/projects/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...T?{"X-CSRF-TOKEN":T}:{}},body:JSON.stringify({client_id:R})})}catch(E){console.error("Failed to update project client",E)}};return(s,t)=>(i(),q(K,{company:s.company},{default:l(()=>[e("div",H,[e("div",J,[y.value?(i(),d("div",G,[A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),onKeydown:[M(k,["enter"]),M(S,["escape"])],onBlur:k,class:"text-3xl font-bold text-gray-900 dark:text-gray-100 bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600",placeholder:"Enter company name",ref_key:"nameInput",ref:x},null,544),[[L,p.value]]),e("button",{onClick:k,class:"p-1 text-green-500 hover:text-green-600 transition-colors",title:"Save"},[a(u,{name:"Check",class:"w-5 h-5"})]),e("button",{onClick:S,class:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Cancel"},[a(u,{name:"X",class:"w-5 h-5"})])])):(i(),d("div",W,[a(z,{title:s.company.name},{default:l(()=>[c(n(s.company.name),1)]),_:1},8,["title"]),e("button",{onClick:F,class:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit company name"},[a(u,{name:"Edit3",class:"w-5 h-5"})])]))]),e("div",Q,[a(r(g),null,{default:l(()=>[a(r(f),null,{default:l(()=>[a(r(b),{class:"flex items-center gap-2"},{default:l(()=>[a(u,{name:"Building",class:"w-5 h-5"}),t[3]||(t[3]=c(" Company Information ",-1))]),_:1,__:[3]})]),_:1}),a(r(_),{class:"space-y-4"},{default:l(()=>[e("div",null,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),e("p",Y,n(s.company.name),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Company Code",-1)),e("p",Z,n(s.company.code),1)]),s.company.description?(i(),d("div",ee,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-500"},"Description",-1)),e("p",te,n(s.company.description),1)])):D("",!0),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("p",null,n(N(s.company.created_at)),1)])]),_:1})]),_:1}),a(r(g),null,{default:l(()=>[a(r(f),null,{default:l(()=>[a(r(b),{class:"flex items-center gap-2"},{default:l(()=>[a(u,{name:"CreditCard",class:"w-5 h-5"}),t[8]||(t[8]=c(" Subscription Details ",-1))]),_:1,__:[8]})]),_:1}),a(r(_),{class:"space-y-4"},{default:l(()=>[e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Plan",-1)),e("div",se,[e("span",{class:$([B(s.company.subscription_type),"px-2 py-1 rounded-full text-sm font-medium"])},n(s.company.subscription_type),3)])]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Members",-1)),e("p",ae,[c(n(s.company.current_member_count)+" / ",1),s.company.subscription_type==="MAXI"?(i(),d("span",oe,"Unlimited")):s.company.subscription_type==="MIDI"?(i(),d("span",ne,"10")):(i(),d("span",le,n(s.company.member_limit),1))])]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-500"},"Projects",-1)),e("p",re,[c(n(s.company.current_project_count)+" / ",1),s.company.subscription_type==="MAXI"?(i(),d("span",ie,"Unlimited")):s.company.subscription_type==="MIDI"?(i(),d("span",de,"20")):(i(),d("span",me,n(s.company.project_limit),1))])])]),_:1})]),_:1})]),a(r(g),null,{default:l(()=>[a(r(f),null,{default:l(()=>[a(r(b),{class:"flex items-center gap-2"},{default:l(()=>[a(u,{name:"Users",class:"w-5 h-5"}),c(" Team Members ("+n(s.members.length)+") ",1)]),_:1})]),_:1}),a(r(_),null,{default:l(()=>[e("div",ce,[e("div",ue,[(i(!0),d(C,null,w(s.members,o=>(i(),d("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",null,[e("p",pe,n(o.name),1),e("p",ye,n(o.email),1)]),e("div",ge," Joined "+n(N(o.created_at)),1)]))),128))])])]),_:1})]),_:1}),a(r(g),null,{default:l(()=>[a(r(f),null,{default:l(()=>[e("div",fe,[a(r(b),{class:"flex items-center gap-2"},{default:l(()=>[a(u,{name:"FolderOpen",class:"w-5 h-5"}),c(" Projects ("+n(s.projects.length)+") ",1)]),_:1}),e("button",{type:"button",onClick:t[1]||(t[1]=o=>r(I).visit("/dashboard")),class:"inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium border transition-colors bg-black text-white hover:bg-gray-900 hover:border-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 dark:hover:border-gray-300"},[a(u,{name:"Plus",class:"w-4 h-4"}),t[12]||(t[12]=e("span",null,"New Project",-1))])])]),_:1}),a(r(_),null,{default:l(()=>[e("div",be,[e("div",_e,[(i(!0),d(C,null,w(s.projects,o=>(i(),d("div",{key:o.id,class:$(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-[6px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",o.color?"":"border-l-blue-500"]),style:O(o.color?{borderLeftColor:o.color}:void 0),onClick:()=>{s.localStorage.setItem("currentProjectId",o.id.toString()),r(I).visit("/dashboard")}},[e("div",xe,[e("p",ke,[c(n(o.name)+" ",1),e("span",he,n(o.total_todos??0)+" "+n((o.total_todos??0)===1?"Todo":"Todos"),1)]),e("p",Ce,n(o.key),1),o.client?(i(),d("p",we,n(o.client.name),1)):D("",!0),e("div",{class:"mt-2",onClick:t[2]||(t[2]=U(()=>{},["stop"]))},[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1"}," Client (Optional) ",-1)),e("select",{class:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-xs text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:o.client?o.client.id:"",onChange:m=>X(o.id,m)},[t[13]||(t[13]=e("option",{value:""},"No Client",-1)),(i(!0),d(C,null,w(s.clients,m=>(i(),d("option",{key:m.id,value:m.id},n(m.name),9,Ne))),128))],40,Ie)])])],14,ve))),128))])])]),_:1})]),_:1})])]),_:1},8,["company"]))}});export{Ue as default};
