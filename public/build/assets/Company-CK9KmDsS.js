import{d as Q,r as u,A as W,D as X,c as d,o as r,a as s,b as a,h as Y,w as o,e,i as g,p as ee,t as c,n as V,j as i,s as te,F as L,k as se}from"./app-phuOVWvs.js";import{_ as k}from"./index-DmX2qDsN.js";import{_ as P,a as F,b as z,c as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-iOTx_1mA.js";import{_ as M}from"./CardDescription.vue_vue_type_script_setup_true_lang-CLuX-G5L.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-DyAFuNEi.js";import{_ as R,a as B,b as U,c as I}from"./DialogTitle.vue_vue_type_script_setup_true_lang-XGIeNV5-.js";import{_ as N}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BnYvgmIQ.js";import{_ as oe}from"./SubdomainLayout.vue_vue_type_script_setup_true_lang-D6w_rbNt.js";import{_ as le,a as ie}from"./ActivityFeed.vue_vue_type_script_setup_true_lang-Cc7JYfFe.js";import{r as b,C as H,A as ne,U as re,b as T,_ as w}from"./realtimeService-D6yjwgAD.js";import{G as de}from"./globe-BVtNIpBY.js";import{L as G}from"./lock-CPKGLcjQ.js";import"./useForwardExpose-ikUI8nUi.js";import"./Presence-DnkURNMj.js";import"./x-D6PrC7-n.js";import"./TodoComments.vue_vue_type_script_setup_true_lang-CJgIcp0h.js";import"./check-D9jFwkTL.js";import"./loader-circle-BEXsoC8K.js";const ce={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800"},ue={class:"container mx-auto px-4 py-8"},me={key:0,class:"min-h-screen bg-gray-50 dark:bg-gray-900 relative"},pe={class:"bg-white dark:bg-gray-800 shadow-sm border-b"},ye={class:"px-4 sm:px-6 lg:px-8"},fe={class:"flex justify-between items-center py-4"},ge={class:"flex items-center gap-3"},_e={class:"h-20 w-auto flex items-center justify-center overflow-hidden"},ve=["src","alt"],xe={class:"text-xl font-semibold text-gray-900 dark:text-white"},he={class:"flex items-center gap-3"},ke=["title"],be=["title"],we=["href"],Ce={class:"px-4 sm:px-6 lg:px-8 py-8"},$e={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},je={class:"p-6"},Te={key:0,class:"mt-8"},Se={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},Ae={class:"p-6"},De={key:0,class:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center"},Ve={class:"space-y-4"},Le={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},Pe={class:"flex gap-3"},Fe={class:"text-center"},ze={class:"text-xs text-gray-500 dark:text-gray-400"},Ee={key:1},Me={class:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto"},Re=["href"],Be={class:"space-y-2 text-sm text-gray-600 dark:text-gray-300"},Ue={class:"flex items-center gap-2"},Ie={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-2"},He={key:0,class:"space-y-6"},Ge={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},Ke={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},Oe={class:"flex items-center gap-1"},qe={class:"flex items-center gap-1"},Ze={class:"flex items-center gap-1"},Je={key:0},Qe=["innerHTML"],We={class:"grid grid-cols-2 gap-4 text-sm"},Xe={class:"text-gray-600 dark:text-gray-400 ml-2"},Ye={class:"text-gray-600 dark:text-gray-400 ml-2"},et={key:1},tt={class:"space-y-2"},st={class:"text-sm text-gray-700 dark:text-gray-300"},kt=Q({__name:"Company",props:{company:{},isSubdomain:{type:Boolean},todos:{},projects:{},activities:{},selectedProject:{}},setup(K){const m=K,_=u(!1),y=u(""),v=u(""),x=u(!1),C=u(!1),h=u(!1),f=u(!1),$=u(!1),n=u(null),O=()=>typeof window<"u"&&localStorage.getItem("company_key")===m.company.code?(C.value=!0,!0):!1,S=async()=>{if(!y.value.trim()){v.value="Please enter a company code";return}x.value=!0,v.value="",await new Promise(l=>setTimeout(l,500)),y.value.trim().toLowerCase()===m.company.code.toLowerCase()?(typeof window<"u"&&localStorage.setItem("company_key",m.company.code),C.value=!0,_.value=!1,y.value=""):v.value="Invalid company code. Please try again.",x.value=!1},q=()=>{typeof window<"u"&&(localStorage.removeItem("company_key"),C.value=!1,_.value=!0)},A=()=>{h.value=!h.value},D=()=>{f.value=!f.value},Z=l=>{n.value=l,$.value=!0},j=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),J=W(()=>m.company.is_public&&!C.value);return X(()=>{m.company.is_public&&(O()||(_.value=!0),console.log("ðŸ”¥ Initializing real-time service for public dashboard with company ID:",m.company.id),b.init(m.company.id,m.company.id),window.testRealtimeEvents=()=>{b.testRealtimeEvents()},window.testDatabaseRealtime=()=>{b.testDatabaseRealtime()},window.testSupabaseConnection=()=>{b.testSupabaseConnection()},window.testDeleteEvents=()=>{b.testDeleteEvents()})}),(l,t)=>(r(),d(L,null,[s(a(Y),{title:`${l.company.name} - Company Portal`},null,8,["title"]),s(oe,null,{default:o(()=>[e("div",ce,[e("div",ue,[l.company.is_public?(r(),d("div",me,[e("div",pe,[e("div",ye,[e("div",fe,[e("div",ge,[e("div",_e,[l.company.logo_url?(r(),d("img",{key:0,src:l.company.logo_url,alt:`${l.company.name} logo`,class:"w-auto h-full object-contain"},null,8,ve)):(r(),ee(a(de),{key:1,class:"w-8 h-8 text-blue-600"}))]),e("div",null,[e("h1",xe,c(l.company.name),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Public Dashboard ",-1))])]),e("div",he,[e("button",{onClick:A,title:h.value?"Hide Calendar":"Show Calendar",class:V(["inline-flex items-center justify-center p-2 transition-colors",h.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[s(a(H),{class:"w-5 h-5"})],10,ke),e("button",{onClick:D,title:f.value?"Hide Activity Feed":"Show Activity Feed",class:V(["inline-flex items-center justify-center p-2 transition-colors",f.value?"text-blue-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"])},[s(a(ne),{class:"w-5 h-5"})],10,be),s(a(k),{"as-child":"",variant:"outline",size:"sm"},{default:o(()=>[e("a",{href:`https://${l.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,we)]),_:1}),s(a(k),{"as-child":"",variant:"outline",size:"sm"},{default:o(()=>t[4]||(t[4]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[4]})])])])]),e("div",Ce,[e("div",$e,[t[5]||(t[5]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Project Tasks "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," View our current project tasks and progress ")],-1)),e("div",je,[s(le,{todos:l.todos||[],projects:l.projects||[],selectedProject:l.selectedProject,isReadOnly:!0,showCalendar:h.value,showActivityFeed:f.value,onTodoClick:Z,onToggleCalendar:A,onToggleActivityFeed:D},null,8,["todos","projects","selectedProject","showCalendar","showActivityFeed"])])]),f.value?(r(),d("div",Te,[e("div",Se,[t[6]||(t[6]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Recent Activity "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Latest updates from our team ")],-1)),e("div",Ae,[s(ie,{activities:l.activities||[],isReadOnly:!0},null,8,["activities"])])])])):g("",!0)]),J.value?(r(),d("div",De,[s(a(R),{open:_.value,"onUpdate:open":t[1]||(t[1]=p=>_.value=p)},{default:o(()=>[s(a(B),{class:"sm:max-w-md"},{default:o(()=>[s(a(U),null,{default:o(()=>[s(a(I),{class:"flex items-center gap-2"},{default:o(()=>[s(a(G),{class:"w-5 h-5 text-blue-600"}),t[7]||(t[7]=i(" Company Access Required ",-1))]),_:1,__:[7]}),s(a(N),null,{default:o(()=>[i(" Please enter the company code to view "+c(l.company.name)+"'s public dashboard. ",1)]),_:1})]),_:1}),e("div",Ve,[e("div",null,[t[8]||(t[8]=e("label",{for:"company-code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Company Code ",-1)),s(a(ae),{id:"company-code",modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=p=>y.value=p),type:"text",placeholder:"Enter company code",class:"w-full",disabled:x.value,onKeydown:te(S,["enter"])},null,8,["modelValue","disabled"]),v.value?(r(),d("p",Le,c(v.value),1)):g("",!0)]),e("div",Pe,[s(a(k),{onClick:S,disabled:x.value||!y.value.trim(),class:"flex-1"},{default:o(()=>[s(a(G),{class:"w-4 h-4 mr-2"}),i(" "+c(x.value?"Verifying...":"Access Dashboard"),1)]),_:1},8,["disabled"])]),e("div",Fe,[e("p",ze," Contact "+c(l.company.name)+" for the company code ",1),e("button",{onClick:q,class:"text-xs text-blue-600 hover:underline mt-2"}," Clear stored code (for testing) ")])])]),_:1})]),_:1},8,["open"])])):g("",!0)])):(r(),d("div",Ee,[e("div",Me,[s(a(P),null,{default:o(()=>[s(a(F),null,{default:o(()=>[s(a(z),{class:"flex items-center gap-2"},{default:o(()=>[s(a(re),{class:"w-5 h-5"}),t[9]||(t[9]=i(" Employee Access ",-1))]),_:1,__:[9]}),s(a(M),null,{default:o(()=>t[10]||(t[10]=[i(" Login to access your company dashboard ",-1)])),_:1,__:[10]})]),_:1}),s(a(E),null,{default:o(()=>[s(a(k),{"as-child":"",class:"w-full"},{default:o(()=>[e("a",{href:`https://${l.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,Re)]),_:1}),s(a(k),{"as-child":"",variant:"outline",class:"w-full"},{default:o(()=>t[11]||(t[11]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[11]})]),_:1})]),_:1}),s(a(P),null,{default:o(()=>[s(a(F),null,{default:o(()=>[s(a(z),{class:"flex items-center gap-2"},{default:o(()=>[s(a(H),{class:"w-5 h-5"}),t[12]||(t[12]=i(" Company Features ",-1))]),_:1,__:[12]}),s(a(M),null,{default:o(()=>t[13]||(t[13]=[i(" Access your company's task management system ",-1)])),_:1,__:[13]})]),_:1}),s(a(E),null,{default:o(()=>[e("div",Be,[e("div",Ue,[s(a(T),{class:"w-4 h-4 text-green-600"}),t[14]||(t[14]=i(" Task Management ",-1))]),e("div",Ie,[s(a(T),{class:"w-4 h-4 text-green-600"}),t[15]||(t[15]=i(" Team Collaboration ",-1))]),e("div",Ne,[s(a(T),{class:"w-4 h-4 text-green-600"}),t[16]||(t[16]=i(" Project Tracking ",-1))])])]),_:1})]),_:1})])])),t[17]||(t[17]=e("div",{class:"text-center mt-8 text-gray-500 dark:text-gray-400"},[e("p",null,[i("Powered by "),e("a",{href:"https://zaptask.co.uk",class:"text-blue-600 hover:underline"},"ZapTask")])],-1))])]),s(a(R),{open:$.value,"onUpdate:open":t[2]||(t[2]=p=>$.value=p)},{default:o(()=>[s(a(B),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:o(()=>[s(a(U),null,{default:o(()=>[s(a(I),{class:"flex items-center gap-2"},{default:o(()=>[s(w,{name:"FileText",class:"w-5 h-5 text-blue-600"}),t[18]||(t[18]=i(" Task Details ",-1))]),_:1,__:[18]}),s(a(N),null,{default:o(()=>t[19]||(t[19]=[i(" View detailed information about this task ",-1)])),_:1,__:[19]})]),_:1}),n.value?(r(),d("div",He,[e("div",null,[e("h3",Ge,c(n.value.title),1),e("div",Ke,[e("span",Oe,[s(w,{name:"Calendar",class:"w-4 h-4"}),i(" "+c(n.value.due_date?j(n.value.due_date):"No due date"),1)]),e("span",qe,[s(w,{name:"Flag",class:"w-4 h-4"}),i(" "+c(n.value.priority),1)]),e("span",Ze,[s(w,{name:"Circle",class:"w-4 h-4"}),i(" "+c(n.value.type||"Task"),1)])])]),n.value.description?(r(),d("div",Je,[t[20]||(t[20]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},"Description",-1)),e("div",{class:"prose prose-sm max-w-none text-gray-700 dark:text-gray-300",innerHTML:n.value.description},null,8,Qe)])):g("",!0),e("div",We,[e("div",null,[t[21]||(t[21]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Created:",-1)),e("span",Xe,c(j(n.value.created_at)),1)]),e("div",null,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Last Updated:",-1)),e("span",Ye,c(j(n.value.updated_at)),1)])]),n.value.subtasks&&n.value.subtasks.length>0?(r(),d("div",et,[t[23]||(t[23]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-3"},"Subtasks",-1)),e("div",tt,[(r(!0),d(L,null,se(n.value.subtasks,p=>(r(),d("div",{key:p.id,class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[s(w,{name:"CheckCircle",class:"w-4 h-4 text-green-500"}),e("span",st,c(p.title),1)]))),128))])])):g("",!0)])):g("",!0)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{kt as default};
