import{d as $,G as D,r as H,M as P,c as i,E as C,b as u,o as p,f as s,C as a,L as A,l,e as r,g as v,t as _,h as m,F as O}from"./app-C7qpyz_t.js";import{q}from"./index-y7MiuvJb.js";import{_ as F}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DjUs58cN.js";import{_ as f,a as g,b as Q,c as K,d as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-jNn-NYLz.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-C9MJb4zb.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-Ck5EmDp7.js";import{_ as G}from"./Layout.vue_vue_type_script_setup_true_lang-W4i5jpXL.js";import{I,C as S,b as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-DvDO60FY.js";import"./check-qkrWDdJj.js";import"./useForwardExpose-B2rxj81R.js";import"./index-Chnu9G4N.js";const n=o=>({url:n.url(o),method:"patch"});n.definition={methods:["patch"],url:"/settings/dashboard"};n.url=o=>n.definition.url+q(o);n.patch=o=>({url:n.url(o),method:"patch"});const E=o=>({action:n.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...o?.query??o?.mergeQuery??{}}}),method:"post"});E.patch=o=>({action:n.url({[o?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...o?.query??o?.mergeQuery??{}}}),method:"post"});n.form=E;const M={class:"space-y-6"},X={key:0,class:"mb-6"},w={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},W={class:"text-sm font-medium"},z={key:1,class:"mb-6"},j={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},J={class:"text-sm font-medium"},V={class:"flex items-start space-x-3"},Y={class:"grid gap-1.5 leading-none"},Z={class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},ee={class:"flex items-center pt-4"},ue=$({__name:"Dashboard",props:{user:{},company:{}},setup(o){const h=o,b=D(),c=H(!1),d=P({prune_completed_tasks:!1}),T=i(()=>{const e=h.company?.prune_completed_tasks;return console.log("CHECKBOX DEBUG: Raw prop value:",e,"Type:",typeof e),e===!0||e===1||e==="1"||e==="true"?(console.log("CHECKBOX DEBUG: Setting to TRUE"),!0):(console.log("CHECKBOX DEBUG: Setting to FALSE"),!1)});C(()=>h.company?.prune_completed_tasks,e=>{console.log("PROPS WATCH: New value:",e,"Type:",typeof e);const t=e===!0||e===1||e==="1"||e==="true";console.log("PROPS WATCH: Converted to:",t),d.prune_completed_tasks=t,c.value=t},{immediate:!0}),C(c,e=>{console.log("REF WATCH: Local ref changed to:",e),d.prune_completed_tasks=e});const B=()=>{d.patch(n().url,{preserveScroll:!0,onSuccess:e=>{}})},k=i(()=>b.props.errors||{}),x=i(()=>b.props.flash?.success||"");return(e,t)=>(p(),u(O,null,[s(a(A),{title:"Dashboard Settings"}),s(L,null,{default:l(()=>[s(G,null,{default:l(()=>[r("div",M,[t[6]||(t[6]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Dashboard Settings"),r("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure your dashboard preferences and automation settings. ")],-1)),x.value?(p(),u("div",X,[s(a(f),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:l(()=>[s(a(g),{class:"p-4"},{default:l(()=>[r("div",w,[s(a(I),{class:"w-5 h-5 flex-shrink-0"}),r("p",W,_(x.value),1)])]),_:1})]),_:1})])):v("",!0),k.value.error?(p(),u("div",z,[s(a(f),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:l(()=>[s(a(g),{class:"p-4"},{default:l(()=>[r("div",j,[s(a(S),{class:"w-5 h-5 flex-shrink-0"}),r("p",J,_(k.value.error),1)])]),_:1})]),_:1})])):v("",!0),s(a(f),null,{default:l(()=>[s(a(Q),null,{default:l(()=>[s(a(K),null,{default:l(()=>t[1]||(t[1]=[m("Task Management",-1)])),_:1,__:[1]}),s(a(N),null,{default:l(()=>t[2]||(t[2]=[m(" Configure automatic task management and cleanup settings. ",-1)])),_:1,__:[2]})]),_:1}),s(a(g),{class:"space-y-4"},{default:l(()=>[r("div",V,[s(a(R),{id:"prune_completed_tasks",checked:T.value,"onUpdate:checked":t[0]||(t[0]=y=>{console.log("CHECKBOX CLICKED:",y),c.value.value=y})},null,8,["checked"]),r("div",Y,[s(a(U),{for:"prune_completed_tasks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:l(()=>t[3]||(t[3]=[m(" Prune all Completed tasks in the Done column (daily at midnight) ",-1)])),_:1,__:[3]}),t[4]||(t[4]=r("p",{class:"text-xs text-muted-foreground"}," Automatically delete all completed tasks and their comments daily at midnight. This helps keep your workspace clean and organized. ",-1))])]),r("div",Z,[s(a(S),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),t[5]||(t[5]=r("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[r("p",{class:"font-medium mb-1"},"Important:"),r("p",{class:"text-xs"}," Once tasks are pruned, they cannot be recovered. Make sure you have exported any important data before enabling this feature. ")],-1))]),r("div",ee,[s(a(F),{onClick:B,disabled:a(d).processing},{default:l(()=>[m(_(a(d).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}});export{ue as default};
