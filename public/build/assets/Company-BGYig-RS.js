import{d as B,k as y,A as T,C as A,c as d,o as n,a as s,b as a,h as I,w as l,e,m as w,t as c,i as k,j as i,q as M,F as N}from"./app-Coqc6U5W.js";import{_}from"./index-CQPzGqdQ.js";import{_ as C,a as $,b as j,c as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-BC1Hayz5.js";import{_ as V}from"./CardDescription.vue_vue_type_script_setup_true_lang-CG9rR5CK.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-DJla4Vju.js";import{_ as F,a as q,b as G,c as K}from"./DialogTitle.vue_vue_type_script_setup_true_lang-ClfEZqlT.js";import{_ as O}from"./DialogDescription.vue_vue_type_script_setup_true_lang-JNNSaAiD.js";import{_ as W}from"./SubdomainLayout.vue_vue_type_script_setup_true_lang-B3O-0hxa.js";import{_ as Z,a as H}from"./ActivityFeed.vue_vue_type_script_setup_true_lang-rP9zsaz9.js";import{r as g,U as J,C as Q,b as h}from"./realtimeService-BOk008M7.js";import{G as S}from"./globe-N-b-Ub4Q.js";import{L as E}from"./lock-CUWlyiua.js";import"./useForwardExpose-QNXklZDo.js";import"./Presence-CkpteJmv.js";import"./x-BUOb5bsF.js";import"./check-60_IB-WC.js";import"./loader-circle-CEQtUqnx.js";const X={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800"},Y={class:"container mx-auto px-4 py-8"},ee={class:"text-center mb-8"},te={class:"flex justify-center mb-4"},se={class:"h-20 w-auto flex items-center justify-center overflow-hidden"},ae=["src","alt"],oe={class:"text-4xl font-bold text-gray-900 dark:text-white mb-2"},le={class:"text-lg text-gray-600 dark:text-gray-300"},ie={key:0,class:"min-h-screen bg-gray-50 dark:bg-gray-900 relative"},ne={class:"bg-white dark:bg-gray-800 shadow-sm border-b"},re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},de={class:"flex justify-between items-center py-4"},ce={class:"flex items-center gap-3"},me={class:"h-20 w-auto flex items-center justify-center overflow-hidden"},ue=["src","alt"],pe={class:"text-xl font-semibold text-gray-900 dark:text-white"},fe={class:"flex items-center gap-3"},ye=["href"],_e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ge={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},ve={class:"lg:col-span-3"},be={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},he={class:"p-6"},xe={class:"lg:col-span-1"},we={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},ke={class:"p-6"},Ce={key:0,class:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center"},$e={class:"space-y-4"},je={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},Pe={class:"flex gap-3"},Ve={class:"text-center"},Se={class:"text-xs text-gray-500 dark:text-gray-400"},Ee={key:1},ze={class:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto"},De=["href"],Le={class:"space-y-2 text-sm text-gray-600 dark:text-gray-300"},Re={class:"flex items-center gap-2"},Be={class:"flex items-center gap-2"},Te={class:"flex items-center gap-2"},et=B({__name:"Company",props:{company:{},isSubdomain:{type:Boolean},todos:{},projects:{},activities:{},selectedProject:{}},setup(z){const r=z,u=y(!1),m=y(""),p=y(""),f=y(!1),v=y(!1),D=()=>typeof window<"u"&&localStorage.getItem("company_key")===r.company.code?(v.value=!0,!0):!1,x=async()=>{if(!m.value.trim()){p.value="Please enter a company code";return}f.value=!0,p.value="",await new Promise(o=>setTimeout(o,500)),m.value.trim().toLowerCase()===r.company.code.toLowerCase()?(typeof window<"u"&&localStorage.setItem("company_key",r.company.code),v.value=!0,u.value=!1,m.value=""):p.value="Invalid company code. Please try again.",f.value=!1},L=()=>{typeof window<"u"&&(localStorage.removeItem("company_key"),v.value=!1,u.value=!0)},R=T(()=>r.company.is_public&&!v.value);return A(()=>{r.company.is_public&&(D()||(u.value=!0),console.log("ðŸ”¥ Initializing real-time service for public dashboard with company ID:",r.company.id),g.init(r.company.id,r.company.id),window.testRealtimeEvents=()=>{g.testRealtimeEvents()},window.testDatabaseRealtime=()=>{g.testDatabaseRealtime()},window.testSupabaseConnection=()=>{g.testSupabaseConnection()},window.testDeleteEvents=()=>{g.testDeleteEvents()})}),(o,t)=>(n(),d(N,null,[s(a(I),{title:`${o.company.name} - Company Portal`},null,8,["title"]),s(W,null,{default:l(()=>[e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[e("div",se,[o.company.logo_url?(n(),d("img",{key:0,src:o.company.logo_url,alt:`${o.company.name} logo`,class:"w-auto h-full object-contain"},null,8,ae)):(n(),w(a(S),{key:1,class:"w-8 h-8 text-white"}))])]),e("h1",oe,c(o.company.name),1),e("p",le,c(o.company.is_public?`Welcome to ${o.company.name}`:"Company Portal"),1)]),o.company.is_public?(n(),d("div",ie,[e("div",ne,[e("div",re,[e("div",de,[e("div",ce,[e("div",me,[o.company.logo_url?(n(),d("img",{key:0,src:o.company.logo_url,alt:`${o.company.name} logo`,class:"w-auto h-full object-contain"},null,8,ue)):(n(),w(a(S),{key:1,class:"w-8 h-8 text-blue-600"}))]),e("div",null,[e("h1",pe,c(o.company.name),1),t[2]||(t[2]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Public Dashboard ",-1))])]),e("div",fe,[s(a(_),{"as-child":"",variant:"outline",size:"sm"},{default:l(()=>[e("a",{href:`https://${o.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,ye)]),_:1}),s(a(_),{"as-child":"",variant:"outline",size:"sm"},{default:l(()=>t[3]||(t[3]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[3]})])])])]),e("div",_e,[e("div",ge,[e("div",ve,[e("div",be,[t[4]||(t[4]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Project Tasks "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," View our current project tasks and progress ")],-1)),e("div",he,[s(Z,{todos:o.todos||[],projects:o.projects||[],selectedProject:o.selectedProject,isReadOnly:!0},null,8,["todos","projects","selectedProject"])])])]),e("div",xe,[e("div",we,[t[5]||(t[5]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Recent Activity "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Latest updates from our team ")],-1)),e("div",ke,[s(H,{activities:o.activities||[],isReadOnly:!0},null,8,["activities"])])])])])]),R.value?(n(),d("div",Ce,[s(a(F),{open:u.value,"onUpdate:open":t[1]||(t[1]=b=>u.value=b)},{default:l(()=>[s(a(q),{class:"sm:max-w-md"},{default:l(()=>[s(a(G),null,{default:l(()=>[s(a(K),{class:"flex items-center gap-2"},{default:l(()=>[s(a(E),{class:"w-5 h-5 text-blue-600"}),t[6]||(t[6]=i(" Company Access Required ",-1))]),_:1,__:[6]}),s(a(O),null,{default:l(()=>[i(" Please enter the company code to view "+c(o.company.name)+"'s public dashboard. ",1)]),_:1})]),_:1}),e("div",$e,[e("div",null,[t[7]||(t[7]=e("label",{for:"company-code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Company Code ",-1)),s(a(U),{id:"company-code",modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=b=>m.value=b),type:"text",placeholder:"Enter company code",class:"w-full",disabled:f.value,onKeydown:M(x,["enter"])},null,8,["modelValue","disabled"]),p.value?(n(),d("p",je,c(p.value),1)):k("",!0)]),e("div",Pe,[s(a(_),{onClick:x,disabled:f.value||!m.value.trim(),class:"flex-1"},{default:l(()=>[s(a(E),{class:"w-4 h-4 mr-2"}),i(" "+c(f.value?"Verifying...":"Access Dashboard"),1)]),_:1},8,["disabled"])]),e("div",Ve,[e("p",Se," Contact "+c(o.company.name)+" for the company code ",1),e("button",{onClick:L,class:"text-xs text-blue-600 hover:underline mt-2"}," Clear stored code (for testing) ")])])]),_:1})]),_:1},8,["open"])])):k("",!0)])):(n(),d("div",Ee,[e("div",ze,[s(a(C),null,{default:l(()=>[s(a($),null,{default:l(()=>[s(a(j),{class:"flex items-center gap-2"},{default:l(()=>[s(a(J),{class:"w-5 h-5"}),t[8]||(t[8]=i(" Employee Access ",-1))]),_:1,__:[8]}),s(a(V),null,{default:l(()=>t[9]||(t[9]=[i(" Login to access your company dashboard ",-1)])),_:1,__:[9]})]),_:1}),s(a(P),null,{default:l(()=>[s(a(_),{"as-child":"",class:"w-full"},{default:l(()=>[e("a",{href:`https://${o.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,De)]),_:1}),s(a(_),{"as-child":"",variant:"outline",class:"w-full"},{default:l(()=>t[10]||(t[10]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[10]})]),_:1})]),_:1}),s(a(C),null,{default:l(()=>[s(a($),null,{default:l(()=>[s(a(j),{class:"flex items-center gap-2"},{default:l(()=>[s(a(Q),{class:"w-5 h-5"}),t[11]||(t[11]=i(" Company Features ",-1))]),_:1,__:[11]}),s(a(V),null,{default:l(()=>t[12]||(t[12]=[i(" Access your company's task management system ",-1)])),_:1,__:[12]})]),_:1}),s(a(P),null,{default:l(()=>[e("div",Le,[e("div",Re,[s(a(h),{class:"w-4 h-4 text-green-600"}),t[13]||(t[13]=i(" Task Management ",-1))]),e("div",Be,[s(a(h),{class:"w-4 h-4 text-green-600"}),t[14]||(t[14]=i(" Team Collaboration ",-1))]),e("div",Te,[s(a(h),{class:"w-4 h-4 text-green-600"}),t[15]||(t[15]=i(" Project Tracking ",-1))])])]),_:1})]),_:1})])])),t[16]||(t[16]=e("div",{class:"text-center mt-8 text-gray-500 dark:text-gray-400"},[e("p",null,[i("Powered by "),e("a",{href:"https://zaptask.co.uk",class:"text-blue-600 hover:underline"},"ZapTask")])],-1))])])]),_:1})],64))}});export{et as default};
