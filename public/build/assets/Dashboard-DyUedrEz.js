import{d as S,D as A,K as $,C as B,c as k,a as i,o as c,f as t,A as e,J as q,q as o,b as s,e as x,t as u,g as m,F as w}from"./app-BaqorLJj.js";import{q as F}from"./index-y7MiuvJb.js";import{_ as P}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Y267o7I9.js";import{_ as p,a as _,b as Q,c as H,d as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-CQOi_xAm.js";import{_ as E}from"./Checkbox.vue_vue_type_script_setup_true_lang-FUtaz5v2.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-CPLYhWYF.js";import{_ as O}from"./Layout.vue_vue_type_script_setup_true_lang-DGHbj_Bv.js";import{I as U,C as y,b as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-Crn5qvPr.js";import"./check-DMPjz7HK.js";import"./useForwardExpose-BYlxlPXL.js";import"./index-Chnu9G4N.js";const d=a=>({url:d.url(a),method:"patch"});d.definition={methods:["patch"],url:"/settings/dashboard"};d.url=a=>d.definition.url+F(a);d.patch=a=>({url:d.url(a),method:"patch"});const v=a=>({action:d.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});v.patch=a=>({action:d.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});d.form=v;const I={class:"space-y-6"},M={key:0,class:"mb-6"},R={class:"flex items-center gap-2 text-green-700 dark:text-green-300"},V={class:"text-sm font-medium"},z={key:1,class:"mb-6"},J={class:"flex items-center gap-2 text-red-700 dark:text-red-300"},K={class:"text-sm font-medium"},j={class:"flex items-start space-x-3"},L={class:"grid gap-1.5 leading-none"},W={class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},X={class:"flex items-center pt-4"},me=S({__name:"Dashboard",props:{user:{},company:{}},setup(a){const f=a,g=A(),n=$({prune_completed_tasks:!1});B(()=>f.company?.prune_completed_tasks,l=>{console.log("DASHBOARD DEBUG: Props changed, prune_completed_tasks:",l),console.log("DASHBOARD DEBUG: Full company props:",f.company),n.prune_completed_tasks=l||!1,console.log("DASHBOARD DEBUG: Form updated to:",n.prune_completed_tasks)},{immediate:!0});const D=()=>{n.patch(d().url,{preserveScroll:!0,onSuccess:l=>{}})},b=k(()=>g.props.errors||{}),h=k(()=>g.props.flash?.success||"");return(l,r)=>(c(),i(w,null,[t(e(q),{title:"Dashboard Settings"}),t(G,null,{default:o(()=>[t(O,null,{default:o(()=>[s("div",I,[r[6]||(r[6]=s("div",null,[s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Dashboard Settings"),s("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure your dashboard preferences and automation settings. ")],-1)),h.value?(c(),i("div",M,[t(e(p),{class:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20"},{default:o(()=>[t(e(_),{class:"p-4"},{default:o(()=>[s("div",R,[t(e(U),{class:"w-5 h-5 flex-shrink-0"}),s("p",V,u(h.value),1)])]),_:1})]),_:1})])):x("",!0),b.value.error?(c(),i("div",z,[t(e(p),{class:"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"},{default:o(()=>[t(e(_),{class:"p-4"},{default:o(()=>[s("div",J,[t(e(y),{class:"w-5 h-5 flex-shrink-0"}),s("p",K,u(b.value.error),1)])]),_:1})]),_:1})])):x("",!0),t(e(p),null,{default:o(()=>[t(e(Q),null,{default:o(()=>[t(e(H),null,{default:o(()=>r[1]||(r[1]=[m("Task Management",-1)])),_:1,__:[1]}),t(e(T),null,{default:o(()=>r[2]||(r[2]=[m(" Configure automatic task management and cleanup settings. ",-1)])),_:1,__:[2]})]),_:1}),t(e(_),{class:"space-y-4"},{default:o(()=>[s("div",j,[t(e(E),{id:"prune_completed_tasks",checked:e(n).prune_completed_tasks,"onUpdate:checked":r[0]||(r[0]=C=>e(n).prune_completed_tasks=C)},null,8,["checked"]),s("div",L,[t(e(N),{for:"prune_completed_tasks",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:o(()=>r[3]||(r[3]=[m(" Prune all Completed tasks in the Done column (daily at midnight) ",-1)])),_:1,__:[3]}),r[4]||(r[4]=s("p",{class:"text-xs text-muted-foreground"}," Automatically delete all completed tasks and their comments daily at midnight. This helps keep your workspace clean and organized. ",-1))])]),s("div",W,[t(e(y),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),r[5]||(r[5]=s("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[s("p",{class:"font-medium mb-1"},"Important:"),s("p",{class:"text-xs"}," Once tasks are pruned, they cannot be recovered. Make sure you have exported any important data before enabling this feature. ")],-1))]),s("div",X,[t(e(P),{onClick:D,disabled:e(n).processing},{default:o(()=>[m(u(e(n).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}});export{me as default};
