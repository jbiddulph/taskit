import{d as L,k as f,A as R,C as B,c,o as r,a as s,b as a,h as T,w as o,e,i as k,m as A,t as y,j as i,q as I,F as M}from"./app-DLcmTPla.js";import{_}from"./index-C0U_zu10.js";import{_ as w,a as C,b as $,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-DUbCF4KH.js";import{_ as P}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bq02a8YE.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-D5xt_LjZ.js";import{_ as U,a as F,b as q,c as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C_OW72SQ.js";import{_ as K}from"./DialogDescription.vue_vue_type_script_setup_true_lang-iTyTVS0r.js";import{_ as O}from"./SubdomainLayout.vue_vue_type_script_setup_true_lang-BuNpbYsH.js";import{_ as Z,a as H}from"./ActivityFeed.vue_vue_type_script_setup_true_lang-DCGbt4FL.js";import{r as g,U as J,C as Q,b as x}from"./realtimeService-C0mh084L.js";import{G as W}from"./globe-Dt_FZa0F.js";import{L as V}from"./lock-JGSqzUKl.js";import"./useForwardExpose-Dp_Dcjmm.js";import"./Presence-BTBF_QhL.js";import"./x-Cizmwo1m.js";import"./check-CiEF4lyF.js";import"./loader-circle-rhbTDOR4.js";const X={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800"},Y={class:"container mx-auto px-4 py-8"},ee={key:0,class:"min-h-screen bg-gray-50 dark:bg-gray-900 relative"},te={class:"bg-white dark:bg-gray-800 shadow-sm border-b"},se={class:"px-4 sm:px-6 lg:px-8"},ae={class:"flex justify-between items-center py-4"},oe={class:"flex items-center gap-3"},le={class:"h-20 w-auto flex items-center justify-center overflow-hidden"},ie=["src","alt"],ne={class:"text-xl font-semibold text-gray-900 dark:text-white"},re={class:"flex items-center gap-3"},de=["href"],ce={class:"px-4 sm:px-6 lg:px-8 py-8"},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},ue={class:"p-6"},pe={class:"mt-8"},fe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border"},ye={class:"p-6"},_e={key:0,class:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center"},ge={class:"space-y-4"},ve={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},be={class:"flex gap-3"},xe={class:"text-center"},he={class:"text-xs text-gray-500 dark:text-gray-400"},ke={key:1},we={class:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto"},Ce=["href"],$e={class:"space-y-2 text-sm text-gray-600 dark:text-gray-300"},je={class:"flex items-center gap-2"},Pe={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-2"},Oe=L({__name:"Company",props:{company:{},isSubdomain:{type:Boolean},todos:{},projects:{},activities:{},selectedProject:{}},setup(S){const n=S,m=f(!1),d=f(""),u=f(""),p=f(!1),v=f(!1),E=()=>typeof window<"u"&&localStorage.getItem("company_key")===n.company.code?(v.value=!0,!0):!1,h=async()=>{if(!d.value.trim()){u.value="Please enter a company code";return}p.value=!0,u.value="",await new Promise(l=>setTimeout(l,500)),d.value.trim().toLowerCase()===n.company.code.toLowerCase()?(typeof window<"u"&&localStorage.setItem("company_key",n.company.code),v.value=!0,m.value=!1,d.value=""):u.value="Invalid company code. Please try again.",p.value=!1},z=()=>{typeof window<"u"&&(localStorage.removeItem("company_key"),v.value=!1,m.value=!0)},D=R(()=>n.company.is_public&&!v.value);return B(()=>{n.company.is_public&&(E()||(m.value=!0),console.log("ðŸ”¥ Initializing real-time service for public dashboard with company ID:",n.company.id),g.init(n.company.id,n.company.id),window.testRealtimeEvents=()=>{g.testRealtimeEvents()},window.testDatabaseRealtime=()=>{g.testDatabaseRealtime()},window.testSupabaseConnection=()=>{g.testSupabaseConnection()},window.testDeleteEvents=()=>{g.testDeleteEvents()})}),(l,t)=>(r(),c(M,null,[s(a(T),{title:`${l.company.name} - Company Portal`},null,8,["title"]),s(O,null,{default:o(()=>[e("div",X,[e("div",Y,[l.company.is_public?(r(),c("div",ee,[e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[e("div",le,[l.company.logo_url?(r(),c("img",{key:0,src:l.company.logo_url,alt:`${l.company.name} logo`,class:"w-auto h-full object-contain"},null,8,ie)):(r(),A(a(W),{key:1,class:"w-8 h-8 text-blue-600"}))]),e("div",null,[e("h1",ne,y(l.company.name),1),t[2]||(t[2]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Public Dashboard ",-1))])]),e("div",re,[s(a(_),{"as-child":"",variant:"outline",size:"sm"},{default:o(()=>[e("a",{href:`https://${l.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,de)]),_:1}),s(a(_),{"as-child":"",variant:"outline",size:"sm"},{default:o(()=>t[3]||(t[3]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[3]})])])])]),e("div",ce,[e("div",me,[t[4]||(t[4]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Project Tasks "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," View our current project tasks and progress ")],-1)),e("div",ue,[s(Z,{todos:l.todos||[],projects:l.projects||[],selectedProject:l.selectedProject,isReadOnly:!0},null,8,["todos","projects","selectedProject"])])]),e("div",pe,[e("div",fe,[t[5]||(t[5]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Recent Activity "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Latest updates from our team ")],-1)),e("div",ye,[s(H,{activities:l.activities||[],isReadOnly:!0},null,8,["activities"])])])])]),D.value?(r(),c("div",_e,[s(a(U),{open:m.value,"onUpdate:open":t[1]||(t[1]=b=>m.value=b)},{default:o(()=>[s(a(F),{class:"sm:max-w-md"},{default:o(()=>[s(a(q),null,{default:o(()=>[s(a(G),{class:"flex items-center gap-2"},{default:o(()=>[s(a(V),{class:"w-5 h-5 text-blue-600"}),t[6]||(t[6]=i(" Company Access Required ",-1))]),_:1,__:[6]}),s(a(K),null,{default:o(()=>[i(" Please enter the company code to view "+y(l.company.name)+"'s public dashboard. ",1)]),_:1})]),_:1}),e("div",ge,[e("div",null,[t[7]||(t[7]=e("label",{for:"company-code",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Company Code ",-1)),s(a(N),{id:"company-code",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=b=>d.value=b),type:"text",placeholder:"Enter company code",class:"w-full",disabled:p.value,onKeydown:I(h,["enter"])},null,8,["modelValue","disabled"]),u.value?(r(),c("p",ve,y(u.value),1)):k("",!0)]),e("div",be,[s(a(_),{onClick:h,disabled:p.value||!d.value.trim(),class:"flex-1"},{default:o(()=>[s(a(V),{class:"w-4 h-4 mr-2"}),i(" "+y(p.value?"Verifying...":"Access Dashboard"),1)]),_:1},8,["disabled"])]),e("div",xe,[e("p",he," Contact "+y(l.company.name)+" for the company code ",1),e("button",{onClick:z,class:"text-xs text-blue-600 hover:underline mt-2"}," Clear stored code (for testing) ")])])]),_:1})]),_:1},8,["open"])])):k("",!0)])):(r(),c("div",ke,[e("div",we,[s(a(w),null,{default:o(()=>[s(a(C),null,{default:o(()=>[s(a($),{class:"flex items-center gap-2"},{default:o(()=>[s(a(J),{class:"w-5 h-5"}),t[8]||(t[8]=i(" Employee Access ",-1))]),_:1,__:[8]}),s(a(P),null,{default:o(()=>t[9]||(t[9]=[i(" Login to access your company dashboard ",-1)])),_:1,__:[9]})]),_:1}),s(a(j),null,{default:o(()=>[s(a(_),{"as-child":"",class:"w-full"},{default:o(()=>[e("a",{href:`https://${l.company.subdomain}.zaptask.co.uk/login`}," Employee Login ",8,Ce)]),_:1}),s(a(_),{"as-child":"",variant:"outline",class:"w-full"},{default:o(()=>t[10]||(t[10]=[e("a",{href:"https://zaptask.co.uk"}," Visit Main Site ",-1)])),_:1,__:[10]})]),_:1})]),_:1}),s(a(w),null,{default:o(()=>[s(a(C),null,{default:o(()=>[s(a($),{class:"flex items-center gap-2"},{default:o(()=>[s(a(Q),{class:"w-5 h-5"}),t[11]||(t[11]=i(" Company Features ",-1))]),_:1,__:[11]}),s(a(P),null,{default:o(()=>t[12]||(t[12]=[i(" Access your company's task management system ",-1)])),_:1,__:[12]})]),_:1}),s(a(j),null,{default:o(()=>[e("div",$e,[e("div",je,[s(a(x),{class:"w-4 h-4 text-green-600"}),t[13]||(t[13]=i(" Task Management ",-1))]),e("div",Pe,[s(a(x),{class:"w-4 h-4 text-green-600"}),t[14]||(t[14]=i(" Team Collaboration ",-1))]),e("div",Ve,[s(a(x),{class:"w-4 h-4 text-green-600"}),t[15]||(t[15]=i(" Project Tracking ",-1))])])]),_:1})]),_:1})])])),t[16]||(t[16]=e("div",{class:"text-center mt-8 text-gray-500 dark:text-gray-400"},[e("p",null,[i("Powered by "),e("a",{href:"https://zaptask.co.uk",class:"text-blue-600 hover:underline"},"ZapTask")])],-1))])])]),_:1})],64))}});export{Oe as default};
